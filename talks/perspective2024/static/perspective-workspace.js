var sl=Object.create;var Si=Object.defineProperty;var ul=Object.getOwnPropertyDescriptor;var ll=Object.getOwnPropertyNames;var dl=Object.getPrototypeOf,cl=Object.prototype.hasOwnProperty;var z=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var fl=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of ll(t))!cl.call(e,l)&&l!==n&&Si(e,l,{get:()=>t[l],enumerable:!(a=ul(t,l))||a.enumerable});return e};var Qe=(e,t,n)=>(n=e!=null?sl(dl(e)):{},fl(t||!e||!e.__esModule?Si(n,"default",{value:e,enumerable:!0}):n,e));var Ut=z((jt,ji)=>{(function(e,t){typeof jt=="object"&&typeof ji<"u"?t(jt):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.lumino_coreutils={}))})(jt,function(e){"use strict";e.JSONExt=void 0,function(f){f.emptyObject=Object.freeze({}),f.emptyArray=Object.freeze([]);function c(y){return y===null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"}f.isPrimitive=c;function h(y){return Array.isArray(y)}f.isArray=h;function g(y){return!c(y)&&!h(y)}f.isObject=g;function x(y,k){if(y===k)return!0;if(c(y)||c(k))return!1;var T=h(y),E=h(k);return T!==E?!1:T&&E?I(y,k):b(y,k)}f.deepEqual=x;function M(y){return c(y)?y:h(y)?v(y):w(y)}f.deepCopy=M;function I(y,k){if(y===k)return!0;if(y.length!==k.length)return!1;for(var T=0,E=y.length;T<E;++T)if(!x(y[T],k[T]))return!1;return!0}function b(y,k){if(y===k)return!0;for(var T in y)if(y[T]!==void 0&&!(T in k))return!1;for(var T in k)if(k[T]!==void 0&&!(T in y))return!1;for(var T in y){var E=y[T],S=k[T];if(!(E===void 0&&S===void 0)&&(E===void 0||S===void 0||!x(E,S)))return!1}return!0}function v(y){for(var k=new Array(y.length),T=0,E=y.length;T<E;++T)k[T]=M(y[T]);return k}function w(y){var k={};for(var T in y){var E=y[T];E!==void 0&&(k[T]=M(E))}return k}}(e.JSONExt||(e.JSONExt={}));var t=function(){function f(){this._types=[],this._values=[]}return f.prototype.types=function(){return this._types.slice()},f.prototype.hasData=function(c){return this._types.indexOf(c)!==-1},f.prototype.getData=function(c){var h=this._types.indexOf(c);return h!==-1?this._values[h]:void 0},f.prototype.setData=function(c,h){this.clearData(c),this._types.push(c),this._values.push(h)},f.prototype.clearData=function(c){var h=this._types.indexOf(c);h!==-1&&(this._types.splice(h,1),this._values.splice(h,1))},f.prototype.clear=function(){this._types.length=0,this._values.length=0},f}(),n=function(){function f(){var c=this;this.promise=new Promise(function(h,g){c._resolve=h,c._reject=g})}return f.prototype.resolve=function(c){var h=this._resolve;h(c)},f.prototype.reject=function(c){var h=this._reject;h(c)},f}(),a=function(){function f(c){this.name=c,this._tokenStructuralPropertyT=null}return f}();function l(f){for(var c=0,h=0,g=f.length;h<g;++h)h%4===0&&(c=Math.random()*4294967295>>>0),f[h]=c&255,c>>>=8}e.Random=void 0,function(f){f.getRandomValues=function(){var c=typeof window<"u"&&(window.crypto||window.msCrypto)||null;return c&&typeof c.getRandomValues=="function"?function(g){return c.getRandomValues(g)}:l}()}(e.Random||(e.Random={}));function m(f){for(var c=new Uint8Array(16),h=new Array(256),g=0;g<16;++g)h[g]="0"+g.toString(16);for(var g=16;g<256;++g)h[g]=g.toString(16);return function(){return f(c),c[6]=64|c[6]&15,c[8]=128|c[8]&63,h[c[0]]+h[c[1]]+h[c[2]]+h[c[3]]+"-"+h[c[4]]+h[c[5]]+"-"+h[c[6]]+h[c[7]]+"-"+h[c[8]]+h[c[9]]+"-"+h[c[10]]+h[c[11]]+h[c[12]]+h[c[13]]+h[c[14]]+h[c[15]]}}e.UUID=void 0,function(f){f.uuid4=m(e.Random.getRandomValues)}(e.UUID||(e.UUID={})),e.MimeData=t,e.PromiseDelegate=n,e.Token=a,Object.defineProperty(e,"__esModule",{value:!0})})});var Zi=z((nn,Xi)=>{(function(e,t){typeof nn=="object"&&typeof Xi<"u"?t(nn):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.lumino_coreutils={}))})(nn,function(e){"use strict";e.JSONExt=void 0,function(f){f.emptyObject=Object.freeze({}),f.emptyArray=Object.freeze([]);function c(y){return y===null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"}f.isPrimitive=c;function h(y){return Array.isArray(y)}f.isArray=h;function g(y){return!c(y)&&!h(y)}f.isObject=g;function x(y,k){if(y===k)return!0;if(c(y)||c(k))return!1;var T=h(y),E=h(k);return T!==E?!1:T&&E?I(y,k):b(y,k)}f.deepEqual=x;function M(y){return c(y)?y:h(y)?v(y):w(y)}f.deepCopy=M;function I(y,k){if(y===k)return!0;if(y.length!==k.length)return!1;for(var T=0,E=y.length;T<E;++T)if(!x(y[T],k[T]))return!1;return!0}function b(y,k){if(y===k)return!0;for(var T in y)if(y[T]!==void 0&&!(T in k))return!1;for(var T in k)if(k[T]!==void 0&&!(T in y))return!1;for(var T in y){var E=y[T],S=k[T];if(!(E===void 0&&S===void 0)&&(E===void 0||S===void 0||!x(E,S)))return!1}return!0}function v(y){for(var k=new Array(y.length),T=0,E=y.length;T<E;++T)k[T]=M(y[T]);return k}function w(y){var k={};for(var T in y){var E=y[T];E!==void 0&&(k[T]=M(E))}return k}}(e.JSONExt||(e.JSONExt={}));var t=function(){function f(){this._types=[],this._values=[]}return f.prototype.types=function(){return this._types.slice()},f.prototype.hasData=function(c){return this._types.indexOf(c)!==-1},f.prototype.getData=function(c){var h=this._types.indexOf(c);return h!==-1?this._values[h]:void 0},f.prototype.setData=function(c,h){this.clearData(c),this._types.push(c),this._values.push(h)},f.prototype.clearData=function(c){var h=this._types.indexOf(c);h!==-1&&(this._types.splice(h,1),this._values.splice(h,1))},f.prototype.clear=function(){this._types.length=0,this._values.length=0},f}(),n=function(){function f(){var c=this;this.promise=new Promise(function(h,g){c._resolve=h,c._reject=g})}return f.prototype.resolve=function(c){var h=this._resolve;h(c)},f.prototype.reject=function(c){var h=this._reject;h(c)},f}(),a=function(){function f(c){this.name=c,this._tokenStructuralPropertyT=null}return f}();function l(f){for(var c=0,h=0,g=f.length;h<g;++h)h%4===0&&(c=Math.random()*4294967295>>>0),f[h]=c&255,c>>>=8}e.Random=void 0,function(f){f.getRandomValues=function(){var c=typeof window<"u"&&(window.crypto||window.msCrypto)||null;return c&&typeof c.getRandomValues=="function"?function(g){return c.getRandomValues(g)}:l}()}(e.Random||(e.Random={}));function m(f){for(var c=new Uint8Array(16),h=new Array(256),g=0;g<16;++g)h[g]="0"+g.toString(16);for(var g=16;g<256;++g)h[g]=g.toString(16);return function(){return f(c),c[6]=64|c[6]&15,c[8]=128|c[8]&63,h[c[0]]+h[c[1]]+h[c[2]]+h[c[3]]+"-"+h[c[4]]+h[c[5]]+"-"+h[c[6]]+h[c[7]]+"-"+h[c[8]]+h[c[9]]+"-"+h[c[10]]+h[c[11]]+h[c[12]]+h[c[13]]+h[c[14]]+h[c[15]]}}e.UUID=void 0,function(f){f.uuid4=m(e.Random.getRandomValues)}(e.UUID||(e.UUID={})),e.MimeData=t,e.PromiseDelegate=n,e.Token=a,Object.defineProperty(e,"__esModule",{value:!0})})});var lr=z((qI,ur)=>{function Rl(){this.__data__=[],this.size=0}ur.exports=Rl});var jn=z((NI,dr)=>{function Bl(e,t){return e===t||e!==e&&t!==t}dr.exports=Bl});var St=z((KI,cr)=>{var Pl=jn();function Fl(e,t){for(var n=e.length;n--;)if(Pl(e[n][0],t))return n;return-1}cr.exports=Fl});var hr=z((VI,fr)=>{var Wl=St(),Hl=Array.prototype,ql=Hl.splice;function Nl(e){var t=this.__data__,n=Wl(t,e);if(n<0)return!1;var a=t.length-1;return n==a?t.pop():ql.call(t,n,1),--this.size,!0}fr.exports=Nl});var pr=z((jI,mr)=>{var Kl=St();function Vl(e){var t=this.__data__,n=Kl(t,e);return n<0?void 0:t[n][1]}mr.exports=Vl});var gr=z((UI,vr)=>{var jl=St();function Ul(e){return jl(this.__data__,e)>-1}vr.exports=Ul});var _r=z((GI,br)=>{var Gl=St();function $l(e,t){var n=this.__data__,a=Gl(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}br.exports=$l});var At=z(($I,yr)=>{var Yl=lr(),Xl=hr(),Zl=pr(),Jl=gr(),Ql=_r();function dt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}dt.prototype.clear=Yl;dt.prototype.delete=Xl;dt.prototype.get=Zl;dt.prototype.has=Jl;dt.prototype.set=Ql;yr.exports=dt});var wr=z((YI,xr)=>{var ed=At();function td(){this.__data__=new ed,this.size=0}xr.exports=td});var Mr=z((XI,Ir)=>{function nd(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}Ir.exports=nd});var kr=z((ZI,Tr)=>{function id(e){return this.__data__.get(e)}Tr.exports=id});var Lr=z((JI,Er)=>{function rd(e){return this.__data__.has(e)}Er.exports=rd});var Un=z((QI,Cr)=>{var od=typeof window=="object"&&window&&window.Object===Object&&window;Cr.exports=od});var Ce=z((eM,Sr)=>{var ad=Un(),sd=typeof self=="object"&&self&&self.Object===Object&&self,ud=ad||sd||Function("return this")();Sr.exports=ud});var Dt=z((tM,Ar)=>{var ld=Ce(),dd=ld.Symbol;Ar.exports=dd});var Rr=z((nM,zr)=>{var Dr=Dt(),Or=Object.prototype,cd=Or.hasOwnProperty,fd=Or.toString,Ot=Dr?Dr.toStringTag:void 0;function hd(e){var t=cd.call(e,Ot),n=e[Ot];try{e[Ot]=void 0;var a=!0}catch{}var l=fd.call(e);return a&&(t?e[Ot]=n:delete e[Ot]),l}zr.exports=hd});var Pr=z((iM,Br)=>{var md=Object.prototype,pd=md.toString;function vd(e){return pd.call(e)}Br.exports=vd});var ct=z((rM,Hr)=>{var Fr=Dt(),gd=Rr(),bd=Pr(),_d="[object Null]",yd="[object Undefined]",Wr=Fr?Fr.toStringTag:void 0;function xd(e){return e==null?e===void 0?yd:_d:Wr&&Wr in Object(e)?gd(e):bd(e)}Hr.exports=xd});var ft=z((oM,qr)=>{function wd(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}qr.exports=wd});var Gn=z((aM,Nr)=>{var Id=ct(),Md=ft(),Td="[object AsyncFunction]",kd="[object Function]",Ed="[object GeneratorFunction]",Ld="[object Proxy]";function Cd(e){if(!Md(e))return!1;var t=Id(e);return t==kd||t==Ed||t==Td||t==Ld}Nr.exports=Cd});var Vr=z((sM,Kr)=>{var Sd=Ce(),Ad=Sd["__core-js_shared__"];Kr.exports=Ad});var Gr=z((uM,Ur)=>{var $n=Vr(),jr=function(){var e=/[^.]+$/.exec($n&&$n.keys&&$n.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Dd(e){return!!jr&&jr in e}Ur.exports=Dd});var Yn=z((lM,$r)=>{var Od=Function.prototype,zd=Od.toString;function Rd(e){if(e!=null){try{return zd.call(e)}catch{}try{return e+""}catch{}}return""}$r.exports=Rd});var Xr=z((dM,Yr)=>{var Bd=Gn(),Pd=Gr(),Fd=ft(),Wd=Yn(),Hd=/[\\^$.*+?()[\]{}|]/g,qd=/^\[object .+?Constructor\]$/,Nd=Function.prototype,Kd=Object.prototype,Vd=Nd.toString,jd=Kd.hasOwnProperty,Ud=RegExp("^"+Vd.call(jd).replace(Hd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Gd(e){if(!Fd(e)||Pd(e))return!1;var t=Bd(e)?Ud:qd;return t.test(Wd(e))}Yr.exports=Gd});var Jr=z((cM,Zr)=>{function $d(e,t){return e?.[t]}Zr.exports=$d});var Ze=z((fM,Qr)=>{var Yd=Xr(),Xd=Jr();function Zd(e,t){var n=Xd(e,t);return Yd(n)?n:void 0}Qr.exports=Zd});var un=z((hM,eo)=>{var Jd=Ze(),Qd=Ce(),ec=Jd(Qd,"Map");eo.exports=ec});var zt=z((mM,to)=>{var tc=Ze(),nc=tc(Object,"create");to.exports=nc});var ro=z((pM,io)=>{var no=zt();function ic(){this.__data__=no?no(null):{},this.size=0}io.exports=ic});var ao=z((vM,oo)=>{function rc(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}oo.exports=rc});var uo=z((gM,so)=>{var oc=zt(),ac="__lodash_hash_undefined__",sc=Object.prototype,uc=sc.hasOwnProperty;function lc(e){var t=this.__data__;if(oc){var n=t[e];return n===ac?void 0:n}return uc.call(t,e)?t[e]:void 0}so.exports=lc});var co=z((bM,lo)=>{var dc=zt(),cc=Object.prototype,fc=cc.hasOwnProperty;function hc(e){var t=this.__data__;return dc?t[e]!==void 0:fc.call(t,e)}lo.exports=hc});var ho=z((_M,fo)=>{var mc=zt(),pc="__lodash_hash_undefined__";function vc(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=mc&&t===void 0?pc:t,this}fo.exports=vc});var po=z((yM,mo)=>{var gc=ro(),bc=ao(),_c=uo(),yc=co(),xc=ho();function ht(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}ht.prototype.clear=gc;ht.prototype.delete=bc;ht.prototype.get=_c;ht.prototype.has=yc;ht.prototype.set=xc;mo.exports=ht});var bo=z((xM,go)=>{var vo=po(),wc=At(),Ic=un();function Mc(){this.size=0,this.__data__={hash:new vo,map:new(Ic||wc),string:new vo}}go.exports=Mc});var yo=z((wM,_o)=>{function Tc(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}_o.exports=Tc});var Rt=z((IM,xo)=>{var kc=yo();function Ec(e,t){var n=e.__data__;return kc(t)?n[typeof t=="string"?"string":"hash"]:n.map}xo.exports=Ec});var Io=z((MM,wo)=>{var Lc=Rt();function Cc(e){var t=Lc(this,e).delete(e);return this.size-=t?1:0,t}wo.exports=Cc});var To=z((TM,Mo)=>{var Sc=Rt();function Ac(e){return Sc(this,e).get(e)}Mo.exports=Ac});var Eo=z((kM,ko)=>{var Dc=Rt();function Oc(e){return Dc(this,e).has(e)}ko.exports=Oc});var Co=z((EM,Lo)=>{var zc=Rt();function Rc(e,t){var n=zc(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}Lo.exports=Rc});var ln=z((LM,So)=>{var Bc=bo(),Pc=Io(),Fc=To(),Wc=Eo(),Hc=Co();function mt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}mt.prototype.clear=Bc;mt.prototype.delete=Pc;mt.prototype.get=Fc;mt.prototype.has=Wc;mt.prototype.set=Hc;So.exports=mt});var Do=z((CM,Ao)=>{var qc=At(),Nc=un(),Kc=ln(),Vc=200;function jc(e,t){var n=this.__data__;if(n instanceof qc){var a=n.__data__;if(!Nc||a.length<Vc-1)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new Kc(a)}return n.set(e,t),this.size=n.size,this}Ao.exports=jc});var Xn=z((SM,Oo)=>{var Uc=At(),Gc=wr(),$c=Mr(),Yc=kr(),Xc=Lr(),Zc=Do();function pt(e){var t=this.__data__=new Uc(e);this.size=t.size}pt.prototype.clear=Gc;pt.prototype.delete=$c;pt.prototype.get=Yc;pt.prototype.has=Xc;pt.prototype.set=Zc;Oo.exports=pt});var Ro=z((AM,zo)=>{var Jc="__lodash_hash_undefined__";function Qc(e){return this.__data__.set(e,Jc),this}zo.exports=Qc});var Po=z((DM,Bo)=>{function ef(e){return this.__data__.has(e)}Bo.exports=ef});var Zn=z((OM,Fo)=>{var tf=ln(),nf=Ro(),rf=Po();function dn(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new tf;++t<n;)this.add(e[t])}dn.prototype.add=dn.prototype.push=nf;dn.prototype.has=rf;Fo.exports=dn});var Ho=z((zM,Wo)=>{function of(e,t){for(var n=-1,a=e==null?0:e.length;++n<a;)if(t(e[n],n,e))return!0;return!1}Wo.exports=of});var Jn=z((RM,qo)=>{function af(e,t){return e.has(t)}qo.exports=af});var Qn=z((BM,No)=>{var sf=Zn(),uf=Ho(),lf=Jn(),df=1,cf=2;function ff(e,t,n,a,l,m){var f=n&df,c=e.length,h=t.length;if(c!=h&&!(f&&h>c))return!1;var g=m.get(e),x=m.get(t);if(g&&x)return g==t&&x==e;var M=-1,I=!0,b=n&cf?new sf:void 0;for(m.set(e,t),m.set(t,e);++M<c;){var v=e[M],w=t[M];if(a)var y=f?a(w,v,M,t,e,m):a(v,w,M,e,t,m);if(y!==void 0){if(y)continue;I=!1;break}if(b){if(!uf(t,function(k,T){if(!lf(b,T)&&(v===k||l(v,k,n,a,m)))return b.push(T)})){I=!1;break}}else if(!(v===w||l(v,w,n,a,m))){I=!1;break}}return m.delete(e),m.delete(t),I}No.exports=ff});var Vo=z((PM,Ko)=>{var hf=Ce(),mf=hf.Uint8Array;Ko.exports=mf});var Uo=z((FM,jo)=>{function pf(e){var t=-1,n=Array(e.size);return e.forEach(function(a,l){n[++t]=[l,a]}),n}jo.exports=pf});var cn=z((WM,Go)=>{function vf(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=a}),n}Go.exports=vf});var Jo=z((HM,Zo)=>{var $o=Dt(),Yo=Vo(),gf=jn(),bf=Qn(),_f=Uo(),yf=cn(),xf=1,wf=2,If="[object Boolean]",Mf="[object Date]",Tf="[object Error]",kf="[object Map]",Ef="[object Number]",Lf="[object RegExp]",Cf="[object Set]",Sf="[object String]",Af="[object Symbol]",Df="[object ArrayBuffer]",Of="[object DataView]",Xo=$o?$o.prototype:void 0,ei=Xo?Xo.valueOf:void 0;function zf(e,t,n,a,l,m,f){switch(n){case Of:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Df:return!(e.byteLength!=t.byteLength||!m(new Yo(e),new Yo(t)));case If:case Mf:case Ef:return gf(+e,+t);case Tf:return e.name==t.name&&e.message==t.message;case Lf:case Sf:return e==t+"";case kf:var c=_f;case Cf:var h=a&xf;if(c||(c=yf),e.size!=t.size&&!h)return!1;var g=f.get(e);if(g)return g==t;a|=wf,f.set(e,t);var x=bf(c(e),c(t),a,l,m,f);return f.delete(e),x;case Af:if(ei)return ei.call(e)==ei.call(t)}return!1}Zo.exports=zf});var ea=z((qM,Qo)=>{function Rf(e,t){for(var n=-1,a=t.length,l=e.length;++n<a;)e[l+n]=t[n];return e}Qo.exports=Rf});var Re=z((NM,ta)=>{var Bf=Array.isArray;ta.exports=Bf});var ia=z((KM,na)=>{var Pf=ea(),Ff=Re();function Wf(e,t,n){var a=t(e);return Ff(e)?a:Pf(a,n(e))}na.exports=Wf});var oa=z((VM,ra)=>{function Hf(e,t){for(var n=-1,a=e==null?0:e.length,l=0,m=[];++n<a;){var f=e[n];t(f,n,e)&&(m[l++]=f)}return m}ra.exports=Hf});var sa=z((jM,aa)=>{function qf(){return[]}aa.exports=qf});var da=z((UM,la)=>{var Nf=oa(),Kf=sa(),Vf=Object.prototype,jf=Vf.propertyIsEnumerable,ua=Object.getOwnPropertySymbols,Uf=ua?function(e){return e==null?[]:(e=Object(e),Nf(ua(e),function(t){return jf.call(e,t)}))}:Kf;la.exports=Uf});var fa=z((GM,ca)=>{function Gf(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a}ca.exports=Gf});var vt=z(($M,ha)=>{function $f(e){return e!=null&&typeof e=="object"}ha.exports=$f});var pa=z((YM,ma)=>{var Yf=ct(),Xf=vt(),Zf="[object Arguments]";function Jf(e){return Xf(e)&&Yf(e)==Zf}ma.exports=Jf});var ti=z((XM,ba)=>{var va=pa(),Qf=vt(),ga=Object.prototype,eh=ga.hasOwnProperty,th=ga.propertyIsEnumerable,nh=va(function(){return arguments}())?va:function(e){return Qf(e)&&eh.call(e,"callee")&&!th.call(e,"callee")};ba.exports=nh});var ya=z((ZM,_a)=>{function ih(){return!1}_a.exports=ih});var ni=z((Bt,gt)=>{var rh=Ce(),oh=ya(),Ia=typeof Bt=="object"&&Bt&&!Bt.nodeType&&Bt,xa=Ia&&typeof gt=="object"&&gt&&!gt.nodeType&&gt,ah=xa&&xa.exports===Ia,wa=ah?rh.Buffer:void 0,sh=wa?wa.isBuffer:void 0,uh=sh||oh;gt.exports=uh});var ii=z((JM,Ma)=>{var lh=9007199254740991,dh=/^(?:0|[1-9]\d*)$/;function ch(e,t){var n=typeof e;return t=t??lh,!!t&&(n=="number"||n!="symbol"&&dh.test(e))&&e>-1&&e%1==0&&e<t}Ma.exports=ch});var fn=z((QM,Ta)=>{var fh=9007199254740991;function hh(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=fh}Ta.exports=hh});var Ea=z((e1,ka)=>{var mh=ct(),ph=fn(),vh=vt(),gh="[object Arguments]",bh="[object Array]",_h="[object Boolean]",yh="[object Date]",xh="[object Error]",wh="[object Function]",Ih="[object Map]",Mh="[object Number]",Th="[object Object]",kh="[object RegExp]",Eh="[object Set]",Lh="[object String]",Ch="[object WeakMap]",Sh="[object ArrayBuffer]",Ah="[object DataView]",Dh="[object Float32Array]",Oh="[object Float64Array]",zh="[object Int8Array]",Rh="[object Int16Array]",Bh="[object Int32Array]",Ph="[object Uint8Array]",Fh="[object Uint8ClampedArray]",Wh="[object Uint16Array]",Hh="[object Uint32Array]",$={};$[Dh]=$[Oh]=$[zh]=$[Rh]=$[Bh]=$[Ph]=$[Fh]=$[Wh]=$[Hh]=!0;$[gh]=$[bh]=$[Sh]=$[_h]=$[Ah]=$[yh]=$[xh]=$[wh]=$[Ih]=$[Mh]=$[Th]=$[kh]=$[Eh]=$[Lh]=$[Ch]=!1;function qh(e){return vh(e)&&ph(e.length)&&!!$[mh(e)]}ka.exports=qh});var Ca=z((t1,La)=>{function Nh(e){return function(t){return e(t)}}La.exports=Nh});var Aa=z((Pt,bt)=>{var Kh=Un(),Sa=typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,Ft=Sa&&typeof bt=="object"&&bt&&!bt.nodeType&&bt,Vh=Ft&&Ft.exports===Sa,ri=Vh&&Kh.process,jh=function(){try{var e=Ft&&Ft.require&&Ft.require("util").types;return e||ri&&ri.binding&&ri.binding("util")}catch{}}();bt.exports=jh});var oi=z((n1,za)=>{var Uh=Ea(),Gh=Ca(),Da=Aa(),Oa=Da&&Da.isTypedArray,$h=Oa?Gh(Oa):Uh;za.exports=$h});var Ba=z((i1,Ra)=>{var Yh=fa(),Xh=ti(),Zh=Re(),Jh=ni(),Qh=ii(),em=oi(),tm=Object.prototype,nm=tm.hasOwnProperty;function im(e,t){var n=Zh(e),a=!n&&Xh(e),l=!n&&!a&&Jh(e),m=!n&&!a&&!l&&em(e),f=n||a||l||m,c=f?Yh(e.length,String):[],h=c.length;for(var g in e)(t||nm.call(e,g))&&!(f&&(g=="length"||l&&(g=="offset"||g=="parent")||m&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||Qh(g,h)))&&c.push(g);return c}Ra.exports=im});var Fa=z((r1,Pa)=>{var rm=Object.prototype;function om(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||rm;return e===n}Pa.exports=om});var Ha=z((o1,Wa)=>{function am(e,t){return function(n){return e(t(n))}}Wa.exports=am});var Na=z((a1,qa)=>{var sm=Ha(),um=sm(Object.keys,Object);qa.exports=um});var Va=z((s1,Ka)=>{var lm=Fa(),dm=Na(),cm=Object.prototype,fm=cm.hasOwnProperty;function hm(e){if(!lm(e))return dm(e);var t=[];for(var n in Object(e))fm.call(e,n)&&n!="constructor"&&t.push(n);return t}Ka.exports=hm});var Ua=z((u1,ja)=>{var mm=Gn(),pm=fn();function vm(e){return e!=null&&pm(e.length)&&!mm(e)}ja.exports=vm});var ai=z((l1,Ga)=>{var gm=Ba(),bm=Va(),_m=Ua();function ym(e){return _m(e)?gm(e):bm(e)}Ga.exports=ym});var Ya=z((d1,$a)=>{var xm=ia(),wm=da(),Im=ai();function Mm(e){return xm(e,Im,wm)}$a.exports=Mm});var Ja=z((c1,Za)=>{var Xa=Ya(),Tm=1,km=Object.prototype,Em=km.hasOwnProperty;function Lm(e,t,n,a,l,m){var f=n&Tm,c=Xa(e),h=c.length,g=Xa(t),x=g.length;if(h!=x&&!f)return!1;for(var M=h;M--;){var I=c[M];if(!(f?I in t:Em.call(t,I)))return!1}var b=m.get(e),v=m.get(t);if(b&&v)return b==t&&v==e;var w=!0;m.set(e,t),m.set(t,e);for(var y=f;++M<h;){I=c[M];var k=e[I],T=t[I];if(a)var E=f?a(T,k,I,t,e,m):a(k,T,I,e,t,m);if(!(E===void 0?k===T||l(k,T,n,a,m):E)){w=!1;break}y||(y=I=="constructor")}if(w&&!y){var S=e.constructor,L=t.constructor;S!=L&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof L=="function"&&L instanceof L)&&(w=!1)}return m.delete(e),m.delete(t),w}Za.exports=Lm});var es=z((f1,Qa)=>{var Cm=Ze(),Sm=Ce(),Am=Cm(Sm,"DataView");Qa.exports=Am});var ns=z((h1,ts)=>{var Dm=Ze(),Om=Ce(),zm=Dm(Om,"Promise");ts.exports=zm});var si=z((m1,is)=>{var Rm=Ze(),Bm=Ce(),Pm=Rm(Bm,"Set");is.exports=Pm});var os=z((p1,rs)=>{var Fm=Ze(),Wm=Ce(),Hm=Fm(Wm,"WeakMap");rs.exports=Hm});var hs=z((v1,fs)=>{var ui=es(),li=un(),di=ns(),ci=si(),fi=os(),cs=ct(),_t=Yn(),as="[object Map]",qm="[object Object]",ss="[object Promise]",us="[object Set]",ls="[object WeakMap]",ds="[object DataView]",Nm=_t(ui),Km=_t(li),Vm=_t(di),jm=_t(ci),Um=_t(fi),Je=cs;(ui&&Je(new ui(new ArrayBuffer(1)))!=ds||li&&Je(new li)!=as||di&&Je(di.resolve())!=ss||ci&&Je(new ci)!=us||fi&&Je(new fi)!=ls)&&(Je=function(e){var t=cs(e),n=t==qm?e.constructor:void 0,a=n?_t(n):"";if(a)switch(a){case Nm:return ds;case Km:return as;case Vm:return ss;case jm:return us;case Um:return ls}return t});fs.exports=Je});var xs=z((g1,ys)=>{var hi=Xn(),Gm=Qn(),$m=Jo(),Ym=Ja(),ms=hs(),ps=Re(),vs=ni(),Xm=oi(),Zm=1,gs="[object Arguments]",bs="[object Array]",hn="[object Object]",Jm=Object.prototype,_s=Jm.hasOwnProperty;function Qm(e,t,n,a,l,m){var f=ps(e),c=ps(t),h=f?bs:ms(e),g=c?bs:ms(t);h=h==gs?hn:h,g=g==gs?hn:g;var x=h==hn,M=g==hn,I=h==g;if(I&&vs(e)){if(!vs(t))return!1;f=!0,x=!1}if(I&&!x)return m||(m=new hi),f||Xm(e)?Gm(e,t,n,a,l,m):$m(e,t,h,n,a,l,m);if(!(n&Zm)){var b=x&&_s.call(e,"__wrapped__"),v=M&&_s.call(t,"__wrapped__");if(b||v){var w=b?e.value():e,y=v?t.value():t;return m||(m=new hi),l(w,y,n,a,m)}}return I?(m||(m=new hi),Ym(e,t,n,a,l,m)):!1}ys.exports=Qm});var mi=z((b1,Ms)=>{var ep=xs(),ws=vt();function Is(e,t,n,a,l){return e===t?!0:e==null||t==null||!ws(e)&&!ws(t)?e!==e&&t!==t:ep(e,t,n,a,Is,l)}Ms.exports=Is});var ks=z((_1,Ts)=>{var tp=Xn(),np=mi(),ip=1,rp=2;function op(e,t,n,a){var l=n.length,m=l,f=!a;if(e==null)return!m;for(e=Object(e);l--;){var c=n[l];if(f&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++l<m;){c=n[l];var h=c[0],g=e[h],x=c[1];if(f&&c[2]){if(g===void 0&&!(h in e))return!1}else{var M=new tp;if(a)var I=a(g,x,h,e,t,M);if(!(I===void 0?np(x,g,ip|rp,a,M):I))return!1}}return!0}Ts.exports=op});var pi=z((y1,Es)=>{var ap=ft();function sp(e){return e===e&&!ap(e)}Es.exports=sp});var Cs=z((x1,Ls)=>{var up=pi(),lp=ai();function dp(e){for(var t=lp(e),n=t.length;n--;){var a=t[n],l=e[a];t[n]=[a,l,up(l)]}return t}Ls.exports=dp});var vi=z((w1,Ss)=>{function cp(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}Ss.exports=cp});var Ds=z((I1,As)=>{var fp=ks(),hp=Cs(),mp=vi();function pp(e){var t=hp(e);return t.length==1&&t[0][2]?mp(t[0][0],t[0][1]):function(n){return n===e||fp(n,e,t)}}As.exports=pp});var Wt=z((M1,Os)=>{var vp=ct(),gp=vt(),bp="[object Symbol]";function _p(e){return typeof e=="symbol"||gp(e)&&vp(e)==bp}Os.exports=_p});var mn=z((T1,zs)=>{var yp=Re(),xp=Wt(),wp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ip=/^\w*$/;function Mp(e,t){if(yp(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||xp(e)?!0:Ip.test(e)||!wp.test(e)||t!=null&&e in Object(t)}zs.exports=Mp});var Ps=z((k1,Bs)=>{var Rs=ln(),Tp="Expected a function";function gi(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Tp);var n=function(){var a=arguments,l=t?t.apply(this,a):a[0],m=n.cache;if(m.has(l))return m.get(l);var f=e.apply(this,a);return n.cache=m.set(l,f)||m,f};return n.cache=new(gi.Cache||Rs),n}gi.Cache=Rs;Bs.exports=gi});var Ws=z((E1,Fs)=>{var kp=Ps(),Ep=500;function Lp(e){var t=kp(e,function(a){return n.size===Ep&&n.clear(),a}),n=t.cache;return t}Fs.exports=Lp});var qs=z((L1,Hs)=>{var Cp=Ws(),Sp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ap=/\\(\\)?/g,Dp=Cp(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Sp,function(n,a,l,m){t.push(l?m.replace(Ap,"$1"):a||n)}),t});Hs.exports=Dp});var Ks=z((C1,Ns)=>{function Op(e,t){for(var n=-1,a=e==null?0:e.length,l=Array(a);++n<a;)l[n]=t(e[n],n,e);return l}Ns.exports=Op});var Ys=z((S1,$s)=>{var Vs=Dt(),zp=Ks(),Rp=Re(),Bp=Wt(),Pp=1/0,js=Vs?Vs.prototype:void 0,Us=js?js.toString:void 0;function Gs(e){if(typeof e=="string")return e;if(Rp(e))return zp(e,Gs)+"";if(Bp(e))return Us?Us.call(e):"";var t=e+"";return t=="0"&&1/e==-Pp?"-0":t}$s.exports=Gs});var Zs=z((A1,Xs)=>{var Fp=Ys();function Wp(e){return e==null?"":Fp(e)}Xs.exports=Wp});var bi=z((D1,Js)=>{var Hp=Re(),qp=mn(),Np=qs(),Kp=Zs();function Vp(e,t){return Hp(e)?e:qp(e,t)?[e]:Np(Kp(e))}Js.exports=Vp});var Ht=z((O1,Qs)=>{var jp=Wt(),Up=1/0;function Gp(e){if(typeof e=="string"||jp(e))return e;var t=e+"";return t=="0"&&1/e==-Up?"-0":t}Qs.exports=Gp});var _i=z((z1,eu)=>{var $p=bi(),Yp=Ht();function Xp(e,t){t=$p(t,e);for(var n=0,a=t.length;e!=null&&n<a;)e=e[Yp(t[n++])];return n&&n==a?e:void 0}eu.exports=Xp});var nu=z((R1,tu)=>{var Zp=_i();function Jp(e,t,n){var a=e==null?void 0:Zp(e,t);return a===void 0?n:a}tu.exports=Jp});var ru=z((B1,iu)=>{function Qp(e,t){return e!=null&&t in Object(e)}iu.exports=Qp});var au=z((P1,ou)=>{var ev=bi(),tv=ti(),nv=Re(),iv=ii(),rv=fn(),ov=Ht();function av(e,t,n){t=ev(t,e);for(var a=-1,l=t.length,m=!1;++a<l;){var f=ov(t[a]);if(!(m=e!=null&&n(e,f)))break;e=e[f]}return m||++a!=l?m:(l=e==null?0:e.length,!!l&&rv(l)&&iv(f,l)&&(nv(e)||tv(e)))}ou.exports=av});var uu=z((F1,su)=>{var sv=ru(),uv=au();function lv(e,t){return e!=null&&uv(e,t,sv)}su.exports=lv});var du=z((W1,lu)=>{var dv=mi(),cv=nu(),fv=uu(),hv=mn(),mv=pi(),pv=vi(),vv=Ht(),gv=1,bv=2;function _v(e,t){return hv(e)&&mv(t)?pv(vv(e),t):function(n){var a=cv(n,e);return a===void 0&&a===t?fv(n,e):dv(t,a,gv|bv)}}lu.exports=_v});var fu=z((H1,cu)=>{function yv(e){return e}cu.exports=yv});var mu=z((q1,hu)=>{function xv(e){return function(t){return t?.[e]}}hu.exports=xv});var vu=z((N1,pu)=>{var wv=_i();function Iv(e){return function(t){return wv(t,e)}}pu.exports=Iv});var bu=z((K1,gu)=>{var Mv=mu(),Tv=vu(),kv=mn(),Ev=Ht();function Lv(e){return kv(e)?Mv(Ev(e)):Tv(e)}gu.exports=Lv});var yu=z((V1,_u)=>{var Cv=Ds(),Sv=du(),Av=fu(),Dv=Re(),Ov=bu();function zv(e){return typeof e=="function"?e:e==null?Av:typeof e=="object"?Dv(e)?Sv(e[0],e[1]):Cv(e):Ov(e)}_u.exports=zv});var wu=z((j1,xu)=>{function Rv(e,t,n,a){for(var l=e.length,m=n+(a?1:-1);a?m--:++m<l;)if(t(e[m],m,e))return m;return-1}xu.exports=Rv});var Mu=z((U1,Iu)=>{function Bv(e){return e!==e}Iu.exports=Bv});var ku=z((G1,Tu)=>{function Pv(e,t,n){for(var a=n-1,l=e.length;++a<l;)if(e[a]===t)return a;return-1}Tu.exports=Pv});var Lu=z(($1,Eu)=>{var Fv=wu(),Wv=Mu(),Hv=ku();function qv(e,t,n){return t===t?Hv(e,t,n):Fv(e,Wv,n)}Eu.exports=qv});var Su=z((Y1,Cu)=>{var Nv=Lu();function Kv(e,t){var n=e==null?0:e.length;return!!n&&Nv(e,t,0)>-1}Cu.exports=Kv});var Du=z((X1,Au)=>{function Vv(e,t,n){for(var a=-1,l=e==null?0:e.length;++a<l;)if(n(t,e[a]))return!0;return!1}Au.exports=Vv});var zu=z((Z1,Ou)=>{function jv(){}Ou.exports=jv});var Bu=z((J1,Ru)=>{var yi=si(),Uv=zu(),Gv=cn(),$v=1/0,Yv=yi&&1/Gv(new yi([,-0]))[1]==$v?function(e){return new yi(e)}:Uv;Ru.exports=Yv});var Fu=z((Q1,Pu)=>{var Xv=Zn(),Zv=Su(),Jv=Du(),Qv=Jn(),eg=Bu(),tg=cn(),ng=200;function ig(e,t,n){var a=-1,l=Zv,m=e.length,f=!0,c=[],h=c;if(n)f=!1,l=Jv;else if(m>=ng){var g=t?null:eg(e);if(g)return tg(g);f=!1,l=Qv,h=new Xv}else h=t?[]:c;e:for(;++a<m;){var x=e[a],M=t?t(x):x;if(x=n||x!==0?x:0,f&&M===M){for(var I=h.length;I--;)if(h[I]===M)continue e;t&&h.push(M),c.push(x)}else l(h,M,n)||(h!==c&&h.push(M),c.push(x))}return c}Pu.exports=ig});var Hu=z((eT,Wu)=>{var rg=yu(),og=Fu();function ag(e,t){return e&&e.length?og(e,rg(t,2)):[]}Wu.exports=ag});var Nu=z((tT,qu)=>{var sg=Ce(),ug=function(){return sg.Date.now()};qu.exports=ug});var Uu=z((nT,ju)=>{var Ku=ft(),lg=Wt(),Vu=0/0,dg=/^\s+|\s+$/g,cg=/^[-+]0x[0-9a-f]+$/i,fg=/^0b[01]+$/i,hg=/^0o[0-7]+$/i,mg=parseInt;function pg(e){if(typeof e=="number")return e;if(lg(e))return Vu;if(Ku(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ku(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(dg,"");var n=fg.test(e);return n||hg.test(e)?mg(e.slice(2),n?2:8):cg.test(e)?Vu:+e}ju.exports=pg});var Yu=z((iT,$u)=>{var vg=ft(),xi=Nu(),Gu=Uu(),gg="Expected a function",bg=Math.max,_g=Math.min;function yg(e,t,n){var a,l,m,f,c,h,g=0,x=!1,M=!1,I=!0;if(typeof e!="function")throw new TypeError(gg);t=Gu(t)||0,vg(n)&&(x=!!n.leading,M="maxWait"in n,m=M?bg(Gu(n.maxWait)||0,t):m,I="trailing"in n?!!n.trailing:I);function b(A){var u=a,d=l;return a=l=void 0,g=A,f=e.apply(d,u),f}function v(A){return g=A,c=setTimeout(k,t),x?b(A):f}function w(A){var u=A-h,d=A-g,r=t-u;return M?_g(r,m-d):r}function y(A){var u=A-h,d=A-g;return h===void 0||u>=t||u<0||M&&d>=m}function k(){var A=xi();if(y(A))return T(A);c=setTimeout(k,w(A))}function T(A){return c=void 0,I&&a?b(A):(a=l=void 0,f)}function E(){c!==void 0&&clearTimeout(c),g=0,a=h=l=c=void 0}function S(){return c===void 0?f:T(xi())}function L(){var A=xi(),u=y(A);if(a=arguments,l=this,h=A,u){if(c===void 0)return v(h);if(M)return clearTimeout(c),c=setTimeout(k,t),b(h)}return c===void 0&&(c=setTimeout(k,t)),f}return L.cancel=E,L.flush=S,L}$u.exports=yg});var Ai=`.p-Widget,.lm-Widget{box-sizing:border-box;position:relative;overflow:hidden;cursor:default;}.p-Widget.p-mod-hidden,.lm-Widget.lm-mod-hidden{display:none!important;}.lm-AccordionPanel[data-orientation='horizontal']>.lm-AccordionPanel-title{display:block;transform-origin:top left;transform:rotate(-90deg)translate(-100%);}.p-CommandPalette,.lm-CommandPalette{display:flex;flex-direction:column;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-CommandPalette-search,.lm-CommandPalette-search{flex:0 0 auto;}.p-CommandPalette-content,.lm-CommandPalette-content{flex:1 1 auto;margin:0;padding:0;min-height:0;overflow:auto;list-style-type:none;}.p-CommandPalette-header,.lm-CommandPalette-header{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}.p-CommandPalette-item,.lm-CommandPalette-item{display:flex;flex-direction:row;}.p-CommandPalette-itemIcon,.lm-CommandPalette-itemIcon{flex:0 0 auto;}.p-CommandPalette-itemContent,.lm-CommandPalette-itemContent{flex:1 1 auto;overflow:hidden;}.p-CommandPalette-itemShortcut,.lm-CommandPalette-itemShortcut{flex:0 0 auto;}.p-CommandPalette-itemLabel,.lm-CommandPalette-itemLabel{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}.lm-close-icon{border:1px solid transparent;background-color:transparent;position:absolute;z-index:1;right:3%;top:0;bottom:0;margin:auto;padding:7px 0;display:none;vertical-align:middle;outline:0;cursor:pointer;}.lm-close-icon:after{content:'X';display:block;width:15px;height:15px;text-align:center;color:#000;font-weight:normal;font-size:12px;cursor:pointer;}.p-DockPanel,.lm-DockPanel{z-index:0;}.p-DockPanel-widget,.lm-DockPanel-widget{z-index:0;}.p-DockPanel-tabBar,.lm-DockPanel-tabBar{z-index:1;}.p-DockPanel-handle,.lm-DockPanel-handle{z-index:2;}.p-DockPanel-handle.p-mod-hidden,.lm-DockPanel-handle.lm-mod-hidden{display:none!important;}.p-DockPanel-handle:after,.lm-DockPanel-handle:after{position:absolute;top:0;left:0;width:100%;height:100%;content:'';}.p-DockPanel-handle[data-orientation='horizontal'],.lm-DockPanel-handle[data-orientation='horizontal']{cursor:ew-resize;}.p-DockPanel-handle[data-orientation='vertical'],.lm-DockPanel-handle[data-orientation='vertical']{cursor:ns-resize;}.p-DockPanel-handle[data-orientation='horizontal']:after,.lm-DockPanel-handle[data-orientation='horizontal']:after{left:50%;min-width:8px;transform:translateX(-50%);}.p-DockPanel-handle[data-orientation='vertical']:after,.lm-DockPanel-handle[data-orientation='vertical']:after{top:50%;min-height:8px;transform:translateY(-50%);}.p-DockPanel-overlay,.lm-DockPanel-overlay{z-index:3;box-sizing:border-box;pointer-events:none;}.p-DockPanel-overlay.p-mod-hidden,.lm-DockPanel-overlay.lm-mod-hidden{display:none!important;}.p-Menu,.lm-Menu{z-index:10000;position:absolute;white-space:nowrap;overflow-x:hidden;overflow-y:auto;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-Menu-content,.lm-Menu-content{margin:0;padding:0;display:table;list-style-type:none;}.p-Menu-item,.lm-Menu-item{display:table-row;}.p-Menu-item.p-mod-hidden,.p-Menu-item.p-mod-collapsed,.lm-Menu-item.lm-mod-hidden,.lm-Menu-item.lm-mod-collapsed{display:none!important;}.p-Menu-itemIcon,.p-Menu-itemSubmenuIcon,.lm-Menu-itemIcon,.lm-Menu-itemSubmenuIcon{display:table-cell;text-align:center;}.p-Menu-itemLabel,.lm-Menu-itemLabel{display:table-cell;text-align:left;}.p-Menu-itemShortcut,.lm-Menu-itemShortcut{display:table-cell;text-align:right;}.p-MenuBar,.lm-MenuBar{outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-MenuBar-content,.lm-MenuBar-content{margin:0;padding:0;display:flex;flex-direction:row;list-style-type:none;}.p--MenuBar-item,.lm-MenuBar-item{box-sizing:border-box;}.p-MenuBar-itemIcon,.p-MenuBar-itemLabel,.lm-MenuBar-itemIcon,.lm-MenuBar-itemLabel{display:inline-block;}.p-ScrollBar,.lm-ScrollBar{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-ScrollBar[data-orientation='horizontal'],.lm-ScrollBar[data-orientation='horizontal']{flex-direction:row;}.p-ScrollBar[data-orientation='vertical'],.lm-ScrollBar[data-orientation='vertical']{flex-direction:column;}.p-ScrollBar-button,.lm-ScrollBar-button{box-sizing:border-box;flex:0 0 auto;}.p-ScrollBar-track,.lm-ScrollBar-track{box-sizing:border-box;position:relative;overflow:hidden;flex:1 1 auto;}.p-ScrollBar-thumb,.lm-ScrollBar-thumb{box-sizing:border-box;position:absolute;}.p-SplitPanel-child,.lm-SplitPanel-child{z-index:0;}.p-SplitPanel-handle,.lm-SplitPanel-handle{z-index:1;}.p-SplitPanel-handle.p-mod-hidden,.lm-SplitPanel-handle.lm-mod-hidden{display:none!important;}.p-SplitPanel-handle:after,.lm-SplitPanel-handle:after{position:absolute;top:0;left:0;width:100%;height:100%;content:'';}.p-SplitPanel[data-orientation='horizontal']>.p-SplitPanel-handle,.lm-SplitPanel[data-orientation='horizontal']>.lm-SplitPanel-handle{cursor:ew-resize;}.p-SplitPanel[data-orientation='vertical']>.p-SplitPanel-handle,.lm-SplitPanel[data-orientation='vertical']>.lm-SplitPanel-handle{cursor:ns-resize;}.p-SplitPanel[data-orientation='horizontal']>.p-SplitPanel-handle:after,.lm-SplitPanel[data-orientation='horizontal']>.lm-SplitPanel-handle:after{left:50%;min-width:8px;transform:translateX(-50%);}.p-SplitPanel[data-orientation='vertical']>.p-SplitPanel-handle:after,.lm-SplitPanel[data-orientation='vertical']>.lm-SplitPanel-handle:after{top:50%;min-height:8px;transform:translateY(-50%);}.p-TabBar,.lm-TabBar{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-TabBar[data-orientation='horizontal'],.lm-TabBar[data-orientation='horizontal']{flex-direction:row;align-items:flex-end;}.p-TabBar[data-orientation='vertical'],.lm-TabBar[data-orientation='vertical']{flex-direction:column;align-items:flex-end;}.p-TabBar-content,.lm-TabBar-content{margin:0;padding:0;display:flex;flex:1 1 auto;list-style-type:none;}.p-TabBar[data-orientation='horizontal']>.p-TabBar-content,.lm-TabBar[data-orientation='horizontal']>.lm-TabBar-content{flex-direction:row;}.p-TabBar[data-orientation='vertical']>.p-TabBar-content,.lm-TabBar[data-orientation='vertical']>.lm-TabBar-content{flex-direction:column;}.p-TabBar-tab,.lm-TabBar-tab{display:flex;flex-direction:row;box-sizing:border-box;overflow:hidden;touch-action:none;}.p-TabBar-tabIcon,.p-TabBar-tabCloseIcon,.lm-TabBar-tabIcon,.lm-TabBar-tabCloseIcon{flex:0 0 auto;}.p-TabBar-tabLabel,.lm-TabBar-tabLabel{flex:1 1 auto;overflow:hidden;white-space:nowrap;}.lm-TabBar-tabInput{user-select:all;width:100%;box-sizing:border-box;}.p-TabBar-tab.p-mod-hidden,.lm-TabBar-tab.lm-mod-hidden{display:none!important;}.lm-TabBar-addButton.lm-mod-hidden{display:none!important;}.p-TabBar.p-mod-dragging .p-TabBar-tab,.lm-TabBar.lm-mod-dragging .lm-TabBar-tab{position:relative;}.p-TabBar.p-mod-dragging[data-orientation='horizontal'] .p-TabBar-tab,.lm-TabBar.lm-mod-dragging[data-orientation='horizontal'] .lm-TabBar-tab{left:0;transition:left 150ms ease;}.p-TabBar.p-mod-dragging[data-orientation='vertical'] .p-TabBar-tab,.lm-TabBar.lm-mod-dragging[data-orientation='vertical'] .lm-TabBar-tab{top:0;transition:top 150ms ease;}.p-TabBar.p-mod-dragging .p-TabBar-tab.p-mod-dragging,.lm-TabBar.lm-mod-dragging .lm-TabBar-tab.lm-mod-dragging{transition:none;}.lm-TabBar-tabLabel .lm-TabBar-tabInput{user-select:all;width:100%;box-sizing:border-box;background:inherit;}.p-TabPanel-tabBar,.lm-TabPanel-tabBar{z-index:1;}.p-TabPanel-stackedPanel,.lm-TabPanel-stackedPanel{z-index:0;}:host .p-TabBar-tabLabel{background-color:transparent;border:none;color:var(--icon--color,#666);cursor:pointer;padding:0px 6px;margin:0;margin-left:10.5px;margin-right:auto;flex:0 1 auto;border-radius:3px;}:host .p-TabBar-tabLabel:hover{background-color:var(--icon--color);color:var(--plugin--background);}:host .p-TabBar-tabLabel:focus{outline:none;color:var(--workspace-secondary--color,#666)!important;cursor:text;}:host .p-TabBar-tab.p-mod-closable>.p-TabBar-tabCloseIcon:before{content:var(--close-button--content,"\\2715");}:host .p-TabBar-tab>.p-TabBar-tabConfigIcon:before{content:var(--open-settings-button--content,"\\1F527");font-family:var(--settings--font-family,"Arial");transition:color 0.5s ease;}:host .p-TabBar-tab.p-mod-current.settings_open>.p-TabBar-tabConfigIcon:before{content:var(--close-settings-button--content,"\\1F527");}:host .p-TabBar-tab.p-mod-current.linked>.p-TabBar-tabConfigIcon:before{color:#22a0ce;}:host .p-TabBar-tab>.p-TabBar-tabConfigIcon{opacity:0;pointer-events:none;}:host .p-TabBar-tab.p-mod-current>.p-TabBar-tabConfigIcon{opacity:1;pointer-events:all;}:host .p-mod-current .p-TabBar-tabConfigIcon,:host .p-mod-current .p-TabBar-tabCloseIcon{color:inherit;transition:color 0.2s ease-out;}:host .p-mod-current .p-TabBar-tabConfigIcon:hover,:host .p-mod-current .p-TabBar-tabCloseIcon:hover{color:#1a7da1;transition:color 0.2s ease-out;}:host .p-BoxPanel{overflow:scroll!important;}:host .p-TabBar,:host .p-TabBar-tab{position:relative;overflow:visible!important;}:host .p-TabBar-tabLabel:empty::after{content:"untitled";color:#aaa;}:host .p-mod-current .p-TabBar-tabLabel:empty::after{color:#ddd;}:host .p-TabBar-tabLabel:empty::after{content:"untitled";}:host .divider{left:32px;bottom:0;position:absolute;right:32px;height:1px;background-color:var(--workspace-tabbar--border-color);margin-bottom:0px;}:host .p-TabBar-tab .drag-handle{height:12px;width:5px;-webkit-mask-image:var(--column-drag-handle--mask-image);mask-image:var(--column-drag-handle--mask-image);margin:0px 0 0 16.5px;background-repeat:no-repeat;background-color:var(--inactive--color,red);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;}:host .p-TabBar-tab.p-mod-hidden{display:flex!important;opacity:0.5;}:host .p-TabBar-tab.p-mod-current .divider{display:block;}:host .p-TabBar{min-height:40px!important;}:host .pfm-button-base{background:white!important;}:host .pfm-button-base:active{background:#016bc6!important;}:host .p-TabBar-content{padding:0px;border-bottom:0px solid#fff!important;border-left:#eaeaea;border-right:#eaeaea;}:host .p-TabBar-tab.p-mod-current .shadow{margin:-1px;position:absolute;width:calc(100% + 2px);height:200%;pointer-events:none;left:0px;}:host .p-TabBar-tab.p-mod-current.settings_open .shadow{box-shadow:none;}:host .p-TabBar-tab{border-color:#eaeaea;align-items:center;}:host .p-TabBar-content.inactive-blur>.p-TabBar-tab{background-color:var(--workspace-inactive-blur--background-color,transparent);}:host .condensed .p-TabBar-content>.p-TabBar-tab.p-mod-current .p-TabBar-tabConfigIcon{display:block;}:host .condensed .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .p-TabBar-tabLabel{margin-left:0px;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open{border-width:1px 1px 0px 1px!important;border-color:var(--workspace-tabbar--border-color,#ddd);}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .p-TabBar-tabToolbar{display:flex;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open .divider{height:1px;margin-bottom:0px;background-color:var(--workspace-tabbar--border-color,#ddd);}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.settings_open:last-child:first-child .divider{transition:none;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.perspective_updating .p-TabBar-tabConfigIcon{display:none;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current.perspective_updating .p-TabBar-tabLoadingIcon{display:block;}:host .p-TabBar-content>.p-TabBar-tab{max-width:100000px!important;flex:0 1 100000px!important;background:none;color:#737373;height:40px!important;max-height:40px!important;transform:none!important;transition:color 0.2s ease-out;color:#ccc;color:#ccc;}:host .p-TabBar-content>.p-TabBar-tab:hover{color:#ccc;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current{color:var(--workspace-secondary--color,#666);}:host .p-TabBar-tab.p-mod-current .p-TabBar-tabLabel{white-space:nowrap!important;}:host .p-TabBar-tabLabel{font-family:inherit;font-size:12px;line-height:22px;text-align:start;white-space:normal!important;word-break:break-all;}:host .p-TabBar-tabCloseIcon,:host .p-TabBar-tabConfigIcon{cursor:pointer!important;line-height:22px!important;padding-right:16.5px!important;}:host .p-TabBar-tabConfigIcon{padding-left:8px;padding-right:8px!important;}:host .p-TabBar-tabLoadingIcon{padding-left:11px;padding-right:12px;}:host .bottom .p-TabBar-tab{flex-basis:10000px!important;max-width:10000px!important;}:host .p-TabBar-content>.p-TabBar-tab.p-mod-current{color:var(--workspace-tabbar--color,#666)!important;border:var(--workspace-tabbar--border,1px solid#ddd);border-width:var(--workspace-tabbar-tab--border-width);box-shadow:0 13px 0 -12px var(--inactive--border-color);border-radius:6px 6px 0 0;background-color:var(--workspace-tabbar--background-color,white);height:40px!important;max-height:40px!important;}:host .bottom .p-TabBar-tab.p-mod-current{border:none;}:host ::-webkit-scrollbar-thumb{background-color:#ccc;}:host .perspective-workspace.context-menu * .p-TabBar.context-focus{opacity:1;}:host .perspective-workspace.context-menu * .p-TabBar,:host .perspective-workspace.context-menu .p-Widget.workspace-widget:not(.context-focus) .viewer-container{opacity:0.2;}:host .bookmarks-button{margin-left:11px;margin-right:-13px;border-radius:3px;height:22px;}:host .bookmarks-button:hover{background-color:var(--icon--color);}:host .bookmarks{cursor:pointer;background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:26px;height:12px;-webkit-mask-image:var(--bookmarks--mask-image);mask-image:var(--bookmarks--mask-image);-webkit-mask-position:center;mask-position:center;-webkit-mask-size:auto;mask-size:auto;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;padding:5px;}:host .bookmarks:hover{background-color:var(--plugin--background);}:host .p-DockPanel{overflow:var(--dock-panel--overflow,hidden);position:absolute;background-color:var(--detail--background-color,transparent);padding:3px;top:0;left:0;right:0;bottom:0;}:host .p-DockPanel[data-mode="single-document"]{padding:0px;}:host .lm-Widget,:host .p-Widget{cursor:inherit;}:host .p-DockPanel.ew,:host .p-DockPanel.ew .p-Widget,:host .p-SplitPanel.ew,:host .p-SplitPanel.ew .p-Widget{cursor:ew-resize!important;}:host .p-DockPanel.ns,:host .p-DockPanel.ns .p-Widget,:host .p-SplitPanel.ns,:host .p-SplitPanel.ns .p-Widget{cursor:ns-resize!important;}:host .workspace-master-widget{min-width:100px!important;}:host .p-DockPanel.resizing ::slotted(perspective-viewer),:host .p-SplitPanel.resizing ::slotted(perspective-viewer){pointer-events:none;}:host .widget-blur ::slotted(perspective-viewer){opacity:0.5;}:host .p-DockPanel-handle.resizing{background-color:rgba(0,0,0,0.05);}:host .perspective-scroll-panel{overflow:auto!important;}:host .p-Panel{min-height:100%;}:host .p-DockPanel-handle{background-color:none;}:host .p-SplitPanel-handle,:host .p-DockPanel-handle{transition:background-color 0.3s ease-out;}:host .p-SplitPanel-handle:hover,:host .p-DockPanel-handle:hover{background-color:rgba(0,0,0,0.05);}:host .p-DockPanel-overlay{background:rgba(75,75,75,0.2);border:1px dashed#666;border-radius:6px;transition-property:top,left,right,bottom;transition-duration:50ms;transition-timing-function:linear;margin:0px;}:host .lm-DockPanel:not([data-mode="single-document"]) .viewer-container{border:var(--workspace-tabbar--border,1px solid var(--inactive--color));border-width:var(--workspace-tabbar--border-width);border-radius:var(--workspace-tabbar--border-radius,0 0 6px 6px);}:host .viewer-container{flex:1;height:100%;overflow:hidden;}:host .perspective-scroll-panel.has-master-panel{margin-left:-8px!important;}:host .perspective-scroll-panel .workspace-widget{min-width:300px;min-height:200px;}:host .workspace-widget{display:flex;flex-direction:column;border:1px solid#eaedef;border-width:0px!important;}:host{background-color:hsl(210deg 18% 90%);width:100%;height:100%;}:host .workspace{width:100%;height:100%;}:host .p-SplitPanel{height:100%;width:100%;}:host div.p-SplitPanel-handle{background-color:inherit;}:host .master-panel{background-color:var(--workspace-master--background-color,inherit);padding:0px 0px 0px 0px;}:host .master-panel .viewer-container{border-width:0px;}:host .perspective-workspace.context-menu * .p-SplitPanel-handle{opacity:0.2;}:host .perspective-workspace.context-menu>.p-SplitPanel-handle{opacity:0.2;}`;var Di=`<!--

Copyright (c) 2017, the Perspective Authors.

This file is part of the Perspective library, distributed under the terms of
the Apache License 2.0.  The full license can be found in the LICENSE file.

-->
<template id="perspective-workspace">
    <div id="container" class="workspace"></div>
</template>
`;var bn;(A=>{function e(u,d,r=0,i=-1){let o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);let p;i<r?p=i+1+(o-r):p=i-r+1;for(let s=0;s<p;++s){let _=(r+s)%o;if(u[_]===d)return _}return-1}A.firstIndexOf=e;function t(u,d,r=-1,i=0){let o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);let p;r<i?p=r+1+(o-i):p=r-i+1;for(let s=0;s<p;++s){let _=(r-s+o)%o;if(u[_]===d)return _}return-1}A.lastIndexOf=t;function n(u,d,r=0,i=-1){let o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);let p;i<r?p=i+1+(o-r):p=i-r+1;for(let s=0;s<p;++s){let _=(r+s)%o;if(d(u[_],_))return _}return-1}A.findFirstIndex=n;function a(u,d,r=-1,i=0){let o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);let p;r<i?p=r+1+(o-i):p=r-i+1;for(let s=0;s<p;++s){let _=(r-s+o)%o;if(d(u[_],_))return _}return-1}A.findLastIndex=a;function l(u,d,r=0,i=-1){let o=n(u,d,r,i);return o!==-1?u[o]:void 0}A.findFirstValue=l;function m(u,d,r=-1,i=0){let o=a(u,d,r,i);return o!==-1?u[o]:void 0}A.findLastValue=m;function f(u,d,r,i=0,o=-1){let p=u.length;if(p===0)return 0;i<0?i=Math.max(0,i+p):i=Math.min(i,p-1),o<0?o=Math.max(0,o+p):o=Math.min(o,p-1);let s=i,_=o-i+1;for(;_>0;){let C=_>>1,O=s+C;r(u[O],d)<0?(s=O+1,_-=C+1):_=C}return s}A.lowerBound=f;function c(u,d,r,i=0,o=-1){let p=u.length;if(p===0)return 0;i<0?i=Math.max(0,i+p):i=Math.min(i,p-1),o<0?o=Math.max(0,o+p):o=Math.min(o,p-1);let s=i,_=o-i+1;for(;_>0;){let C=_>>1,O=s+C;r(u[O],d)>0?_=C:(s=O+1,_-=C+1)}return s}A.upperBound=c;function h(u,d,r){if(u===d)return!0;if(u.length!==d.length)return!1;for(let i=0,o=u.length;i<o;++i)if(r?!r(u[i],d[i]):u[i]!==d[i])return!1;return!0}A.shallowEqual=h;function g(u,d={}){let{start:r,stop:i,step:o}=d;if(o===void 0&&(o=1),o===0)throw new Error("Slice `step` cannot be zero.");let p=u.length;r===void 0?r=o<0?p-1:0:r<0?r=Math.max(r+p,o<0?-1:0):r>=p&&(r=o<0?p-1:p),i===void 0?i=o<0?-1:p:i<0?i=Math.max(i+p,o<0?-1:0):i>=p&&(i=o<0?p-1:p);let s;o<0&&i>=r||o>0&&r>=i?s=0:o<0?s=Math.floor((i-r+1)/o+1):s=Math.floor((i-r-1)/o+1);let _=[];for(let C=0;C<s;++C)_[C]=u[r+C*o];return _}A.slice=g;function x(u,d,r){let i=u.length;if(i<=1||(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1),d===r))return;let o=u[d],p=d<r?1:-1;for(let s=d;s!==r;s+=p)u[s]=u[s+p];u[r]=o}A.move=x;function M(u,d=0,r=-1){let i=u.length;if(!(i<=1))for(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1);d<r;){let o=u[d],p=u[r];u[d++]=p,u[r--]=o}}A.reverse=M;function I(u,d,r=0,i=-1){let o=u.length;if(o<=1||(r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1),r>=i))return;let p=i-r+1;if(d>0?d=d%p:d<0&&(d=(d%p+p)%p),d===0)return;let s=r+d;M(u,r,s-1),M(u,s,i),M(u,r,i)}A.rotate=I;function b(u,d,r=0,i=-1){let o=u.length;if(o===0)return;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);let p;i<r?p=i+1+(o-r):p=i-r+1;for(let s=0;s<p;++s)u[(r+s)%o]=d}A.fill=b;function v(u,d,r){let i=u.length;d<0?d=Math.max(0,d+i):d=Math.min(d,i);for(let o=i;o>d;--o)u[o]=u[o-1];u[d]=r}A.insert=v;function w(u,d){let r=u.length;if(d<0&&(d+=r),d<0||d>=r)return;let i=u[d];for(let o=d+1;o<r;++o)u[o-1]=u[o];return u.length=r-1,i}A.removeAt=w;function y(u,d,r=0,i=-1){let o=e(u,d,r,i);return o!==-1&&w(u,o),o}A.removeFirstOf=y;function k(u,d,r=-1,i=0){let o=t(u,d,r,i);return o!==-1&&w(u,o),o}A.removeLastOf=k;function T(u,d,r=0,i=-1){let o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);let p=0;for(let s=0;s<o;++s)r<=i&&s>=r&&s<=i&&u[s]===d||i<r&&(s<=i||s>=r)&&u[s]===d?p++:p>0&&(u[s-p]=u[s]);return p>0&&(u.length=o-p),p}A.removeAllOf=T;function E(u,d,r=0,i=-1){let o,p=n(u,d,r,i);return p!==-1&&(o=w(u,p)),{index:p,value:o}}A.removeFirstWhere=E;function S(u,d,r=-1,i=0){let o,p=a(u,d,r,i);return p!==-1&&(o=w(u,p)),{index:p,value:o}}A.removeLastWhere=S;function L(u,d,r=0,i=-1){let o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);let p=0;for(let s=0;s<o;++s)r<=i&&s>=r&&s<=i&&d(u[s],s)||i<r&&(s<=i||s>=r)&&d(u[s],s)?p++:p>0&&(u[s-p]=u[s]);return p>0&&(u.length=o-p),p}A.removeAllWhere=L})(bn||={});function xe(e){let t;return typeof e.iter=="function"?t=e.iter():t=new xt(e),t}function wt(e){let t=0,n=[],a=xe(e),l;for(;(l=a.next())!==void 0;)n[t++]=l;return n}var xt=class{constructor(t){this._index=0;this._source=t}iter(){return this}clone(){let t=new xt(this._source);return t._index=this._index,t}next(){if(!(this._index>=this._source.length))return this._source[this._index++]}};function Oi(e,t){let n=0,a=xe(e),l;for(;(l=a.next())!==void 0;)if(t(l,n++))return l}var pl;(t=>{function e(n,a,l){return l===0?1/0:n>a&&l>0||n<a&&l<0?0:Math.ceil((a-n)/l)}t.rangeLength=e})(pl||={});var vl;(m=>{function e(f,c,h=0){let g=new Array(c.length);for(let x=0,M=h,I=c.length;x<I;++x,++M){if(M=f.indexOf(c[x],M),M===-1)return null;g[x]=M}return g}m.findIndices=e;function t(f,c,h=0){let g=e(f,c,h);if(!g)return null;let x=0;for(let M=0,I=g.length;M<I;++M){let b=g[M]-h;x+=b*b}return{score:x,indices:g}}m.matchSumOfSquares=t;function n(f,c,h=0){let g=e(f,c,h);if(!g)return null;let x=0,M=h-1;for(let I=0,b=g.length;I<b;++I){let v=g[I];x+=v-M-1,M=v}return{score:x,indices:g}}m.matchSumOfDeltas=n;function a(f,c,h){let g=[],x=0,M=0,I=c.length;for(;x<I;){let b=c[x],v=c[x];for(;++x<I&&c[x]===v+1;)v++;M<b&&g.push(f.slice(M,b)),b<v+1&&g.push(h(f.slice(b,v+1))),M=v+1}return M<f.length&&g.push(f.slice(M)),g}m.highlight=a;function l(f,c){return f<c?-1:f>c?1:0}m.cmp=l})(vl||={});var P;(function(e){function t(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s){var _=(r+s)%o;if(u[_]===d)return _}return-1}e.firstIndexOf=t;function n(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;r<i?p=r+1+(o-i):p=r-i+1;for(var s=0;s<p;++s){var _=(r-s+o)%o;if(u[_]===d)return _}return-1}e.lastIndexOf=n;function a(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s){var _=(r+s)%o;if(d(u[_],_))return _}return-1}e.findFirstIndex=a;function l(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;r<i?p=r+1+(o-i):p=r-i+1;for(var s=0;s<p;++s){var _=(r-s+o)%o;if(d(u[_],_))return _}return-1}e.findLastIndex=l;function m(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=a(u,d,r,i);return o!==-1?u[o]:void 0}e.findFirstValue=m;function f(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=l(u,d,r,i);return o!==-1?u[o]:void 0}e.findLastValue=f;function c(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var p=u.length;if(p===0)return 0;i<0?i=Math.max(0,i+p):i=Math.min(i,p-1),o<0?o=Math.max(0,o+p):o=Math.min(o,p-1);for(var s=i,_=o-i+1;_>0;){var C=_>>1,O=s+C;r(u[O],d)<0?(s=O+1,_-=C+1):_=C}return s}e.lowerBound=c;function h(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var p=u.length;if(p===0)return 0;i<0?i=Math.max(0,i+p):i=Math.min(i,p-1),o<0?o=Math.max(0,o+p):o=Math.min(o,p-1);for(var s=i,_=o-i+1;_>0;){var C=_>>1,O=s+C;r(u[O],d)>0?_=C:(s=O+1,_-=C+1)}return s}e.upperBound=h;function g(u,d,r){if(u===d)return!0;if(u.length!==d.length)return!1;for(var i=0,o=u.length;i<o;++i)if(r?!r(u[i],d[i]):u[i]!==d[i])return!1;return!0}e.shallowEqual=g;function x(u,d){d===void 0&&(d={});var r=d.start,i=d.stop,o=d.step;if(o===void 0&&(o=1),o===0)throw new Error("Slice `step` cannot be zero.");var p=u.length;r===void 0?r=o<0?p-1:0:r<0?r=Math.max(r+p,o<0?-1:0):r>=p&&(r=o<0?p-1:p),i===void 0?i=o<0?-1:p:i<0?i=Math.max(i+p,o<0?-1:0):i>=p&&(i=o<0?p-1:p);var s;o<0&&i>=r||o>0&&r>=i?s=0:o<0?s=Math.floor((i-r+1)/o+1):s=Math.floor((i-r-1)/o+1);for(var _=[],C=0;C<s;++C)_[C]=u[r+C*o];return _}e.slice=x;function M(u,d,r){var i=u.length;if(!(i<=1)&&(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1),d!==r)){for(var o=u[d],p=d<r?1:-1,s=d;s!==r;s+=p)u[s]=u[s+p];u[r]=o}}e.move=M;function I(u,d,r){d===void 0&&(d=0),r===void 0&&(r=-1);var i=u.length;if(!(i<=1))for(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1);d<r;){var o=u[d],p=u[r];u[d++]=p,u[r--]=o}}e.reverse=I;function b(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(!(o<=1)&&(r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1),!(r>=i))){var p=i-r+1;if(d>0?d=d%p:d<0&&(d=(d%p+p)%p),d!==0){var s=r+d;I(u,r,s-1),I(u,s,i),I(u,r,i)}}}e.rotate=b;function v(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o!==0){r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s)u[(r+s)%o]=d}}e.fill=v;function w(u,d,r){var i=u.length;d<0?d=Math.max(0,d+i):d=Math.min(d,i);for(var o=i;o>d;--o)u[o]=u[o-1];u[d]=r}e.insert=w;function y(u,d){var r=u.length;if(d<0&&(d+=r),!(d<0||d>=r)){for(var i=u[d],o=d+1;o<r;++o)u[o-1]=u[o];return u.length=r-1,i}}e.removeAt=y;function k(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=t(u,d,r,i);return o!==-1&&y(u,o),o}e.removeFirstOf=k;function T(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=n(u,d,r,i);return o!==-1&&y(u,o),o}e.removeLastOf=T;function E(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var p=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&u[s]===d||i<r&&(s<=i||s>=r)&&u[s]===d?p++:p>0&&(u[s-p]=u[s]);return p>0&&(u.length=o-p),p}e.removeAllOf=E;function S(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o,p=a(u,d,r,i);return p!==-1&&(o=y(u,p)),{index:p,value:o}}e.removeFirstWhere=S;function L(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o,p=l(u,d,r,i);return p!==-1&&(o=y(u,p)),{index:p,value:o}}e.removeLastWhere=L;function A(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var p=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&d(u[s],s)||i<r&&(s<=i||s>=r)&&d(u[s],s)?p++:p>0&&(u[s-p]=u[s]);return p>0&&(u.length=o-p),p}e.removeAllWhere=A})(P||(P={}));function we(e){var t;return typeof e.iter=="function"?t=e.iter():t=new gl(e),t}function N(e,t){for(var n=0,a=we(e),l;(l=a.next())!==void 0;)if(t(l,n++)===!1)return}function Ri(e,t){for(var n=0,a=we(e),l;(l=a.next())!==void 0;)if(!t(l,n++))return!1;return!0}function Bi(e,t){for(var n=0,a=we(e),l;(l=a.next())!==void 0;)if(t(l,n++))return!0;return!1}function Pi(e){for(var t=0,n=[],a=we(e),l;(l=a.next())!==void 0;)n[t++]=l;return n}var gl=function(){function e(t){this._index=0,this._source=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},e}(),N_=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?t:this.next()}},e}(),K_=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?this._source[t]:this.next()}},e}(),V_=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?[t,this._source[t]]:this.next()}},e}(),j_=function(){function e(t){this._fn=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},e.prototype.next=function(){return this._fn.call(void 0)},e}();function yn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Ke(we(e.map(we)))}var Ke=function(){function e(t){this._cloned=!1,this._source=t,this._active=void 0}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone());return t._active=this._active&&this._active.clone(),t._cloned=!0,this._cloned=!0,t},e.prototype.next=function(){if(this._active===void 0){var t=this._source.next();if(t===void 0)return;this._active=this._cloned?t.clone():t}var n=this._active.next();return n!==void 0?n:(this._active=void 0,this.next())},e}();function ge(){return new bl}var bl=function(){function e(){}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e},e.prototype.next=function(){},e}();var U_=function(){function e(t,n){this._source=t,this._index=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._index)},e.prototype.next=function(){var t=this._source.next();if(t!==void 0)return[this._index++,t]},e}();var G_=function(){function e(t,n){this._index=0,this._source=t,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){for(var t=this._fn,n=this._source,a;(a=n.next())!==void 0;)if(t(a,this._index++))return a},e}();function It(e,t){for(var n=0,a=we(e),l;(l=a.next())!==void 0;)if(t(l,n++))return l}function Ve(e,t){return new _l(we(e),t)}var _l=function(){function e(t,n){this._index=0,this._source=t,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){var t=this._source.next();if(t!==void 0)return this._fn.call(void 0,t,this._index++)},e}();var $_=function(){function e(t,n,a){this._index=0,this._start=t,this._stop=n,this._step=a,this._length=_n.rangeLength(t,n,a)}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._start,this._stop,this._step);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},e}(),_n;(function(e){function t(n,a,l){return l===0?1/0:n>a&&l>0||n<a&&l<0?0:Math.ceil((a-n)/l)}e.rangeLength=t})(_n||(_n={}));function xn(e,t,n){var a=0,l=we(e),m=l.next();if(m===void 0&&n===void 0)throw new TypeError("Reduce of empty iterable with no initial value.");if(m===void 0)return n;var f=l.next();if(f===void 0&&n===void 0)return m;if(f===void 0)return t(n,m,a++);var c;n===void 0?c=t(m,f,a++):c=t(t(n,m,a++),f,a++);for(var h;(h=l.next())!==void 0;)c=t(c,h,a++);return c}function Kt(e){return new yl(e,1)}var yl=function(){function e(t,n){this._value=t,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._value,this._count)},e.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},e}();function Fi(e){var t;return typeof e.retro=="function"?t=e.retro():t=new xl(e),t}var xl=function(){function e(t){this._source=t,this._index=t.length-1}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},e}();var Y_=function(){function e(t,n){this._source=t,this._step=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._step)},e.prototype.next=function(){for(var t=this._source.next(),n=this._step-1;n>0;--n)this._source.next();return t},e}(),zi;(function(e){function t(f,c,h){h===void 0&&(h=0);for(var g=new Array(c.length),x=0,M=h,I=c.length;x<I;++x,++M){if(M=f.indexOf(c[x],M),M===-1)return null;g[x]=M}return g}e.findIndices=t;function n(f,c,h){h===void 0&&(h=0);var g=t(f,c,h);if(!g)return null;for(var x=0,M=0,I=g.length;M<I;++M){var b=g[M]-h;x+=b*b}return{score:x,indices:g}}e.matchSumOfSquares=n;function a(f,c,h){h===void 0&&(h=0);var g=t(f,c,h);if(!g)return null;for(var x=0,M=h-1,I=0,b=g.length;I<b;++I){var v=g[I];x+=v-M-1,M=v}return{score:x,indices:g}}e.matchSumOfDeltas=a;function l(f,c,h){for(var g=[],x=0,M=0,I=c.length;x<I;){for(var b=c[x],v=c[x];++x<I&&c[x]===v+1;)v++;M<b&&g.push(f.slice(M,b)),b<v+1&&g.push(h(f.slice(b,v+1))),M=v+1}return M<f.length&&g.push(f.slice(M)),g}e.highlight=l;function m(f,c){return f<c?-1:f>c?1:0}e.cmp=m})(zi||(zi={}));var X_=function(){function e(t,n){this._source=t,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._count)},e.prototype.next=function(){if(!(this._count<=0)){var t=this._source.next();if(t!==void 0)return this._count--,t}},e}();var Z_=function(){function e(t){this._source=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.map(function(t){return t.clone()}))},e.prototype.next=function(){for(var t=new Array(this._source.length),n=0,a=this._source.length;n<a;++n){var l=this._source[n].next();if(l===void 0)return;t[n]=l}return t},e}();var Wi=function(){function e(t){this._root=new Z.LeafNode,this.cmp=t}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this._root.size===0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._root.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){var t=Z.firstLeaf(this._root);return t.size>0?t.items[0]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){var t=Z.lastLeaf(this._root);return t.size>0?t.items[t.size-1]:void 0},enumerable:!0,configurable:!0}),e.prototype.iter=function(){return Z.iterItems(this._root)},e.prototype.retro=function(){return Z.retroItems(this._root)},e.prototype.slice=function(t,n){return Z.sliceItems(this._root,t,n)},e.prototype.retroSlice=function(t,n){return Z.retroSliceItems(this._root,t,n)},e.prototype.at=function(t){return Z.itemAt(this._root,t)},e.prototype.has=function(t,n){return Z.hasItem(this._root,t,n)},e.prototype.indexOf=function(t,n){return Z.indexOf(this._root,t,n)},e.prototype.get=function(t,n){return Z.getItem(this._root,t,n)},e.prototype.assign=function(t){this.clear(),this.update(t)},e.prototype.insert=function(t){var n=Z.insertItem(this._root,t,this.cmp);return this._root=Z.maybeSplitRoot(this._root),n},e.prototype.update=function(t){var n=this;N(t,function(a){n.insert(a)})},e.prototype.delete=function(t,n){var a=Z.deleteItem(this._root,t,n);return this._root=Z.maybeExtractRoot(this._root),a},e.prototype.remove=function(t){var n=Z.removeItem(this._root,t);return this._root=Z.maybeExtractRoot(this._root),n},e.prototype.clear=function(){Z.clear(this._root),this._root=new Z.LeafNode},e}();(function(e){function t(n,a){var l=new e(a);return l.assign(n),l}e.from=t})(Wi||(Wi={}));var Z;(function(e){var t=function(){function s(){this.items=[],this.sizes=[],this.children=[]}return Object.defineProperty(s.prototype,"type",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"size",{get:function(){return this.sizes[this.sizes.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"width",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),s}();e.BranchNode=t;var n=function(){function s(){this.next=null,this.prev=null,this.items=[]}return Object.defineProperty(s.prototype,"type",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"width",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),s}();e.LeafNode=n;function a(s){for(;s.type===0;)s=s.children[0];return s}e.firstLeaf=a;function l(s){for(;s.type===0;)s=s.children[s.children.length-1];return s}e.lastLeaf=l;function m(s){var _=a(s);return new L(_,0,-1)}e.iterItems=m;function f(s){var _=l(s);return new A(_,_.size-1,-1)}e.retroItems=f;function c(s,_,C){_===void 0?_=0:_<0?_=Math.max(0,_+s.size):_=Math.min(_,s.size),C===void 0?C=s.size:C<0?C=Math.max(0,C+s.size):C=Math.min(C,s.size);var O=Math.max(0,C-_);if(O===0)return ge();for(;s.type===0;){var R=u(s.sizes,_);R>0&&(_-=s.sizes[R-1]),s=s.children[R]}return new L(s,_,O)}e.sliceItems=c;function h(s,_,C){_===void 0?_=s.size-1:_<0?_=Math.max(-1,_+s.size):_=Math.min(_,s.size-1),C===void 0?C=-1:C<0?C=Math.max(-1,C+s.size):C=Math.min(C,s.size-1);var O=Math.max(0,_-C);if(O===0)return ge();for(;s.type===0;){var R=u(s.sizes,_);R>0&&(_-=s.sizes[R-1]),s=s.children[R]}return new A(s,_,O)}e.retroSliceItems=h;function g(s,_){if(_<0&&(_+=s.size),!(_<0||_>=s.size)){for(;s.type===0;){var C=u(s.sizes,_);C>0&&(_-=s.sizes[C-1]),s=s.children[C]}return s.items[_]}}e.itemAt=g;function x(s,_,C){for(;s.type===0;){var O=d(s.items,_,C);s=s.children[O]}var R=r(s.items,_,C);return R>=0}e.hasItem=x;function M(s,_,C){for(var O=0;s.type===0;){var R=d(s.items,_,C);R>0&&(O+=s.sizes[R-1]),s=s.children[R]}var q=r(s.items,_,C);return q>=0?O+q:-O+q}e.indexOf=M;function I(s,_,C){for(;s.type===0;){var O=d(s.items,_,C);s=s.children[O]}var R=r(s.items,_,C);return R>=0?s.items[R]:void 0}e.getItem=I;function b(s,_,C){if(s.type===1){var O=r(s.items,_,C),R;return O>=0?(R=s.items[O],s.items[O]=_):(R=void 0,P.insert(s.items,-O-1,_)),R}var q=d(s.items,_,C),K=s.children[q],Y=K.size,V=b(K,_,C),U=K.size;if(s.items[q]=K.items[0],Y===U)return V;if(K.width>E){var G=o(K);P.insert(s.children,q+1,G),P.insert(s.items,q+1,G.items[0])}return i(s,q),V}e.insertItem=b;function v(s,_,C){if(s.type===1){var O=r(s.items,_,C);return O<0?void 0:P.removeAt(s.items,O)}var R=d(s.items,_,C),q=s.children[R],K=q.size,Y=v(q,_,C),V=q.size;return K===V||(s.items[R]=q.items[0],q.width<S&&(R=p(s,R)),i(s,R)),Y}e.deleteItem=v;function w(s,_){if(_<0&&(_+=s.size),!(_<0||_>=s.size)){if(s.type===1)return P.removeAt(s.items,_);var C=u(s.sizes,_);C>0&&(_-=s.sizes[C]);var O=s.children[C],R=w(O,_);return s.items[C]=O.items[0],O.width<S&&(C=p(s,C)),i(s,C),R}}e.removeItem=w;function y(s){s.type===0?(N(s.children,y),s.children.length=0,s.sizes.length=0,s.items.length=0):(s.items.length=0,s.next=null,s.prev=null)}e.clear=y;function k(s){if(s.width<=E)return s;var _=new t,C=o(s);return _.sizes[0]=s.size,_.sizes[1]=s.size+C.size,_.children[0]=s,_.children[1]=C,_.items[0]=s.items[0],_.items[1]=C.items[0],_}e.maybeSplitRoot=k;function T(s){if(s.type===1||s.children.length>1)return s;var _=s.children.pop();return y(s),_}e.maybeExtractRoot=T;var E=32,S=E>>1,L=function(){function s(_,C,O){this._node=_,this._index=C,this._count=O}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node,this._index,this._count)},s.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size?(this._node=this._node.next,this._index=0,this.next()):(this._count>0&&this._count--,this._node.items[this._index++])},s}(),A=function(){function s(_,C,O){this._node=_,this._index=C,this._count=O}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node,this._index,this._count)},s.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size&&(this._index=this._node.size-1),this._index<0?(this._node=this._node.prev,this._index=this._node?this._node.size-1:-1,this.next()):(this._count>0&&this._count--,this._node.items[this._index--])},s}();function u(s,_){for(var C=s.length,O=0;O<C;++O)if(s[O]>_)return O;return C-1}function d(s,_,C){for(var O=s.length,R=1;R<O;++R)if(C(s[R],_)>0)return R-1;return O-1}function r(s,_,C){for(var O=s.length,R=0;R<O;++R){var q=C(s[R],_);if(q===0)return R;if(q>0)return-R-1}return-O-1}function i(s,_){for(var C=s.sizes,O=s.children,R=_>0?C[_-1]:0,q=O.length;_<q;++_)R=C[_]=R+O[_].size;C.length=O.length}function o(s){if(s.type===1){for(var _=new n,C=s.items,O=_.items,R=S,q=C.length;R<q;++R)O.push(C[R]);return C.length=S,s.next&&(s.next.prev=_),_.next=s.next,_.prev=s,s.next=_,_}for(var K=new t,Y=s.children,V=K.children,R=S,q=Y.length;R<q;++R)V.push(Y[R]);Y.length=S;for(var U=s.items,G=K.items,R=S,q=U.length;R<q;++R)G.push(U[R]);return U.length=S,i(s,S),i(K,0),K}function p(s,_){var C,O,R,q,K,Y,V=s.children[_],U=_===0?s.children[_+1]:s.children[_-1],G=_===0,te=V.type===1,ne=U.width>S;if(te&&ne&&G){var F=V,H=U;return F.items.push(H.items.shift()),s.items[_+1]=H.items[0],_}if(te&&ne&&!G){var F=V,H=U;return F.items.unshift(H.items.pop()),s.items[_]=F.items[0],_-1}if(te&&!ne&&G){var F=V,H=U;return(C=H.items).unshift.apply(C,F.items),P.removeAt(s.children,_),P.removeAt(s.items,_+1),F.prev&&(F.prev.next=H),H.prev=F.prev,y(F),_}if(te&&!ne&&!G){var F=V,H=U;return(O=H.items).push.apply(O,F.items),P.removeAt(s.children,_),P.removeAt(s.items,_),F.next&&(F.next.prev=H),H.next=F.next,y(F),_-1}if(!te&&ne&&G){var F=V,H=U;return F.children.push(H.children.shift()),F.items.push(H.items.shift()),s.items[_+1]=H.items[0],i(F,F.width-1),i(H,0),_}if(!te&&ne&&!G){var F=V,H=U;return F.children.unshift(H.children.pop()),F.items.unshift(H.items.pop()),s.items[_]=F.items[0],i(F,0),i(H,H.width-1),_-1}if(!te&&!ne&&G){var F=V,H=U;return(R=H.children).unshift.apply(R,F.children),(q=H.items).unshift.apply(q,F.items),P.removeAt(s.children,_),P.removeAt(s.items,_+1),i(H,0),F.children.length=0,y(F),_}if(!te&&!ne&&!G){var F=V,H=U;return(K=H.children).push.apply(K,F.children),(Y=H.items).push.apply(Y,F.items),P.removeAt(s.children,_),P.removeAt(s.items,_),i(H,0),F.children.length=0,y(F),_-1}throw"unreachable"}})(Z||(Z={}));var Vt=function(){function e(){this._first=null,this._last=null,this._size=0}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this._size===0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this._first?this._first.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this._last?this._last.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstNode",{get:function(){return this._first},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastNode",{get:function(){return this._last},enumerable:!0,configurable:!0}),e.prototype.iter=function(){return new e.ForwardValueIterator(this._first)},e.prototype.retro=function(){return new e.RetroValueIterator(this._last)},e.prototype.nodes=function(){return new e.ForwardNodeIterator(this._first)},e.prototype.retroNodes=function(){return new e.RetroNodeIterator(this._last)},e.prototype.assign=function(t){var n=this;this.clear(),N(t,function(a){n.addLast(a)})},e.prototype.push=function(t){this.addLast(t)},e.prototype.pop=function(){return this.removeLast()},e.prototype.shift=function(t){this.addFirst(t)},e.prototype.unshift=function(){return this.removeFirst()},e.prototype.addFirst=function(t){var n=new Oe.LinkedListNode(this,t);return this._first?(n.next=this._first,this._first.prev=n,this._first=n):(this._first=n,this._last=n),this._size++,n},e.prototype.addLast=function(t){var n=new Oe.LinkedListNode(this,t);return this._last?(n.prev=this._last,this._last.next=n,this._last=n):(this._first=n,this._last=n),this._size++,n},e.prototype.insertBefore=function(t,n){if(!n||n===this._first)return this.addFirst(t);if(!(n instanceof Oe.LinkedListNode)||n.list!==this)throw new Error("Reference node is not owned by the list.");var a=new Oe.LinkedListNode(this,t),l=n,m=l.prev;return a.next=l,a.prev=m,l.prev=a,m.next=a,this._size++,a},e.prototype.insertAfter=function(t,n){if(!n||n===this._last)return this.addLast(t);if(!(n instanceof Oe.LinkedListNode)||n.list!==this)throw new Error("Reference node is not owned by the list.");var a=new Oe.LinkedListNode(this,t),l=n,m=l.next;return a.next=m,a.prev=l,l.next=a,m.prev=a,this._size++,a},e.prototype.removeFirst=function(){var t=this._first;if(!!t)return t===this._last?(this._first=null,this._last=null):(this._first=t.next,this._first.prev=null),t.list=null,t.next=null,t.prev=null,this._size--,t.value},e.prototype.removeLast=function(){var t=this._last;if(!!t)return t===this._first?(this._first=null,this._last=null):(this._last=t.prev,this._last.next=null),t.list=null,t.next=null,t.prev=null,this._size--,t.value},e.prototype.removeNode=function(t){if(!(t instanceof Oe.LinkedListNode)||t.list!==this)throw new Error("Node is not owned by the list.");var n=t;n===this._first&&n===this._last?(this._first=null,this._last=null):n===this._first?(this._first=n.next,this._first.prev=null):n===this._last?(this._last=n.prev,this._last.next=null):(n.next.prev=n.prev,n.prev.next=n.next),n.list=null,n.next=null,n.prev=null,this._size--},e.prototype.clear=function(){for(var t=this._first;t;){var n=t.next;t.list=null,t.prev=null,t.next=null,t=n}this._first=null,this._last=null,this._size=0},e}();(function(e){function t(f){var c=new e;return c.assign(f),c}e.from=t;var n=function(){function f(c){this._node=c}return f.prototype.iter=function(){return this},f.prototype.clone=function(){return new f(this._node)},f.prototype.next=function(){if(!!this._node){var c=this._node;return this._node=c.next,c.value}},f}();e.ForwardValueIterator=n;var a=function(){function f(c){this._node=c}return f.prototype.iter=function(){return this},f.prototype.clone=function(){return new f(this._node)},f.prototype.next=function(){if(!!this._node){var c=this._node;return this._node=c.prev,c.value}},f}();e.RetroValueIterator=a;var l=function(){function f(c){this._node=c}return f.prototype.iter=function(){return this},f.prototype.clone=function(){return new f(this._node)},f.prototype.next=function(){if(!!this._node){var c=this._node;return this._node=c.next,c}},f}();e.ForwardNodeIterator=l;var m=function(){function f(c){this._node=c}return f.prototype.iter=function(){return this},f.prototype.clone=function(){return new f(this._node)},f.prototype.next=function(){if(!!this._node){var c=this._node;return this._node=c.prev,c}},f}();e.RetroNodeIterator=m})(Vt||(Vt={}));var Oe;(function(e){var t=function(){function n(a,l){this.list=null,this.next=null,this.prev=null,this.list=a,this.value=l}return n}();e.LinkedListNode=t})(Oe||(Oe={}));var wn=function(e,t){return wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])},wn(e,t)};function wl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");wn(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var be=function(){function e(t){this.type=t}return Object.defineProperty(e.prototype,"isConflatable",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.conflate=function(t){return!1},e}(),je=function(e){wl(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"isConflatable",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.conflate=function(n){return!0},t}(be),W;(function(e){function t(r,i){var o=x.get(r);if(!o||o.length===0){T(r,i);return}var p=Ri(Fi(o),function(s){return s?k(s,r,i):!0});p&&T(r,i)}e.sendMessage=t;function n(r,i){if(!i.isConflatable){E(r,i);return}var o=Bi(g,function(p){return p.handler!==r||!p.msg||p.msg.type!==i.type||!p.msg.isConflatable?!1:p.msg.conflate(i)});o||E(r,i)}e.postMessage=n;function a(r,i){var o=x.get(r);o&&o.indexOf(i)!==-1||(o?o.push(i):x.set(r,[i]))}e.installMessageHook=a;function l(r,i){var o=x.get(r);if(!!o){var p=o.indexOf(i);p!==-1&&(o[p]=null,L(o))}}e.removeMessageHook=l;function m(r){var i=x.get(r);i&&i.length>0&&(P.fill(i,null),L(i)),N(g,function(o){o.handler===r&&(o.handler=null,o.msg=null)})}e.clearData=m;function f(){v||b===0||(y(b),v=!0,S(),v=!1)}e.flush=f;function c(){return I}e.getExceptionHandler=c;function h(r){var i=I;return I=r,i}e.setExceptionHandler=h;var g=new Vt,x=new WeakMap,M=new Set,I=function(r){console.error(r)},b=0,v=!1,w=function(){var r=typeof requestAnimationFrame=="function";return r?requestAnimationFrame:setImmediate}(),y=function(){var r=typeof cancelAnimationFrame=="function";return r?cancelAnimationFrame:clearImmediate}();function k(r,i,o){var p=!0;try{typeof r=="function"?p=r(i,o):p=r.messageHook(i,o)}catch(s){I(s)}return p}function T(r,i){try{r.processMessage(i)}catch(o){I(o)}}function E(r,i){g.addLast({handler:r,msg:i}),b===0&&(b=w(S))}function S(){if(b=0,!g.isEmpty){var r={handler:null,msg:null};for(g.addLast(r);;){var i=g.removeFirst();if(i===r)return;i.handler&&i.msg&&t(i.handler,i.msg)}}}function L(r){M.size===0&&w(A),M.add(r)}function A(){M.forEach(u),M.clear()}function u(r){P.removeAllWhere(r,d)}function d(r){return r===null}})(W||(W={}));var Hi;(function(e){function t(n){var a=document.body,l=function(m){m.preventDefault(),m.stopPropagation(),m.clipboardData.setData("text",n),a.removeEventListener("copy",l,!0)};a.addEventListener("copy",l,!0),document.execCommand("copy")}e.copyText=t})(Hi||(Hi={}));var X;(function(e){function t(m){var f=window.getComputedStyle(m),c=parseFloat(f.borderTopWidth)||0,h=parseFloat(f.borderLeftWidth)||0,g=parseFloat(f.borderRightWidth)||0,x=parseFloat(f.borderBottomWidth)||0,M=parseFloat(f.paddingTop)||0,I=parseFloat(f.paddingLeft)||0,b=parseFloat(f.paddingRight)||0,v=parseFloat(f.paddingBottom)||0,w=h+I+b+g,y=c+M+v+x;return{borderTop:c,borderLeft:h,borderRight:g,borderBottom:x,paddingTop:M,paddingLeft:I,paddingRight:b,paddingBottom:v,horizontalSum:w,verticalSum:y}}e.boxSizing=t;function n(m){var f=window.getComputedStyle(m),c=parseFloat(f.minWidth)||0,h=parseFloat(f.minHeight)||0,g=parseFloat(f.maxWidth)||1/0,x=parseFloat(f.maxHeight)||1/0;return g=Math.max(c,g),x=Math.max(h,x),{minWidth:c,minHeight:h,maxWidth:g,maxHeight:x}}e.sizeLimits=n;function a(m,f,c){var h=m.getBoundingClientRect();return f>=h.left&&f<h.right&&c>=h.top&&c<h.bottom}e.hitTest=a;function l(m,f){var c=m.getBoundingClientRect(),h=f.getBoundingClientRect();if(!(h.top<=c.top&&h.bottom>=c.bottom)){if(h.top<c.top&&h.height<=c.height){m.scrollTop-=c.top-h.top;return}if(h.bottom>c.bottom&&h.height>=c.height){m.scrollTop-=c.top-h.top;return}if(h.top<c.top&&h.height>c.height){m.scrollTop-=c.bottom-h.bottom;return}if(h.bottom>c.bottom&&h.height<c.height){m.scrollTop-=c.bottom-h.bottom;return}}}e.scrollIntoViewIfNeeded=l})(X||(X={}));var re;(function(e){e.IS_MAC=!!navigator.platform.match(/Mac/i),e.IS_WIN=!!navigator.platform.match(/Win/i),e.IS_IE=/Trident/.test(navigator.userAgent),e.IS_EDGE=/Edge/.test(navigator.userAgent);function t(n){return e.IS_MAC?n.metaKey:n.ctrlKey}e.accelKey=t})(re||(re={}));var et;(function(e){function t(l){if(l in Ie.specificityCache)return Ie.specificityCache[l];var m=Ie.calculateSingle(l);return Ie.specificityCache[l]=m}e.calculateSpecificity=t;function n(l){if(l in Ie.validityCache)return Ie.validityCache[l];var m=!0;try{Ie.testElem.querySelector(l)}catch{m=!1}return Ie.validityCache[l]=m}e.isValid=n;function a(l,m){return Ie.protoMatchFunc.call(l,m)}e.matches=a})(et||(et={}));var Ie;(function(e){e.specificityCache=Object.create(null),e.validityCache=Object.create(null),e.testElem=document.createElement("div"),e.protoMatchFunc=function(){var x=Element.prototype;return x.matches||x.matchesSelector||x.mozMatchesSelector||x.msMatchesSelector||x.oMatchesSelector||x.webkitMatchesSelector||function(M){var I=this,b=I.ownerDocument?I.ownerDocument.querySelectorAll(M):[];return Array.prototype.indexOf.call(b,I)!==-1}}();function t(x){x=x.split(",",1)[0];var M=0,I=0,b=0;function v(w){var y=x.match(w);return y===null?!1:(x=x.slice(y[0].length),!0)}for(x=x.replace(g," $1 ");x.length>0;){if(v(n)){M++;continue}if(v(a)){I++;continue}if(v(l)){I++;continue}if(v(f)){b++;continue}if(v(c)){I++;continue}if(v(m)){b++;continue}if(!v(h))return 0}return M=Math.min(M,255),I=Math.min(I,255),b=Math.min(b,255),M<<16|I<<8|b}e.calculateSingle=t;var n=/^#[^\s\+>~#\.\[:]+/,a=/^\.[^\s\+>~#\.\[:]+/,l=/^\[[^\]]+\]/,m=/^[^\s\+>~#\.\[:]+/,f=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,c=/^:[^\s\+>~#\.\[:]+/,h=/^[\s\+>~\*]+/,g=/:not\(([^\)]+)\)/g})(Ie||(Ie={}));var le=function(){function e(t){this._pid=Ue.nextPID(),this.name=t.name,this._create=t.create,this._coerce=t.coerce||null,this._compare=t.compare||null,this._changed=t.changed||null}return e.prototype.get=function(t){var n,a=Ue.ensureMap(t);return this._pid in a?n=a[this._pid]:n=a[this._pid]=this._createValue(t),n},e.prototype.set=function(t,n){var a,l=Ue.ensureMap(t);this._pid in l?a=l[this._pid]:a=l[this._pid]=this._createValue(t);var m=this._coerceValue(t,n);this._maybeNotify(t,a,l[this._pid]=m)},e.prototype.coerce=function(t){var n,a=Ue.ensureMap(t);this._pid in a?n=a[this._pid]:n=a[this._pid]=this._createValue(t);var l=this._coerceValue(t,n);this._maybeNotify(t,n,a[this._pid]=l)},e.prototype._createValue=function(t){var n=this._create;return n(t)},e.prototype._coerceValue=function(t,n){var a=this._coerce;return a?a(t,n):n},e.prototype._compareValue=function(t,n){var a=this._compare;return a?a(t,n):t===n},e.prototype._maybeNotify=function(t,n,a){var l=this._changed;l&&!this._compareValue(n,a)&&l(t,n,a)},e}();(function(e){function t(n){Ue.ownerData.delete(n)}e.clearData=t})(le||(le={}));var Ue;(function(e){e.ownerData=new WeakMap,e.nextPID=function(){var n=0;return function(){var a=Math.random(),l=(""+a).slice(2);return"pid-"+l+"-"+n++}}();function t(n){var a=e.ownerData.get(n);return a||(a=Object.create(null),e.ownerData.set(n,a),a)}e.ensureMap=t})(Ue||(Ue={}));var j=function(){function e(t){this._blockedCount=0,this.sender=t}return e.prototype.block=function(t){this._blockedCount++;try{t()}finally{this._blockedCount--}},e.prototype.connect=function(t,n){return fe.connect(this,t,n)},e.prototype.disconnect=function(t,n){return fe.disconnect(this,t,n)},e.prototype.emit=function(t){this._blockedCount||fe.emit(this,t)},e}();(function(e){function t(g,x){var M=fe.blockedProperty;M.set(g,M.get(g)+1);try{x()}finally{M.set(g,M.get(g)-1)}}e.blockAll=t;function n(g,x){fe.disconnectBetween(g,x)}e.disconnectBetween=n;function a(g){fe.disconnectSender(g)}e.disconnectSender=a;function l(g){fe.disconnectReceiver(g)}e.disconnectReceiver=l;function m(g){fe.disconnectAll(g)}e.disconnectAll=m;function f(g){fe.disconnectAll(g)}e.clearData=f;function c(){return fe.exceptionHandler}e.getExceptionHandler=c;function h(g){var x=fe.exceptionHandler;return fe.exceptionHandler=g,x}e.setExceptionHandler=h})(j||(j={}));var fe;(function(e){e.exceptionHandler=function(T){console.error(T)};function t(T,E,S){S=S||void 0;var L=h.get(T.sender);if(L||(L=[],h.set(T.sender,L)),I(L,T,E,S))return!1;var A=S||E,u=g.get(A);u||(u=[],g.set(A,u));var d={signal:T,slot:E,thisArg:S};return L.push(d),u.push(d),!0}e.connect=t;function n(T,E,S){S=S||void 0;var L=h.get(T.sender);if(!L||L.length===0)return!1;var A=I(L,T,E,S);if(!A)return!1;var u=S||E,d=g.get(u);return A.signal=null,v(L),v(d),!0}e.disconnect=n;function a(T,E){var S=h.get(T);if(!(!S||S.length===0)){var L=g.get(E);!L||L.length===0||(N(L,function(A){!A.signal||A.signal.sender===T&&(A.signal=null)}),v(S),v(L))}}e.disconnectBetween=a;function l(T){var E=h.get(T);!E||E.length===0||(N(E,function(S){if(!!S.signal){var L=S.thisArg||S.slot;S.signal=null,v(g.get(L))}}),v(E))}e.disconnectSender=l;function m(T){var E=g.get(T);!E||E.length===0||(N(E,function(S){if(!!S.signal){var L=S.signal.sender;S.signal=null,v(h.get(L))}}),v(E))}e.disconnectReceiver=m;function f(T){l(T),m(T)}e.disconnectAll=f;function c(T,E){if(!(e.blockedProperty.get(T.sender)>0)){var S=h.get(T.sender);if(!(!S||S.length===0))for(var L=0,A=S.length;L<A;++L){var u=S[L];u.signal===T&&b(u,E)}}}e.emit=c;var h=new WeakMap,g=new WeakMap,x=new Set,M=function(){var T=typeof requestAnimationFrame=="function";return T?requestAnimationFrame:setImmediate}();function I(T,E,S,L){return It(T,function(A){return A.signal===E&&A.slot===S&&A.thisArg===L})}function b(T,E){var S=T.signal,L=T.slot,A=T.thisArg;try{L.call(A,S.sender,E)}catch(u){e.exceptionHandler(u)}}function v(T){x.size===0&&M(w),x.add(T)}function w(){x.forEach(y),x.clear()}function y(T){P.removeAllWhere(T,k)}function k(T){return T.signal===null}e.blockedProperty=new le({name:"blocked",create:function(){return 0}})})(fe||(fe={}));var Ge=class{constructor(t){this._label="";this._caption="";this._mnemonic=-1;this._iconClass="";this._iconLabel="";this._className="";this._closable=!1;this._changed=new j(this);this._isDisposed=!1;this.owner=t.owner,t.label!==void 0&&(this._label=t.label),t.mnemonic!==void 0&&(this._mnemonic=t.mnemonic),t.icon!==void 0?typeof t.icon=="string"?(this._icon=null,this._iconClass=t.icon):this._icon=t.icon:this._icon=null,t.iconClass!==void 0&&(this._iconClass=t.iconClass),t.iconLabel!==void 0&&(this._iconLabel=t.iconLabel),t.iconRenderer!==void 0&&(this._icon=t.iconRenderer),t.caption!==void 0&&(this._caption=t.caption),t.className!==void 0&&(this._className=t.className),t.closable!==void 0&&(this._closable=t.closable),this._dataset=t.dataset||{}}get changed(){return this._changed}get label(){return this._label}set label(t){this._label!==t&&(this._label=t,this._changed.emit(void 0))}get mnemonic(){return this._mnemonic}set mnemonic(t){this._mnemonic!==t&&(this._mnemonic=t,this._changed.emit(void 0))}get icon(){return this._icon===null?this.iconClass:this._icon}set icon(t){if(typeof t=="string")this._icon=null,this.iconClass=t;else{if(this._icon===t)return;this._icon=t,this._changed.emit(void 0)}}get iconClass(){return this._iconClass}set iconClass(t){this._iconClass!==t&&(this._iconClass=t,this._changed.emit(void 0))}get iconLabel(){return this._iconLabel}set iconLabel(t){this._iconLabel!==t&&(this._iconLabel=t,this._changed.emit(void 0))}get iconRenderer(){return this._icon||void 0}set iconRenderer(t){this.icon=t}get caption(){return this._caption}set caption(t){this._caption!==t&&(this._caption=t,this._changed.emit(void 0))}get className(){return this._className}set className(t){this._className!==t&&(this._className=t,this._changed.emit(void 0))}get closable(){return this._closable}set closable(t){this._closable!==t&&(this._closable=t,this._changed.emit(void 0))}get dataset(){return this._dataset}set dataset(t){this._dataset!==t&&(this._dataset=t,this._changed.emit(void 0))}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,j.clearData(this))}};var B=class{constructor(t={}){this._flags=0;this._layout=null;this._parent=null;this._disposed=new j(this);this._hiddenMode=B.HiddenMode.Display;this.node=In.createNode(t),this.addClass("lm-Widget"),this.addClass("p-Widget")}dispose(){this.isDisposed||(this.setFlag(B.Flag.IsDisposed),this._disposed.emit(void 0),this.parent?this.parent=null:this.isAttached&&B.detach(this),this._layout&&(this._layout.dispose(),this._layout=null),this.title.dispose(),j.clearData(this),W.clearData(this),le.clearData(this))}get disposed(){return this._disposed}get isDisposed(){return this.testFlag(B.Flag.IsDisposed)}get isAttached(){return this.testFlag(B.Flag.IsAttached)}get isHidden(){return this.testFlag(B.Flag.IsHidden)}get isVisible(){return this.testFlag(B.Flag.IsVisible)}get title(){return In.titleProperty.get(this)}get id(){return this.node.id}set id(t){this.node.id=t}get dataset(){return this.node.dataset}get hiddenMode(){return this._hiddenMode}set hiddenMode(t){this._hiddenMode!==t&&(this.isHidden&&this._toggleHidden(!1),t==B.HiddenMode.Scale?this.node.style.willChange="transform":this.node.style.willChange="auto",this._hiddenMode=t,this.isHidden&&this._toggleHidden(!0))}get parent(){return this._parent}set parent(t){if(this._parent!==t){if(t&&this.contains(t))throw new Error("Invalid parent widget.");if(this._parent&&!this._parent.isDisposed){let n=new B.ChildMessage("child-removed",this);W.sendMessage(this._parent,n)}if(this._parent=t,this._parent&&!this._parent.isDisposed){let n=new B.ChildMessage("child-added",this);W.sendMessage(this._parent,n)}this.isDisposed||W.sendMessage(this,B.Msg.ParentChanged)}}get layout(){return this._layout}set layout(t){if(this._layout!==t){if(this.testFlag(B.Flag.DisallowLayout))throw new Error("Cannot set widget layout.");if(this._layout)throw new Error("Cannot change widget layout.");if(t.parent)throw new Error("Cannot change layout parent.");this._layout=t,t.parent=this}}children(){return this._layout?this._layout.iter():ge()}contains(t){for(let n=t;n;n=n._parent)if(n===this)return!0;return!1}hasClass(t){return this.node.classList.contains(t)}addClass(t){this.node.classList.add(t)}removeClass(t){this.node.classList.remove(t)}toggleClass(t,n){return n===!0?(this.node.classList.add(t),!0):n===!1?(this.node.classList.remove(t),!1):this.node.classList.toggle(t)}update(){W.postMessage(this,B.Msg.UpdateRequest)}fit(){W.postMessage(this,B.Msg.FitRequest)}activate(){W.postMessage(this,B.Msg.ActivateRequest)}close(){W.sendMessage(this,B.Msg.CloseRequest)}show(){if(!!this.testFlag(B.Flag.IsHidden)&&(this.isAttached&&(!this.parent||this.parent.isVisible)&&W.sendMessage(this,B.Msg.BeforeShow),this.clearFlag(B.Flag.IsHidden),this.node.removeAttribute("aria-hidden"),this._toggleHidden(!1),this.isAttached&&(!this.parent||this.parent.isVisible)&&W.sendMessage(this,B.Msg.AfterShow),this.parent)){let t=new B.ChildMessage("child-shown",this);W.sendMessage(this.parent,t)}}hide(){if(!this.testFlag(B.Flag.IsHidden)&&(this.isAttached&&(!this.parent||this.parent.isVisible)&&W.sendMessage(this,B.Msg.BeforeHide),this.setFlag(B.Flag.IsHidden),this.node.setAttribute("aria-hidden","true"),this._toggleHidden(!0),this.isAttached&&(!this.parent||this.parent.isVisible)&&W.sendMessage(this,B.Msg.AfterHide),this.parent)){let t=new B.ChildMessage("child-hidden",this);W.sendMessage(this.parent,t)}}setHidden(t){t?this.hide():this.show()}testFlag(t){return(this._flags&t)!==0}setFlag(t){this._flags|=t}clearFlag(t){this._flags&=~t}processMessage(t){switch(t.type){case"resize":this.notifyLayout(t),this.onResize(t);break;case"update-request":this.notifyLayout(t),this.onUpdateRequest(t);break;case"fit-request":this.notifyLayout(t),this.onFitRequest(t);break;case"before-show":this.notifyLayout(t),this.onBeforeShow(t);break;case"after-show":this.setFlag(B.Flag.IsVisible),this.notifyLayout(t),this.onAfterShow(t);break;case"before-hide":this.notifyLayout(t),this.onBeforeHide(t);break;case"after-hide":this.clearFlag(B.Flag.IsVisible),this.notifyLayout(t),this.onAfterHide(t);break;case"before-attach":this.notifyLayout(t),this.onBeforeAttach(t);break;case"after-attach":!this.isHidden&&(!this.parent||this.parent.isVisible)&&this.setFlag(B.Flag.IsVisible),this.setFlag(B.Flag.IsAttached),this.notifyLayout(t),this.onAfterAttach(t);break;case"before-detach":this.notifyLayout(t),this.onBeforeDetach(t);break;case"after-detach":this.clearFlag(B.Flag.IsVisible),this.clearFlag(B.Flag.IsAttached),this.notifyLayout(t),this.onAfterDetach(t);break;case"activate-request":this.notifyLayout(t),this.onActivateRequest(t);break;case"close-request":this.notifyLayout(t),this.onCloseRequest(t);break;case"child-added":this.notifyLayout(t),this.onChildAdded(t);break;case"child-removed":this.notifyLayout(t),this.onChildRemoved(t);break;default:this.notifyLayout(t);break}}notifyLayout(t){this._layout&&this._layout.processParentMessage(t)}onCloseRequest(t){this.parent?this.parent=null:this.isAttached&&B.detach(this)}onResize(t){}onUpdateRequest(t){}onFitRequest(t){}onActivateRequest(t){}onBeforeShow(t){}onAfterShow(t){}onBeforeHide(t){}onAfterHide(t){}onBeforeAttach(t){}onAfterAttach(t){}onBeforeDetach(t){}onAfterDetach(t){}onChildAdded(t){}onChildRemoved(t){}_toggleHidden(t){if(t)switch(this._hiddenMode){case B.HiddenMode.Display:this.addClass("lm-mod-hidden"),this.addClass("p-mod-hidden");break;case B.HiddenMode.Scale:this.node.style.transform="scale(0)";break;case B.HiddenMode.ContentVisibility:this.node.style.contentVisibility="hidden",this.node.style.zIndex="-1";break}else switch(this._hiddenMode){case B.HiddenMode.Display:this.removeClass("lm-mod-hidden"),this.removeClass("p-mod-hidden");break;case B.HiddenMode.Scale:this.node.style.transform="";break;case B.HiddenMode.ContentVisibility:this.node.style.contentVisibility="",this.node.style.zIndex="";break}}};(c=>{let e;(M=>(M[M.Display=0]="Display",M[M.Scale=1]="Scale",M[M.ContentVisibility=2]="ContentVisibility"))(e=c.HiddenMode||={});let t;(b=>(b[b.IsDisposed=1]="IsDisposed",b[b.IsAttached=2]="IsAttached",b[b.IsHidden=4]="IsHidden",b[b.IsVisible=8]="IsVisible",b[b.DisallowLayout=16]="DisallowLayout"))(t=c.Flag||={});let n;(L=>(L.BeforeShow=new be("before-show"),L.AfterShow=new be("after-show"),L.BeforeHide=new be("before-hide"),L.AfterHide=new be("after-hide"),L.BeforeAttach=new be("before-attach"),L.AfterAttach=new be("after-attach"),L.BeforeDetach=new be("before-detach"),L.AfterDetach=new be("after-detach"),L.ParentChanged=new be("parent-changed"),L.UpdateRequest=new je("update-request"),L.FitRequest=new je("fit-request"),L.ActivateRequest=new je("activate-request"),L.CloseRequest=new je("close-request")))(n=c.Msg||={});class a extends be{constructor(x,M){super(x);this.child=M}}c.ChildMessage=a;class l extends be{constructor(x,M){super("resize");this.width=x,this.height=M}}c.ResizeMessage=l,(g=>g.UnknownSize=new g(-1,-1))(l=c.ResizeMessage||={});function m(h,g,x=null){if(h.parent)throw new Error("Cannot attach a child widget.");if(h.isAttached||h.node.isConnected)throw new Error("Widget is already attached.");if(!g.isConnected)throw new Error("Host is not attached.");W.sendMessage(h,c.Msg.BeforeAttach),g.insertBefore(h.node,x),W.sendMessage(h,c.Msg.AfterAttach)}c.attach=m;function f(h){if(h.parent)throw new Error("Cannot detach a child widget.");if(!h.isAttached||!h.node.isConnected)throw new Error("Widget is not attached.");W.sendMessage(h,c.Msg.BeforeDetach),h.node.parentNode.removeChild(h.node),W.sendMessage(h,c.Msg.AfterDetach)}c.detach=f})(B||={});var In;(n=>{n.titleProperty=new le({name:"title",create:a=>new Ge({owner:a})});function t(a){return a.node||document.createElement(a.tag||"div")}n.createNode=t})(In||={});var Se=class{constructor(t={}){this._disposed=!1;this._parent=null;this._fitPolicy=t.fitPolicy||"set-min-size"}dispose(){this._parent=null,this._disposed=!0,j.clearData(this),le.clearData(this)}get isDisposed(){return this._disposed}get parent(){return this._parent}set parent(t){if(this._parent!==t){if(this._parent)throw new Error("Cannot change parent widget.");if(t.layout!==this)throw new Error("Invalid parent widget.");this._parent=t,this.init()}}get fitPolicy(){return this._fitPolicy}set fitPolicy(t){if(this._fitPolicy!==t&&(this._fitPolicy=t,this._parent)){let n=this._parent.node.style;n.minWidth="",n.minHeight="",n.maxWidth="",n.maxHeight="",this._parent.fit()}}processParentMessage(t){switch(t.type){case"resize":this.onResize(t);break;case"update-request":this.onUpdateRequest(t);break;case"fit-request":this.onFitRequest(t);break;case"before-show":this.onBeforeShow(t);break;case"after-show":this.onAfterShow(t);break;case"before-hide":this.onBeforeHide(t);break;case"after-hide":this.onAfterHide(t);break;case"before-attach":this.onBeforeAttach(t);break;case"after-attach":this.onAfterAttach(t);break;case"before-detach":this.onBeforeDetach(t);break;case"after-detach":this.onAfterDetach(t);break;case"child-removed":this.onChildRemoved(t);break;case"child-shown":this.onChildShown(t);break;case"child-hidden":this.onChildHidden(t);break}}init(){N(this,t=>{t.parent=this.parent})}onResize(t){N(this,n=>{W.sendMessage(n,B.ResizeMessage.UnknownSize)})}onUpdateRequest(t){N(this,n=>{W.sendMessage(n,B.ResizeMessage.UnknownSize)})}onBeforeAttach(t){N(this,n=>{W.sendMessage(n,t)})}onAfterAttach(t){N(this,n=>{W.sendMessage(n,t)})}onBeforeDetach(t){N(this,n=>{W.sendMessage(n,t)})}onAfterDetach(t){N(this,n=>{W.sendMessage(n,t)})}onBeforeShow(t){N(this,n=>{n.isHidden||W.sendMessage(n,t)})}onAfterShow(t){N(this,n=>{n.isHidden||W.sendMessage(n,t)})}onBeforeHide(t){N(this,n=>{n.isHidden||W.sendMessage(n,t)})}onAfterHide(t){N(this,n=>{n.isHidden||W.sendMessage(n,t)})}onChildRemoved(t){this.removeWidget(t.child)}onFitRequest(t){}onChildShown(t){}onChildHidden(t){}};(l=>{function e(m){return Mt.horizontalAlignmentProperty.get(m)}l.getHorizontalAlignment=e;function t(m,f){Mt.horizontalAlignmentProperty.set(m,f)}l.setHorizontalAlignment=t;function n(m){return Mt.verticalAlignmentProperty.get(m)}l.getVerticalAlignment=n;function a(m,f){Mt.verticalAlignmentProperty.set(m,f)}l.setVerticalAlignment=a})(Se||={});var tt=class{constructor(t){this._top=NaN;this._left=NaN;this._width=NaN;this._height=NaN;this._minWidth=0;this._minHeight=0;this._maxWidth=1/0;this._maxHeight=1/0;this._disposed=!1;this.widget=t,this.widget.node.style.position="absolute"}dispose(){if(this._disposed)return;this._disposed=!0;let t=this.widget.node.style;t.position="",t.top="",t.left="",t.width="",t.height=""}get minWidth(){return this._minWidth}get minHeight(){return this._minHeight}get maxWidth(){return this._maxWidth}get maxHeight(){return this._maxHeight}get isDisposed(){return this._disposed}get isHidden(){return this.widget.isHidden}get isVisible(){return this.widget.isVisible}get isAttached(){return this.widget.isAttached}fit(){let t=X.sizeLimits(this.widget.node);this._minWidth=t.minWidth,this._minHeight=t.minHeight,this._maxWidth=t.maxWidth,this._maxHeight=t.maxHeight}update(t,n,a,l){let m=Math.max(this._minWidth,Math.min(a,this._maxWidth)),f=Math.max(this._minHeight,Math.min(l,this._maxHeight));if(m<a)switch(Se.getHorizontalAlignment(this.widget)){case"left":break;case"center":t+=(a-m)/2;break;case"right":t+=a-m;break;default:throw"unreachable"}if(f<l)switch(Se.getVerticalAlignment(this.widget)){case"top":break;case"center":n+=(l-f)/2;break;case"bottom":n+=l-f;break;default:throw"unreachable"}let c=!1,h=this.widget.node.style;if(this._top!==n&&(this._top=n,h.top=`${n}px`),this._left!==t&&(this._left=t,h.left=`${t}px`),this._width!==m&&(c=!0,this._width=m,h.width=`${m}px`),this._height!==f&&(c=!0,this._height=f,h.height=`${f}px`),c){let g=new B.ResizeMessage(m,f);W.sendMessage(this.widget,g)}}},Mt;(a=>{a.horizontalAlignmentProperty=new le({name:"horizontalAlignment",create:()=>"center",changed:n}),a.verticalAlignmentProperty=new le({name:"verticalAlignment",create:()=>"top",changed:n});function n(l){l.parent&&l.parent.layout&&l.parent.update()}})(Mt||={});var nt=class extends Se{constructor(){super(...arguments);this._widgets=[]}dispose(){for(;this._widgets.length>0;)this._widgets.pop().dispose();super.dispose()}get widgets(){return this._widgets}iter(){return we(this._widgets)}addWidget(n){this.insertWidget(this._widgets.length,n)}insertWidget(n,a){a.parent=this.parent;let l=this._widgets.indexOf(a),m=Math.max(0,Math.min(n,this._widgets.length));if(l===-1){P.insert(this._widgets,m,a),this.parent&&this.attachWidget(m,a);return}m===this._widgets.length&&m--,l!==m&&(P.move(this._widgets,l,m),this.parent&&this.moveWidget(l,m,a))}removeWidget(n){this.removeWidgetAt(this._widgets.indexOf(n))}removeWidgetAt(n){let a=P.removeAt(this._widgets,n);a&&this.parent&&this.detachWidget(n,a)}init(){super.init(),N(this,(n,a)=>{this.attachWidget(a,n)})}attachWidget(n,a){let l=this.parent.node.children[n];this.parent.isAttached&&W.sendMessage(a,B.Msg.BeforeAttach),this.parent.node.insertBefore(a.node,l),this.parent.isAttached&&W.sendMessage(a,B.Msg.AfterAttach)}moveWidget(n,a,l){this.parent.isAttached&&W.sendMessage(l,B.Msg.BeforeDetach),this.parent.node.removeChild(l.node),this.parent.isAttached&&W.sendMessage(l,B.Msg.AfterDetach);let m=this.parent.node.children[a];this.parent.isAttached&&W.sendMessage(l,B.Msg.BeforeAttach),this.parent.node.insertBefore(l.node,m),this.parent.isAttached&&W.sendMessage(l,B.Msg.AfterAttach)}detachWidget(n,a){this.parent.isAttached&&W.sendMessage(a,B.Msg.BeforeDetach),this.parent.node.removeChild(a.node),this.parent.isAttached&&W.sendMessage(a,B.Msg.AfterDetach)}};var it=class extends B{constructor(t={}){super(),this.addClass("lm-Panel"),this.addClass("p-Panel"),this.layout=qi.createLayout(t)}get widgets(){return this.layout.widgets}addWidget(t){this.layout.addWidget(t)}insertWidget(t,n){this.layout.insertWidget(t,n)}},qi;(t=>{function e(n){return n.layout||new nt}t.createLayout=e})(qi||={});var Mn=function(e,t){return Mn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])},Mn(e,t)};function Ki(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Mn(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var rt=function(){function e(t){this._fn=t}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return!this._fn},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){if(!!this._fn){var t=this._fn;this._fn=null,t()}},e}(),Ny=function(e){Ki(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._disposed=new j(n),n}return Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(e.prototype.dispose.call(this),this._disposed.emit(void 0),j.clearData(this))},t}(rt),Tn=function(){function e(){this._isDisposed=!1,this._items=new Set}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._items.forEach(function(t){t.dispose()}),this._items.clear())},e.prototype.contains=function(t){return this._items.has(t)},e.prototype.add=function(t){this._items.add(t)},e.prototype.remove=function(t){this._items.delete(t)},e.prototype.clear=function(){this._items.clear()},e}();(function(e){function t(n){var a=new e;return N(n,function(l){a.add(l)}),a}e.from=t})(Tn||(Tn={}));var Ni=function(e){Ki(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._disposed=new j(n),n}return Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(e.prototype.dispose.call(this),this._disposed.emit(void 0),j.clearData(this))},t}(Tn);(function(e){function t(n){var a=new e;return N(n,function(l){a.add(l)}),a}e.from=t})(Ni||(Ni={}));var ze=function(){function e(t){var n=this;this._onScrollFrame=function(){if(!!n._scrollTarget){var a=n._scrollTarget,l=a.element,m=a.edge,f=a.distance,c=oe.SCROLL_EDGE_SIZE-f,h=Math.pow(c/oe.SCROLL_EDGE_SIZE,2),g=Math.max(1,Math.round(h*oe.SCROLL_EDGE_SIZE));switch(m){case"top":l.scrollTop-=g;break;case"left":l.scrollLeft-=g;break;case"right":l.scrollLeft+=g;break;case"bottom":l.scrollTop+=g;break}requestAnimationFrame(n._onScrollFrame)}},this._disposed=!1,this._dropAction="none",this._override=null,this._currentTarget=null,this._currentElement=null,this._promise=null,this._scrollTarget=null,this._resolve=null,this.document=t.document||document,this.mimeData=t.mimeData,this.dragImage=t.dragImage||null,this.proposedAction=t.proposedAction||"copy",this.supportedActions=t.supportedActions||"all",this.source=t.source||null}return e.prototype.dispose=function(){if(!this._disposed){if(this._disposed=!0,this._currentTarget){var t=oe.createMouseEvent("pointerup",-1,-1);oe.dispatchDragLeave(this,this._currentTarget,null,t)}this._finalize("none")}},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),e.prototype.start=function(t,n){var a=this;if(this._disposed)return Promise.resolve("none");if(this._promise)return this._promise;this._addListeners(),this._attachDragImage(t,n),this._promise=new Promise(function(m,f){a._resolve=m});var l=oe.createMouseEvent("pointermove",t,n);return document.dispatchEvent(l),this._promise},e.prototype.handleEvent=function(t){switch(t.type){case"mousemove":this._evtMouseMove(t);break;case"mouseup":this._evtMouseUp(t);break;case"pointermove":this._evtMouseMove(t);break;case"pointerup":this._evtMouseUp(t);break;case"keydown":this._evtKeyDown(t);break;default:t.preventDefault(),t.stopPropagation();break}},e.prototype.moveDragImage=function(t,n){if(!!this.dragImage){var a=this.dragImage.style;a.top=n+"px",a.left=t+"px"}},e.prototype._evtMouseMove=function(t){t.preventDefault(),t.stopPropagation(),this._updateCurrentTarget(t),this._updateDragScroll(t),this.moveDragImage(t.clientX,t.clientY)},e.prototype._evtMouseUp=function(t){if(t.preventDefault(),t.stopPropagation(),t.button===0){if(this._updateCurrentTarget(t),!this._currentTarget){this._finalize("none");return}if(this._dropAction==="none"){oe.dispatchDragLeave(this,this._currentTarget,null,t),this._finalize("none");return}var n=oe.dispatchDrop(this,this._currentTarget,t);this._finalize(n)}},e.prototype._evtKeyDown=function(t){t.preventDefault(),t.stopPropagation(),t.keyCode===27&&this.dispose()},e.prototype._addListeners=function(){document.addEventListener("mousedown",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("mouseenter",this,!0),document.addEventListener("mouseleave",this,!0),document.addEventListener("mouseover",this,!0),document.addEventListener("mouseout",this,!0),document.addEventListener("pointerdown",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("pointerup",this,!0),document.addEventListener("pointerenter",this,!0),document.addEventListener("pointerleave",this,!0),document.addEventListener("pointerover",this,!0),document.addEventListener("pointerout",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("keyup",this,!0),document.addEventListener("keypress",this,!0),document.addEventListener("contextmenu",this,!0)},e.prototype._removeListeners=function(){document.removeEventListener("mousedown",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mouseenter",this,!0),document.removeEventListener("mouseleave",this,!0),document.removeEventListener("mouseover",this,!0),document.removeEventListener("mouseout",this,!0),document.removeEventListener("pointerdown",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointerenter",this,!0),document.removeEventListener("pointerleave",this,!0),document.removeEventListener("pointerover",this,!0),document.removeEventListener("pointerout",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("keyup",this,!0),document.removeEventListener("keypress",this,!0),document.removeEventListener("contextmenu",this,!0)},e.prototype._updateDragScroll=function(t){var n=oe.findScrollTarget(t);!this._scrollTarget&&!n||(this._scrollTarget||setTimeout(this._onScrollFrame,500),this._scrollTarget=n)},e.prototype._updateCurrentTarget=function(t){var n=this._currentTarget,a=this._currentTarget,l=this._currentElement,m=this.document.elementFromPoint(t.clientX,t.clientY);this._currentElement=m,m!==l&&m!==a&&oe.dispatchDragExit(this,a,m,t),m!==l&&m!==a&&(a=oe.dispatchDragEnter(this,m,a,t)),a!==n&&(this._currentTarget=a,oe.dispatchDragLeave(this,n,a,t));var f=oe.dispatchDragOver(this,a,t);this._setDropAction(f)},e.prototype._attachDragImage=function(t,n){if(!!this.dragImage){this.dragImage.classList.add("lm-mod-drag-image"),this.dragImage.classList.add("p-mod-drag-image");var a=this.dragImage.style;a.pointerEvents="none",a.position="fixed",a.top=n+"px",a.left=t+"px";var l=this.document instanceof Document?this.document.body:this.document.firstElementChild;l.appendChild(this.dragImage)}},e.prototype._detachDragImage=function(){if(!!this.dragImage){var t=this.dragImage.parentNode;!t||t.removeChild(this.dragImage)}},e.prototype._setDropAction=function(t){if(t=oe.validateAction(t,this.supportedActions),!(this._override&&this._dropAction===t))switch(t){case"none":this._dropAction=t,this._override=e.overrideCursor("no-drop",this.document);break;case"copy":this._dropAction=t,this._override=e.overrideCursor("copy",this.document);break;case"link":this._dropAction=t,this._override=e.overrideCursor("alias",this.document);break;case"move":this._dropAction=t,this._override=e.overrideCursor("move",this.document);break}},e.prototype._finalize=function(t){var n=this._resolve;this._removeListeners(),this._detachDragImage(),this._override&&(this._override.dispose(),this._override=null),this.mimeData.clear(),this._disposed=!0,this._dropAction="none",this._currentTarget=null,this._currentElement=null,this._scrollTarget=null,this._promise=null,this._resolve=null,n&&n(t)},e}();(function(e){function t(a,l){l===void 0&&(l=document);var m=++n,f=l instanceof Document?l.body:l.firstElementChild;return f.style.cursor=a,f.classList.add("lm-mod-override-cursor"),f.classList.add("p-mod-override-cursor"),new rt(function(){m===n&&(f.style.cursor="",f.classList.remove("lm-mod-override-cursor"),f.classList.remove("p-mod-override-cursor"))})}e.overrideCursor=t;var n=0})(ze||(ze={}));var oe;(function(e){e.SCROLL_EDGE_SIZE=20;function t(I,b){return g[I]&x[b]?I:"none"}e.validateAction=t;function n(I,b,v){var w=document.createEvent("MouseEvent");return w.initMouseEvent(I,!0,!0,window,0,0,0,b,v,!1,!1,!1,!1,0,null),w}e.createMouseEvent=n;function a(I){for(var b=I.clientX,v=I.clientY,w=document.elementFromPoint(b,v);w;w=w.parentElement){var y=w.hasAttribute("data-lm-dragscroll");if(y=y||w.hasAttribute("data-p-dragscroll"),!!y){var k=0,T=0;w===document.body&&(k=window.pageXOffset,T=window.pageYOffset);var E=w.getBoundingClientRect(),S=E.top+T,L=E.left+k,A=L+E.width,u=S+E.height;if(!(b<L||b>=A||v<S||v>=u)){var d=b-L+1,r=v-S+1,i=A-b,o=u-v,p=Math.min(d,r,i,o);if(!(p>e.SCROLL_EDGE_SIZE)){var s=void 0;switch(p){case o:s="bottom";break;case r:s="top";break;case i:s="right";break;case d:s="left";break;default:throw"unreachable"}var _=w.scrollWidth-w.clientWidth,C=w.scrollHeight-w.clientHeight,O=void 0;switch(s){case"top":O=C>0&&w.scrollTop>0;break;case"left":O=_>0&&w.scrollLeft>0;break;case"right":O=_>0&&w.scrollLeft<_;break;case"bottom":O=C>0&&w.scrollTop<C;break;default:throw"unreachable"}if(!!O)return{element:w,edge:s,distance:p}}}}}return null}e.findScrollTarget=a;function l(I,b,v,w){if(!b)return null;var y=M("lm-dragenter",I,w,v),k=!b.dispatchEvent(y);if(k||(y=M("p-dragenter",I,w,v),k=!b.dispatchEvent(y),k))return b;var T=I.document instanceof Document?I.document.body:I.document.firstElementChild;return b===T?v:(y=M("lm-dragenter",I,w,v),T.dispatchEvent(y),y=M("p-dragenter",I,w,v),T.dispatchEvent(y),T)}e.dispatchDragEnter=l;function m(I,b,v,w){if(!!b){var y=M("lm-dragexit",I,w,v);b.dispatchEvent(y),y=M("p-dragexit",I,w,v),b.dispatchEvent(y)}}e.dispatchDragExit=m;function f(I,b,v,w){if(!!b){var y=M("lm-dragleave",I,w,v);b.dispatchEvent(y),y=M("p-dragleave",I,w,v),b.dispatchEvent(y)}}e.dispatchDragLeave=f;function c(I,b,v){if(!b)return"none";var w=M("lm-dragover",I,v,null),y=!b.dispatchEvent(w);return y||(w=M("p-dragover",I,v,null),y=!b.dispatchEvent(w),y)?w.dropAction:"none"}e.dispatchDragOver=c;function h(I,b,v){if(!b)return"none";var w=M("lm-drop",I,v,null),y=!b.dispatchEvent(w);return y||(w=M("p-drop",I,v,null),y=!b.dispatchEvent(w),y)?w.dropAction:"none"}e.dispatchDrop=h;var g={none:0,copy:1,link:2,move:4},x={none:g.none,copy:g.copy,link:g.link,move:g.move,"copy-link":g.copy|g.link,"copy-move":g.copy|g.move,"link-move":g.link|g.move,all:g.copy|g.link|g.move};function M(I,b,v,w){var y=document.createEvent("MouseEvent");return y.initMouseEvent(I,!0,!0,window,0,v.screenX,v.screenY,v.clientX,v.clientY,v.ctrlKey,v.altKey,v.shiftKey,v.metaKey,v.button,w),y.dropAction="none",y.mimeData=b.mimeData,y.proposedAction=b.proposedAction,y.supportedActions=b.supportedActions,y.source=b.source,y}})(oe||(oe={}));var Pe=class{constructor(){this.sizeHint=0;this.minSize=0;this.maxSize=1/0;this.stretch=1;this.size=0;this.done=!1}},Fe;(l=>{function e(m,f){let c=m.length;if(c===0)return f;let h=0,g=0,x=0,M=0,I=0;for(let w=0;w<c;++w){let y=m[w],k=y.minSize,T=y.maxSize,E=y.sizeHint;y.done=!1,y.size=Math.max(k,Math.min(E,T)),x+=y.size,h+=k,g+=T,y.stretch>0&&(M+=y.stretch,I++)}if(f===x)return 0;if(f<=h){for(let w=0;w<c;++w){let y=m[w];y.size=y.minSize}return f-h}if(f>=g){for(let w=0;w<c;++w){let y=m[w];y.size=y.maxSize}return f-g}let b=.01,v=c;if(f<x){let w=x-f;for(;I>0&&w>b;){let y=w,k=M;for(let T=0;T<c;++T){let E=m[T];if(E.done||E.stretch===0)continue;let S=E.stretch*y/k;E.size-S<=E.minSize?(w-=E.size-E.minSize,M-=E.stretch,E.size=E.minSize,E.done=!0,v--,I--):(w-=S,E.size-=S)}}for(;v>0&&w>b;){let y=w/v;for(let k=0;k<c;++k){let T=m[k];T.done||(T.size-y<=T.minSize?(w-=T.size-T.minSize,T.size=T.minSize,T.done=!0,v--):(w-=y,T.size-=y))}}}else{let w=f-x;for(;I>0&&w>b;){let y=w,k=M;for(let T=0;T<c;++T){let E=m[T];if(E.done||E.stretch===0)continue;let S=E.stretch*y/k;E.size+S>=E.maxSize?(w-=E.maxSize-E.size,M-=E.stretch,E.size=E.maxSize,E.done=!0,v--,I--):(w-=S,E.size+=S)}}for(;v>0&&w>b;){let y=w/v;for(let k=0;k<c;++k){let T=m[k];T.done||(T.size+y>=T.maxSize?(w-=T.maxSize-T.size,T.size=T.maxSize,T.done=!0,v--):(w-=y,T.size+=y))}}}return 0}l.calc=e;function t(m,f,c){m.length===0||c===0||(c>0?n(m,f,c):a(m,f,-c))}l.adjust=t;function n(m,f,c){let h=0;for(let I=0;I<=f;++I){let b=m[I];h+=b.maxSize-b.size}let g=0;for(let I=f+1,b=m.length;I<b;++I){let v=m[I];g+=v.size-v.minSize}c=Math.min(c,h,g);let x=c;for(let I=f;I>=0&&x>0;--I){let b=m[I],v=b.maxSize-b.size;v>=x?(b.sizeHint=b.size+x,x=0):(b.sizeHint=b.size+v,x-=v)}let M=c;for(let I=f+1,b=m.length;I<b&&M>0;++I){let v=m[I],w=v.size-v.minSize;w>=M?(v.sizeHint=v.size-M,M=0):(v.sizeHint=v.size-w,M-=w)}}function a(m,f,c){let h=0;for(let I=f+1,b=m.length;I<b;++I){let v=m[I];h+=v.maxSize-v.size}let g=0;for(let I=0;I<=f;++I){let b=m[I];g+=b.size-b.minSize}c=Math.min(c,h,g);let x=c;for(let I=f+1,b=m.length;I<b&&x>0;++I){let v=m[I],w=v.maxSize-v.size;w>=x?(v.sizeHint=v.size+x,x=0):(v.sizeHint=v.size+w,x-=w)}let M=c;for(let I=f;I>=0&&M>0;--I){let b=m[I],v=b.size-b.minSize;v>=M?(b.sizeHint=b.size-M,M=0):(b.sizeHint=b.size-v,M-=v)}}})(Fe||={});var Tt;(t=>{function e(n){return Math.max(0,Math.floor(n))}t.clampDimension=e})(Tt||={});var kn=Tt;var Me=class extends nt{constructor(n){super();this.widgetOffset=0;this._fixed=0;this._spacing=4;this._dirty=!1;this._hasNormedSizes=!1;this._sizers=[];this._items=[];this._handles=[];this._box=null;this._alignment="start";this._orientation="horizontal";this.renderer=n.renderer,n.orientation!==void 0&&(this._orientation=n.orientation),n.alignment!==void 0&&(this._alignment=n.alignment),n.spacing!==void 0&&(this._spacing=Tt.clampDimension(n.spacing))}dispose(){N(this._items,n=>{n.dispose()}),this._box=null,this._items.length=0,this._sizers.length=0,this._handles.length=0,super.dispose()}get orientation(){return this._orientation}set orientation(n){this._orientation!==n&&(this._orientation=n,this.parent&&(this.parent.dataset.orientation=n,this.parent.fit()))}get alignment(){return this._alignment}set alignment(n){this._alignment!==n&&(this._alignment=n,this.parent&&(this.parent.dataset.alignment=n,this.parent.update()))}get spacing(){return this._spacing}set spacing(n){n=Tt.clampDimension(n),this._spacing!==n&&(this._spacing=n,this.parent&&this.parent.fit())}get handles(){return this._handles}absoluteSizes(){return this._sizers.map(n=>n.size)}relativeSizes(){return We.normalize(this._sizers.map(n=>n.size))}setRelativeSizes(n,a=!0){let l=this._sizers.length,m=n.slice(0,l);for(;m.length<l;)m.push(0);let f=We.normalize(m);for(let c=0;c<l;++c){let h=this._sizers[c];h.sizeHint=f[c],h.size=f[c]}this._hasNormedSizes=!0,a&&this.parent&&this.parent.update()}moveHandle(n,a){let l=this._handles[n];if(!l||l.classList.contains("lm-mod-hidden"))return;let m;if(this._orientation==="horizontal"?m=a-l.offsetLeft:m=a-l.offsetTop,m!==0){for(let f of this._sizers)f.size>0&&(f.sizeHint=f.size);Fe.adjust(this._sizers,n,m),this.parent&&this.parent.update()}}init(){this.parent.dataset.orientation=this.orientation,this.parent.dataset.alignment=this.alignment,super.init()}attachWidget(n,a){let l=new tt(a),m=We.createHandle(this.renderer),f=We.averageSize(this._sizers),c=We.createSizer(f);P.insert(this._items,n,l),P.insert(this._sizers,n,c),P.insert(this._handles,n,m),this.parent.isAttached&&W.sendMessage(a,B.Msg.BeforeAttach),this.parent.node.appendChild(a.node),this.parent.node.appendChild(m),this.parent.isAttached&&W.sendMessage(a,B.Msg.AfterAttach),this.parent.fit()}moveWidget(n,a,l){P.move(this._items,n,a),P.move(this._sizers,n,a),P.move(this._handles,n,a),this.parent.fit()}detachWidget(n,a){let l=P.removeAt(this._items,n),m=P.removeAt(this._handles,n);P.removeAt(this._sizers,n),this.parent.isAttached&&W.sendMessage(a,B.Msg.BeforeDetach),this.parent.node.removeChild(a.node),this.parent.node.removeChild(m),this.parent.isAttached&&W.sendMessage(a,B.Msg.AfterDetach),l.dispose(),this.parent.fit()}onBeforeShow(n){super.onBeforeShow(n),this.parent.update()}onBeforeAttach(n){super.onBeforeAttach(n),this.parent.fit()}onChildShown(n){this.parent.fit()}onChildHidden(n){this.parent.fit()}onResize(n){this.parent.isVisible&&this._update(n.width,n.height)}onUpdateRequest(n){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(n){this.parent.isAttached&&this._fit()}updateItemPosition(n,a,l,m,f,c,h){let g=this._items[n];if(g.isHidden)return;let x=this._handles[n].style;a?(l+=this.widgetOffset,g.update(l,m,h,f),l+=h,x.top=`${m}px`,x.left=`${l}px`,x.width=`${this._spacing}px`,x.height=`${f}px`):(m+=this.widgetOffset,g.update(l,m,c,h),m+=h,x.top=`${m}px`,x.left=`${l}px`,x.width=`${c}px`,x.height=`${this._spacing}px`)}_fit(){let n=0,a=-1;for(let g=0,x=this._items.length;g<x;++g)this._items[g].isHidden?(this._handles[g].classList.add("lm-mod-hidden"),this._handles[g].classList.add("p-mod-hidden")):(this._handles[g].classList.remove("lm-mod-hidden"),this._handles[g].classList.remove("p-mod-hidden"),a=g,n++);a!==-1&&(this._handles[a].classList.add("lm-mod-hidden"),this._handles[a].classList.add("p-mod-hidden")),this._fixed=this._spacing*Math.max(0,n-1)+this.widgetOffset*this._items.length;let l=this._orientation==="horizontal",m=l?this._fixed:0,f=l?0:this._fixed;for(let g=0,x=this._items.length;g<x;++g){let M=this._items[g],I=this._sizers[g];if(I.size>0&&(I.sizeHint=I.size),M.isHidden){I.minSize=0,I.maxSize=0;continue}M.fit(),I.stretch=Me.getStretch(M.widget),l?(I.minSize=M.minWidth,I.maxSize=M.maxWidth,m+=M.minWidth,f=Math.max(f,M.minHeight)):(I.minSize=M.minHeight,I.maxSize=M.maxHeight,f+=M.minHeight,m=Math.max(m,M.minWidth))}let c=this._box=X.boxSizing(this.parent.node);m+=c.horizontalSum,f+=c.verticalSum;let h=this.parent.node.style;h.minWidth=`${m}px`,h.minHeight=`${f}px`,this._dirty=!0,this.parent.parent&&W.sendMessage(this.parent.parent,B.Msg.FitRequest),this._dirty&&W.sendMessage(this.parent,B.Msg.UpdateRequest)}_update(n,a){this._dirty=!1;let l=0;for(let I=0,b=this._items.length;I<b;++I)l+=+!this._items[I].isHidden;if(l===0&&this.widgetOffset===0)return;n<0&&(n=this.parent.node.offsetWidth),a<0&&(a=this.parent.node.offsetHeight),this._box||(this._box=X.boxSizing(this.parent.node));let m=this._box.paddingTop,f=this._box.paddingLeft,c=n-this._box.horizontalSum,h=a-this._box.verticalSum,g=0,x=0,M=this._orientation==="horizontal";if(l>0){let I;if(M?I=Math.max(0,c-this._fixed):I=Math.max(0,h-this._fixed),this._hasNormedSizes){for(let v of this._sizers)v.sizeHint*=I;this._hasNormedSizes=!1}let b=Fe.calc(this._sizers,I);if(b>0)switch(this._alignment){case"start":break;case"center":g=0,x=b/2;break;case"end":g=0,x=b;break;case"justify":g=b/l,x=0;break;default:throw"unreachable"}}for(let I=0,b=this._items.length;I<b;++I){let w=this._items[I].isHidden?0:this._sizers[I].size+g;this.updateItemPosition(I,M,M?f+x:f,M?m:m+x,h,c,w);let y=this.widgetOffset+(this._handles[I].classList.contains("lm-mod-hidden")?0:this._spacing);M?f+=w+y:m+=w+y}}};(n=>{function e(a){return We.stretchProperty.get(a)}n.getStretch=e;function t(a,l){We.stretchProperty.set(a,l)}n.setStretch=t})(Me||={});var We;(f=>{f.stretchProperty=new le({name:"stretch",create:()=>0,coerce:(c,h)=>Math.max(0,Math.floor(h)),changed:m});function t(c){let h=new Pe;return h.sizeHint=Math.floor(c),h}f.createSizer=t;function n(c){let h=c.createHandle();return h.style.position="absolute",h}f.createHandle=n;function a(c){return c.reduce((h,g)=>h+g.size,0)/c.length||0}f.averageSize=a;function l(c){let h=c.length;if(h===0)return[];let g=c.reduce((x,M)=>x+Math.abs(M),0);return g===0?c.map(x=>1/h):c.map(x=>x/g)}f.normalize=l;function m(c){c.parent&&c.parent.layout instanceof Me&&c.parent.fit()}})(We||={});var He=class extends it{constructor(n={}){super({layout:Vi.createLayout(n)});this._handleMoved=new j(this);this._pressData=null;this.addClass("lm-SplitPanel"),this.addClass("p-SplitPanel")}dispose(){this._releaseMouse(),super.dispose()}get orientation(){return this.layout.orientation}set orientation(n){this.layout.orientation=n}get alignment(){return this.layout.alignment}set alignment(n){this.layout.alignment=n}get spacing(){return this.layout.spacing}set spacing(n){this.layout.spacing=n}get renderer(){return this.layout.renderer}get handleMoved(){return this._handleMoved}get handles(){return this.layout.handles}relativeSizes(){return this.layout.relativeSizes()}setRelativeSizes(n,a=!0){this.layout.setRelativeSizes(n,a)}handleEvent(n){switch(n.type){case"mousedown":this._evtMouseDown(n);break;case"mousemove":this._evtMouseMove(n);break;case"mouseup":this._evtMouseUp(n);break;case"pointerdown":this._evtMouseDown(n);break;case"pointermove":this._evtMouseMove(n);break;case"pointerup":this._evtMouseUp(n);break;case"keydown":this._evtKeyDown(n);break;case"contextmenu":n.preventDefault(),n.stopPropagation();break}}onBeforeAttach(n){this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this)}onAfterDetach(n){this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this._releaseMouse()}onChildAdded(n){n.child.addClass("lm-SplitPanel-child"),n.child.addClass("p-SplitPanel-child"),this._releaseMouse()}onChildRemoved(n){n.child.removeClass("lm-SplitPanel-child"),n.child.removeClass("p-SplitPanel-child"),this._releaseMouse()}_evtKeyDown(n){this._pressData&&(n.preventDefault(),n.stopPropagation()),n.keyCode===27&&this._releaseMouse()}_evtMouseDown(n){if(n.button!==0)return;let a=this.layout,l=P.findFirstIndex(a.handles,x=>x.contains(n.target));if(l===-1)return;n.preventDefault(),n.stopPropagation(),document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("pointerup",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0);let m,f=a.handles[l],c=f.getBoundingClientRect();a.orientation==="horizontal"?m=n.clientX-c.left:m=n.clientY-c.top;let h=window.getComputedStyle(f),g=ze.overrideCursor(h.cursor);this._pressData={index:l,delta:m,override:g}}_evtMouseMove(n){n.preventDefault(),n.stopPropagation();let a,l=this.layout,m=this.node.getBoundingClientRect();l.orientation==="horizontal"?a=n.clientX-m.left-this._pressData.delta:a=n.clientY-m.top-this._pressData.delta,l.moveHandle(this._pressData.index,a)}_evtMouseUp(n){n.button===0&&(n.preventDefault(),n.stopPropagation(),this._releaseMouse())}_releaseMouse(){!this._pressData||(this._pressData.override.dispose(),this._pressData=null,this._handleMoved.emit(),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("contextmenu",this,!0))}};(l=>{class e{createHandle(){let f=document.createElement("div");return f.className="lm-SplitPanel-handle",f.classList.add("p-SplitPanel-handle"),f}}l.Renderer=e,l.defaultRenderer=new e;function n(m){return Me.getStretch(m)}l.getStretch=n;function a(m,f){Me.setStretch(m,f)}l.setStretch=a})(He||={});var Vi;(t=>{function e(n){return n.layout||new Me({renderer:n.renderer||He.defaultRenderer,orientation:n.orientation,alignment:n.alignment,spacing:n.spacing})}t.createLayout=e})(Vi||={});var Ui=Qe(Ut());var En=function(e,t){return En=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])},En(e,t)};function Il(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");En(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Gt=function(){function e(t){this.type="text",this.content=t}return e}(),$t=function(){function e(t,n,a,l){this.type="element",this.tag=t,this.attrs=n,this.children=a,this.renderer=l}return e}(),hx=function(e){Il(t,e);function t(n,a,l){return e.call(this,n,a,[],l||void 0)||this}return t}($t);function ie(e){for(var t={},n,a=[],l=1,m=arguments.length;l<m;++l){var f=arguments[l];typeof f=="string"?a.push(new Gt(f)):f instanceof Gt||f instanceof $t?a.push(f):f instanceof Array?c(a,f):(l===1||l===2)&&f&&typeof f=="object"&&("render"in f?n=f:t=f)}return new $t(e,t,a,n);function c(h,g){for(var x=0,M=g;x<M.length;x++){var I=M[x];typeof I=="string"?h.push(new Gt(I)):(I instanceof Gt||I instanceof $t)&&h.push(I)}}}(function(e){e.a=e.bind(void 0,"a"),e.abbr=e.bind(void 0,"abbr"),e.address=e.bind(void 0,"address"),e.area=e.bind(void 0,"area"),e.article=e.bind(void 0,"article"),e.aside=e.bind(void 0,"aside"),e.audio=e.bind(void 0,"audio"),e.b=e.bind(void 0,"b"),e.bdi=e.bind(void 0,"bdi"),e.bdo=e.bind(void 0,"bdo"),e.blockquote=e.bind(void 0,"blockquote"),e.br=e.bind(void 0,"br"),e.button=e.bind(void 0,"button"),e.canvas=e.bind(void 0,"canvas"),e.caption=e.bind(void 0,"caption"),e.cite=e.bind(void 0,"cite"),e.code=e.bind(void 0,"code"),e.col=e.bind(void 0,"col"),e.colgroup=e.bind(void 0,"colgroup"),e.data=e.bind(void 0,"data"),e.datalist=e.bind(void 0,"datalist"),e.dd=e.bind(void 0,"dd"),e.del=e.bind(void 0,"del"),e.dfn=e.bind(void 0,"dfn"),e.div=e.bind(void 0,"div"),e.dl=e.bind(void 0,"dl"),e.dt=e.bind(void 0,"dt"),e.em=e.bind(void 0,"em"),e.embed=e.bind(void 0,"embed"),e.fieldset=e.bind(void 0,"fieldset"),e.figcaption=e.bind(void 0,"figcaption"),e.figure=e.bind(void 0,"figure"),e.footer=e.bind(void 0,"footer"),e.form=e.bind(void 0,"form"),e.h1=e.bind(void 0,"h1"),e.h2=e.bind(void 0,"h2"),e.h3=e.bind(void 0,"h3"),e.h4=e.bind(void 0,"h4"),e.h5=e.bind(void 0,"h5"),e.h6=e.bind(void 0,"h6"),e.header=e.bind(void 0,"header"),e.hr=e.bind(void 0,"hr"),e.i=e.bind(void 0,"i"),e.iframe=e.bind(void 0,"iframe"),e.img=e.bind(void 0,"img"),e.input=e.bind(void 0,"input"),e.ins=e.bind(void 0,"ins"),e.kbd=e.bind(void 0,"kbd"),e.label=e.bind(void 0,"label"),e.legend=e.bind(void 0,"legend"),e.li=e.bind(void 0,"li"),e.main=e.bind(void 0,"main"),e.map=e.bind(void 0,"map"),e.mark=e.bind(void 0,"mark"),e.meter=e.bind(void 0,"meter"),e.nav=e.bind(void 0,"nav"),e.noscript=e.bind(void 0,"noscript"),e.object=e.bind(void 0,"object"),e.ol=e.bind(void 0,"ol"),e.optgroup=e.bind(void 0,"optgroup"),e.option=e.bind(void 0,"option"),e.output=e.bind(void 0,"output"),e.p=e.bind(void 0,"p"),e.param=e.bind(void 0,"param"),e.pre=e.bind(void 0,"pre"),e.progress=e.bind(void 0,"progress"),e.q=e.bind(void 0,"q"),e.rp=e.bind(void 0,"rp"),e.rt=e.bind(void 0,"rt"),e.ruby=e.bind(void 0,"ruby"),e.s=e.bind(void 0,"s"),e.samp=e.bind(void 0,"samp"),e.section=e.bind(void 0,"section"),e.select=e.bind(void 0,"select"),e.small=e.bind(void 0,"small"),e.source=e.bind(void 0,"source"),e.span=e.bind(void 0,"span"),e.strong=e.bind(void 0,"strong"),e.sub=e.bind(void 0,"sub"),e.summary=e.bind(void 0,"summary"),e.sup=e.bind(void 0,"sup"),e.table=e.bind(void 0,"table"),e.tbody=e.bind(void 0,"tbody"),e.td=e.bind(void 0,"td"),e.textarea=e.bind(void 0,"textarea"),e.tfoot=e.bind(void 0,"tfoot"),e.th=e.bind(void 0,"th"),e.thead=e.bind(void 0,"thead"),e.time=e.bind(void 0,"time"),e.title=e.bind(void 0,"title"),e.tr=e.bind(void 0,"tr"),e.track=e.bind(void 0,"track"),e.u=e.bind(void 0,"u"),e.ul=e.bind(void 0,"ul"),e.var_=e.bind(void 0,"var"),e.video=e.bind(void 0,"video"),e.wbr=e.bind(void 0,"wbr")})(ie||(ie={}));var ot;(function(e){function t(a){return $e.createDOMNode(a)}e.realize=t;function n(a,l){var m=$e.hostMap.get(l)||[],f=$e.asContentArray(a);$e.hostMap.set(l,f),$e.updateContent(l,m,f)}e.render=n})(ot||(ot={}));var $e;(function(e){e.hostMap=new WeakMap;function t(b){return b?b instanceof Array?b:[b]:[]}e.asContentArray=t;function n(b){var v=arguments[1]||null,w=arguments[2]||null;if(v)v.insertBefore(n(b),w);else{if(b.type==="text")return document.createTextNode(b.content);if(v=document.createElement(b.tag),f(v,b.attrs),b.renderer)return b.renderer.render(v,{attrs:b.attrs,children:b.children}),v;for(var y=0,k=b.children.length;y<k;++y)n(b.children[y],v)}return v}e.createDOMNode=n;function a(b,v,w){if(v!==w){for(var y=I(b,v),k=v.slice(),T=b.firstChild,E=w.length,S=0;S<E;++S){if(S>=k.length){n(w[S],b);continue}var L=k[S],A=w[S];if(L===A){T=T.nextSibling;continue}if(L.type==="text"&&A.type==="text"){T.textContent!==A.content&&(T.textContent=A.content),T=T.nextSibling;continue}if(L.type==="text"||A.type==="text"){P.insert(k,S,A),n(A,b,T);continue}if(!L.renderer!=!A.renderer){P.insert(k,S,A),n(A,b,T);continue}var u=A.attrs.key;if(u&&u in y){var d=y[u];d.vNode!==L&&(P.move(k,k.indexOf(d.vNode,S+1),S),b.insertBefore(d.element,T),L=d.vNode,T=d.element)}if(L===A){T=T.nextSibling;continue}var r=L.attrs.key;if(r&&r!==u){P.insert(k,S,A),n(A,b,T);continue}if(L.tag!==A.tag){P.insert(k,S,A),n(A,b,T);continue}c(T,L.attrs,A.attrs),A.renderer?A.renderer.render(T,{attrs:A.attrs,children:A.children}):a(T,L.children,A.children),T=T.nextSibling}l(b,k,E,!0)}}e.updateContent=a;function l(b,v,w,y){for(var k=v.length-1;k>=w;--k){var T=v[k],E=y?b.lastChild:b.childNodes[k];T.type==="text"||(T.renderer&&T.renderer.unrender?T.renderer.unrender(E,{attrs:T.attrs,children:T.children}):l(E,T.children,0,!1)),y&&b.removeChild(E)}}var m={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function f(b,v){for(var w in v)w in m||(w.substr(0,2)==="on"?b[w]=v[w]:b.setAttribute(w,v[w]));v.className!==void 0&&b.setAttribute("class",v.className),v.htmlFor!==void 0&&b.setAttribute("for",v.htmlFor),v.dataset&&h(b,v.dataset),v.style&&x(b,v.style)}function c(b,v,w){if(v!==w){var y;for(y in v)y in m||y in w||(y.substr(0,2)==="on"?b[y]=null:b.removeAttribute(y));for(y in w)y in m||v[y]===w[y]||(y.substr(0,2)==="on"?b[y]=w[y]:b.setAttribute(y,w[y]));v.className!==w.className&&(w.className!==void 0?b.setAttribute("class",w.className):b.removeAttribute("class")),v.htmlFor!==w.htmlFor&&(w.htmlFor!==void 0?b.setAttribute("for",w.htmlFor):b.removeAttribute("for")),v.dataset!==w.dataset&&g(b,v.dataset||{},w.dataset||{}),v.style!==w.style&&M(b,v.style||{},w.style||{})}}function h(b,v){for(var w in v)b.setAttribute("data-"+w,v[w])}function g(b,v,w){for(var y in v)y in w||b.removeAttribute("data-"+y);for(var k in w)v[k]!==w[k]&&b.setAttribute("data-"+k,w[k])}function x(b,v){var w=b.style,y;for(y in v)w[y]=v[y]}function M(b,v,w){var y=b.style,k;for(k in v)k in w||(y[k]="");for(k in w)v[k]!==w[k]&&(y[k]=w[k])}function I(b,v){for(var w=b.firstChild,y=Object.create(null),k=0,T=v;k<T.length;k++){var E=T[k];E.type==="element"&&E.attrs.key&&(y[E.attrs.key]={vNode:E,element:w}),w=w.nextSibling}return y}})($e||($e={}));var he=class extends B{constructor(n={}){super({node:Te.createNode()});this._currentIndex=-1;this._titles=[];this._titlesEditable=!1;this._previousTitle=null;this._dragData=null;this._addButtonEnabled=!1;this._tabMoved=new j(this);this._currentChanged=new j(this);this._addRequested=new j(this);this._tabCloseRequested=new j(this);this._tabDetachRequested=new j(this);this._tabActivateRequested=new j(this);this.addClass("lm-TabBar"),this.addClass("p-TabBar"),this.contentNode.setAttribute("role","tablist"),this.setFlag(B.Flag.DisallowLayout),this._document=n.document||document,this.tabsMovable=n.tabsMovable||!1,this.titlesEditable=n.titlesEditable||!1,this.allowDeselect=n.allowDeselect||!1,this.addButtonEnabled=n.addButtonEnabled||!1,this.insertBehavior=n.insertBehavior||"select-tab-if-needed",this.name=n.name||"",this.orientation=n.orientation||"horizontal",this.removeBehavior=n.removeBehavior||"select-tab-after",this.renderer=n.renderer||he.defaultRenderer}dispose(){this._releaseMouse(),this._titles.length=0,this._previousTitle=null,super.dispose()}get currentChanged(){return this._currentChanged}get tabMoved(){return this._tabMoved}get tabActivateRequested(){return this._tabActivateRequested}get addRequested(){return this._addRequested}get tabCloseRequested(){return this._tabCloseRequested}get tabDetachRequested(){return this._tabDetachRequested}get document(){return this._document}get titlesEditable(){return this._titlesEditable}set titlesEditable(n){this._titlesEditable=n}get currentTitle(){return this._titles[this._currentIndex]||null}set currentTitle(n){this.currentIndex=n?this._titles.indexOf(n):-1}get currentIndex(){return this._currentIndex}set currentIndex(n){if((n<0||n>=this._titles.length)&&(n=-1),this._currentIndex===n)return;let a=this._currentIndex,l=this._titles[a]||null,m=n,f=this._titles[m]||null;this._currentIndex=m,this._previousTitle=l,this.update(),this._currentChanged.emit({previousIndex:a,previousTitle:l,currentIndex:m,currentTitle:f})}get name(){return this._name}set name(n){this._name=n,n?this.contentNode.setAttribute("aria-label",n):this.contentNode.removeAttribute("aria-label")}get orientation(){return this._orientation}set orientation(n){this._orientation!==n&&(this._releaseMouse(),this._orientation=n,this.dataset.orientation=n,this.contentNode.setAttribute("aria-orientation",n))}get addButtonEnabled(){return this._addButtonEnabled}set addButtonEnabled(n){this._addButtonEnabled!==n&&(this._addButtonEnabled=n,n?this.addButtonNode.classList.remove("lm-mod-hidden"):this.addButtonNode.classList.add("lm-mod-hidden"))}get titles(){return this._titles}get contentNode(){return this.node.getElementsByClassName("lm-TabBar-content")[0]}get addButtonNode(){return this.node.getElementsByClassName("lm-TabBar-addButton")[0]}addTab(n){return this.insertTab(this._titles.length,n)}insertTab(n,a){this._releaseMouse();let l=Te.asTitle(a),m=this._titles.indexOf(l),f=Math.max(0,Math.min(n,this._titles.length));return m===-1?(P.insert(this._titles,f,l),l.changed.connect(this._onTitleChanged,this),this.update(),this._adjustCurrentForInsert(f,l),l):(f===this._titles.length&&f--,m===f||(P.move(this._titles,m,f),this.update(),this._adjustCurrentForMove(m,f)),l)}removeTab(n){this.removeTabAt(this._titles.indexOf(n))}removeTabAt(n){this._releaseMouse();let a=P.removeAt(this._titles,n);!a||(a.changed.disconnect(this._onTitleChanged,this),a===this._previousTitle&&(this._previousTitle=null),this.update(),this._adjustCurrentForRemove(n,a))}clearTabs(){if(this._titles.length===0)return;this._releaseMouse();for(let l of this._titles)l.changed.disconnect(this._onTitleChanged,this);let n=this.currentIndex,a=this.currentTitle;this._currentIndex=-1,this._previousTitle=null,this._titles.length=0,this.update(),n!==-1&&this._currentChanged.emit({previousIndex:n,previousTitle:a,currentIndex:-1,currentTitle:null})}releaseMouse(){this._releaseMouse()}handleEvent(n){switch(n.type){case"mousedown":this._evtMouseDown(n);break;case"mousemove":this._evtMouseMove(n);break;case"mouseup":this._evtMouseUp(n);break;case"pointerdown":this._evtMouseDown(n);break;case"pointermove":this._evtMouseMove(n);break;case"pointerup":this._evtMouseUp(n);break;case"dblclick":this._evtDblClick(n);break;case"keydown":this._evtKeyDown(n);break;case"contextmenu":n.preventDefault(),n.stopPropagation();break}}onBeforeAttach(n){this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this),this.node.addEventListener("dblclick",this)}onAfterDetach(n){this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this.node.removeEventListener("dblclick",this),this._releaseMouse()}onUpdateRequest(n){let a=this._titles,l=this.renderer,m=this.currentTitle,f=new Array(a.length);for(let c=0,h=a.length;c<h;++c){let g=a[c],x=g===m,M=x?h:h-c-1;f[c]=l.renderTab({title:g,current:x,zIndex:M})}ot.render(f,this.contentNode)}_evtDblClick(n){if(!this.titlesEditable)return;let a=this.contentNode.children,l=P.findFirstIndex(a,c=>X.hitTest(c,n.clientX,n.clientY));if(l===-1)return;let m=this.titles[l],f=a[l].querySelector(".lm-TabBar-tabLabel");if(f&&f.contains(n.target)){let c=m.label||"",h=f.innerHTML;f.innerHTML="";let g=document.createElement("input");g.classList.add("lm-TabBar-tabInput"),g.value=c,f.appendChild(g);let x=()=>{g.removeEventListener("blur",x),f.innerHTML=h};g.addEventListener("dblclick",M=>M.stopPropagation()),g.addEventListener("blur",x),g.addEventListener("keydown",M=>{M.key==="Enter"?(g.value!==""&&(m.label=m.caption=g.value),x()):M.key==="Escape"&&x()}),g.select(),g.focus(),f.children.length>0&&f.children[0].focus()}}_evtKeyDown(n){n.preventDefault(),n.stopPropagation(),n.keyCode===27&&this._releaseMouse()}_evtMouseDown(n){if(n.button!==0&&n.button!==1||this._dragData)return;let a=this.addButtonEnabled&&this.addButtonNode.contains(n.target),l=this.contentNode.children,m=P.findFirstIndex(l,c=>X.hitTest(c,n.clientX,n.clientY));if(m===-1&&!a||(n.preventDefault(),n.stopPropagation(),this._dragData={tab:l[m],index:m,pressX:n.clientX,pressY:n.clientY,tabPos:-1,tabSize:-1,tabPressPos:-1,targetIndex:-1,tabLayout:null,contentRect:null,override:null,dragActive:!1,dragAborted:!1,detachRequested:!1},this.document.addEventListener("mouseup",this,!0),this.document.addEventListener("pointerup",this,!0),n.button===1||a))return;let f=l[m].querySelector(this.renderer.closeIconSelector);f&&f.contains(n.target)||(this.tabsMovable&&(this.document.addEventListener("mousemove",this,!0),this.document.addEventListener("pointermove",this,!0),this.document.addEventListener("keydown",this,!0),this.document.addEventListener("contextmenu",this,!0)),this.allowDeselect&&this.currentIndex===m?this.currentIndex=-1:this.currentIndex=m,this.currentIndex!==-1&&this._tabActivateRequested.emit({index:this.currentIndex,title:this.currentTitle}))}_evtMouseMove(n){let a=this._dragData;if(!a)return;n.preventDefault(),n.stopPropagation();let l=this.contentNode.children;if(!(!a.dragActive&&!Te.dragExceeded(a,n))){if(!a.dragActive){let m=a.tab.getBoundingClientRect();this._orientation==="horizontal"?(a.tabPos=a.tab.offsetLeft,a.tabSize=m.width,a.tabPressPos=a.pressX-m.left):(a.tabPos=a.tab.offsetTop,a.tabSize=m.height,a.tabPressPos=a.pressY-m.top),a.tabLayout=Te.snapTabLayout(l,this._orientation),a.contentRect=this.contentNode.getBoundingClientRect(),a.override=ze.overrideCursor("default"),a.tab.classList.add("lm-mod-dragging"),this.addClass("lm-mod-dragging"),a.tab.classList.add("p-mod-dragging"),this.addClass("p-mod-dragging"),a.dragActive=!0}if(!a.detachRequested&&Te.detachExceeded(a,n)){a.detachRequested=!0;let m=a.index,f=n.clientX,c=n.clientY,h=l[m],g=this._titles[m];if(this._tabDetachRequested.emit({index:m,title:g,tab:h,clientX:f,clientY:c}),a.dragAborted)return}Te.layoutTabs(l,a,n,this._orientation)}}_evtMouseUp(n){if(n.button!==0&&n.button!==1)return;let a=this._dragData;if(!a)return;if(n.preventDefault(),n.stopPropagation(),this.document.removeEventListener("mousemove",this,!0),this.document.removeEventListener("mouseup",this,!0),this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),!a.dragActive){if(this._dragData=null,this.addButtonEnabled&&this.addButtonNode.contains(n.target)){this._addRequested.emit(void 0);return}let f=this.contentNode.children,c=P.findFirstIndex(f,x=>X.hitTest(x,n.clientX,n.clientY));if(c!==a.index)return;let h=this._titles[c];if(!h.closable)return;if(n.button===1){this._tabCloseRequested.emit({index:c,title:h});return}let g=f[c].querySelector(this.renderer.closeIconSelector);if(g&&g.contains(n.target)){this._tabCloseRequested.emit({index:c,title:h});return}return}if(n.button!==0)return;Te.finalizeTabPosition(a,this._orientation),a.tab.classList.remove("lm-mod-dragging"),a.tab.classList.remove("p-mod-dragging");let l=Te.parseTransitionDuration(a.tab);setTimeout(()=>{if(a.dragAborted)return;this._dragData=null,Te.resetTabPositions(this.contentNode.children,this._orientation),a.override.dispose(),this.removeClass("lm-mod-dragging"),this.removeClass("p-mod-dragging");let m=a.index,f=a.targetIndex;f===-1||m===f||(P.move(this._titles,m,f),this._adjustCurrentForMove(m,f),this._tabMoved.emit({fromIndex:m,toIndex:f,title:this._titles[f]}),W.sendMessage(this,B.Msg.UpdateRequest))},l)}_releaseMouse(){let n=this._dragData;!n||(this._dragData=null,this.document.removeEventListener("mousemove",this,!0),this.document.removeEventListener("mouseup",this,!0),this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),n.dragAborted=!0,n.dragActive&&(Te.resetTabPositions(this.contentNode.children,this._orientation),n.override.dispose(),n.tab.classList.remove("lm-mod-dragging"),this.removeClass("lm-mod-dragging"),n.tab.classList.remove("p-mod-dragging"),this.removeClass("p-mod-dragging")))}_adjustCurrentForInsert(n,a){let l=this.currentTitle,m=this._currentIndex,f=this.insertBehavior;if(f==="select-tab"||f==="select-tab-if-needed"&&m===-1){this._currentIndex=n,this._previousTitle=l,this._currentChanged.emit({previousIndex:m,previousTitle:l,currentIndex:n,currentTitle:a});return}m>=n&&this._currentIndex++}_adjustCurrentForMove(n,a){this._currentIndex===n?this._currentIndex=a:this._currentIndex<n&&this._currentIndex>=a?this._currentIndex++:this._currentIndex>n&&this._currentIndex<=a&&this._currentIndex--}_adjustCurrentForRemove(n,a){let l=this._currentIndex,m=this.removeBehavior;if(l!==n){l>n&&this._currentIndex--;return}if(this._titles.length===0){this._currentIndex=-1,this._currentChanged.emit({previousIndex:n,previousTitle:a,currentIndex:-1,currentTitle:null});return}if(m==="select-tab-after"){this._currentIndex=Math.min(n,this._titles.length-1),this._currentChanged.emit({previousIndex:n,previousTitle:a,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}if(m==="select-tab-before"){this._currentIndex=Math.max(0,n-1),this._currentChanged.emit({previousIndex:n,previousTitle:a,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}if(m==="select-previous-tab"){this._previousTitle?(this._currentIndex=this._titles.indexOf(this._previousTitle),this._previousTitle=null):this._currentIndex=Math.min(n,this._titles.length-1),this._currentChanged.emit({previousIndex:n,previousTitle:a,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}this._currentIndex=-1,this._currentChanged.emit({previousIndex:n,previousTitle:a,currentIndex:-1,currentTitle:null})}_onTitleChanged(n){this.update()}};(a=>{let l=class{constructor(){this.closeIconSelector=".lm-TabBar-tabCloseIcon";this._tabID=0;this._tabKeys=new WeakMap;this._uuid=++l._nInstance}renderTab(f){let c=f.title.caption,h=this.createTabKey(f),g=h,x=this.createTabStyle(f),M=this.createTabClass(f),I=this.createTabDataset(f),b=this.createTabARIA(f);return f.title.closable?ie.li({id:g,key:h,className:M,title:c,style:x,dataset:I,...b},this.renderIcon(f),this.renderLabel(f),this.renderCloseIcon(f)):ie.li({id:g,key:h,className:M,title:c,style:x,dataset:I,...b},this.renderIcon(f),this.renderLabel(f))}renderIcon(f){let{title:c}=f,h=this.createIconClass(f);return typeof c.icon=="string"?ie.div({className:h},c.iconLabel):ie.div({className:h},c.icon,c.iconLabel)}renderLabel(f){return ie.div({className:"lm-TabBar-tabLabel p-TabBar-tabLabel"},f.title.label)}renderCloseIcon(f){return ie.div({className:"lm-TabBar-tabCloseIcon p-TabBar-tabCloseIcon"})}createTabKey(f){let c=this._tabKeys.get(f.title);return c===void 0&&(c=`tab-key-${this._uuid}-${this._tabID++}`,this._tabKeys.set(f.title,c)),c}createTabStyle(f){return{zIndex:`${f.zIndex}`}}createTabClass(f){let c="lm-TabBar-tab";return c+=" p-TabBar-tab",f.title.className&&(c+=` ${f.title.className}`),f.title.closable&&(c+=" lm-mod-closable",c+=" p-mod-closable"),f.current&&(c+=" lm-mod-current",c+=" p-mod-current"),c}createTabDataset(f){return f.title.dataset}createTabARIA(f){return{role:"tab","aria-selected":f.current.toString()}}createIconClass(f){let c="lm-TabBar-tabIcon";c+=" p-TabBar-tabIcon";let h=f.title.iconClass;return h?`${c} ${h}`:c}},e=l;e._nInstance=0,a.Renderer=e,a.defaultRenderer=new e,a.addButtonSelector=".lm-TabBar-addButton"})(he||={});var Te;(M=>{M.DRAG_THRESHOLD=5,M.DETACH_THRESHOLD=20;function n(){let I=document.createElement("div"),b=document.createElement("ul");b.setAttribute("role","tablist"),b.className="lm-TabBar-content",b.classList.add("p-TabBar-content"),I.appendChild(b);let v=document.createElement("div");return v.className="lm-TabBar-addButton lm-mod-hidden",I.appendChild(v),I}M.createNode=n;function a(I){return I instanceof Ge?I:new Ge(I)}M.asTitle=a;function l(I){let b=window.getComputedStyle(I);return 1e3*(parseFloat(b.transitionDuration)||0)}M.parseTransitionDuration=l;function m(I,b){let v=new Array(I.length);for(let w=0,y=I.length;w<y;++w){let k=I[w],T=window.getComputedStyle(k);b==="horizontal"?v[w]={pos:k.offsetLeft,size:k.offsetWidth,margin:parseFloat(T.marginLeft)||0}:v[w]={pos:k.offsetTop,size:k.offsetHeight,margin:parseFloat(T.marginTop)||0}}return v}M.snapTabLayout=m;function f(I,b){let v=Math.abs(b.clientX-I.pressX),w=Math.abs(b.clientY-I.pressY);return v>=5||w>=5}M.dragExceeded=f;function c(I,b){let v=I.contentRect;return b.clientX<v.left-20||b.clientX>=v.right+20||b.clientY<v.top-20||b.clientY>=v.bottom+20}M.detachExceeded=c;function h(I,b,v,w){let y,k,T,E;w==="horizontal"?(y=b.pressX,k=v.clientX-b.contentRect.left,T=v.clientX,E=b.contentRect.width):(y=b.pressY,k=v.clientY-b.contentRect.top,T=v.clientY,E=b.contentRect.height);let S=b.index,L=k-b.tabPressPos,A=L+b.tabSize;for(let u=0,d=I.length;u<d;++u){let r,i=b.tabLayout[u],o=i.pos+(i.size>>1);if(u<b.index&&L<o)r=`${b.tabSize+b.tabLayout[u+1].margin}px`,S=Math.min(S,u);else if(u>b.index&&A>o)r=`${-b.tabSize-i.margin}px`,S=Math.max(S,u);else if(u===b.index){let p=T-y,s=E-(b.tabPos+b.tabSize);r=`${Math.max(-b.tabPos,Math.min(p,s))}px`}else r="";w==="horizontal"?I[u].style.left=r:I[u].style.top=r}b.targetIndex=S}M.layoutTabs=h;function g(I,b){let v;b==="horizontal"?v=I.contentRect.width:v=I.contentRect.height;let w;if(I.targetIndex===I.index)w=0;else if(I.targetIndex>I.index){let T=I.tabLayout[I.targetIndex];w=T.pos+T.size-I.tabSize-I.tabPos}else w=I.tabLayout[I.targetIndex].pos-I.tabPos;let y=v-(I.tabPos+I.tabSize),k=Math.max(-I.tabPos,Math.min(w,y));b==="horizontal"?I.tab.style.left=`${k}px`:I.tab.style.top=`${k}px`}M.finalizeTabPosition=g;function x(I,b){N(I,v=>{b==="horizontal"?v.style.left="":v.style.top=""})}M.resetTabPositions=x})(Te||={});var Yt=class extends Se{constructor(n){super();this._spacing=4;this._dirty=!1;this._root=null;this._box=null;this._items=new Map;this.renderer=n.renderer,n.spacing!==void 0&&(this._spacing=kn.clampDimension(n.spacing)),this._document=n.document||document,this._hiddenMode=n.hiddenMode!==void 0?n.hiddenMode:B.HiddenMode.Display}dispose(){let n=this.iter();this._items.forEach(a=>{a.dispose()}),this._box=null,this._root=null,this._items.clear(),N(n,a=>{a.dispose()}),super.dispose()}get hiddenMode(){return this._hiddenMode}set hiddenMode(n){this._hiddenMode!==n&&(this._hiddenMode=n,N(this.tabBars(),a=>{a.titles.length>1&&a.titles.forEach(l=>{l.owner.hiddenMode=this._hiddenMode})}))}get spacing(){return this._spacing}set spacing(n){n=kn.clampDimension(n),this._spacing!==n&&(this._spacing=n,this.parent&&this.parent.fit())}get isEmpty(){return this._root===null}iter(){return this._root?this._root.iterAllWidgets():ge()}widgets(){return this._root?this._root.iterUserWidgets():ge()}selectedWidgets(){return this._root?this._root.iterSelectedWidgets():ge()}tabBars(){return this._root?this._root.iterTabBars():ge()}handles(){return this._root?this._root.iterHandles():ge()}moveHandle(n,a,l){let m=n.classList.contains("lm-mod-hidden");if(m=m||n.classList.contains("p-mod-hidden"),!this._root||m)return;let f=this._root.findSplitNode(n);if(!f)return;let c;f.node.orientation==="horizontal"?c=a-n.offsetLeft:c=l-n.offsetTop,c!==0&&(f.node.holdSizes(),Fe.adjust(f.node.sizers,f.index,c),this.parent&&this.parent.update())}saveLayout(){return this._root?(this._root.holdAllSizes(),{main:this._root.createConfig()}):{main:null}}restoreLayout(n){let a=new Set,l;n.main?l=ee.normalizeAreaConfig(n.main,a):l=null;let m=this.widgets(),f=this.tabBars(),c=this.handles();this._root=null,N(m,h=>{a.has(h)||(h.parent=null)}),N(f,h=>{h.dispose()}),N(c,h=>{h.parentNode&&h.parentNode.removeChild(h)}),a.forEach(h=>{h.parent=this.parent}),l?this._root=ee.realizeAreaConfig(l,{createTabBar:h=>this._createTabBar(),createHandle:()=>this._createHandle()},this._document):this._root=null,this.parent&&(a.forEach(h=>{this.attachWidget(h)}),this.parent.fit())}addWidget(n,a={}){let l=a.ref||null,m=a.mode||"tab-after",f=null;if(this._root&&l&&(f=this._root.findTabNode(l)),l&&!f)throw new Error("Reference widget is not in the layout.");switch(n.parent=this.parent,m){case"tab-after":this._insertTab(n,l,f,!0);break;case"tab-before":this._insertTab(n,l,f,!1);break;case"split-top":this._insertSplit(n,l,f,"vertical",!1);break;case"split-left":this._insertSplit(n,l,f,"horizontal",!1);break;case"split-right":this._insertSplit(n,l,f,"horizontal",!0);break;case"split-bottom":this._insertSplit(n,l,f,"vertical",!0);break}!this.parent||(this.attachWidget(n),this.parent.fit())}removeWidget(n){this._removeWidget(n),this.parent&&(this.detachWidget(n),this.parent.fit())}hitTestTabAreas(n,a){if(!this._root||!this.parent||!this.parent.isVisible)return null;this._box||(this._box=X.boxSizing(this.parent.node));let l=this.parent.node.getBoundingClientRect(),m=n-l.left-this._box.borderLeft,f=a-l.top-this._box.borderTop,c=this._root.hitTestTabNodes(m,f);if(!c)return null;let{tabBar:h,top:g,left:x,width:M,height:I}=c,b=this._box.borderLeft+this._box.borderRight,v=this._box.borderTop+this._box.borderBottom,w=l.width-b-(x+M),y=l.height-v-(g+I);return{tabBar:h,x:m,y:f,top:g,left:x,right:w,bottom:y,width:M,height:I}}init(){super.init(),N(this,n=>{this.attachWidget(n)}),N(this.handles(),n=>{this.parent.node.appendChild(n)}),this.parent.fit()}attachWidget(n){this.parent.node!==n.node.parentNode&&(this._items.set(n,new tt(n)),this.parent.isAttached&&W.sendMessage(n,B.Msg.BeforeAttach),this.parent.node.appendChild(n.node),this.parent.isAttached&&W.sendMessage(n,B.Msg.AfterAttach))}detachWidget(n){if(this.parent.node!==n.node.parentNode)return;this.parent.isAttached&&W.sendMessage(n,B.Msg.BeforeDetach),this.parent.node.removeChild(n.node),this.parent.isAttached&&W.sendMessage(n,B.Msg.AfterDetach);let a=this._items.get(n);a&&(this._items.delete(n),a.dispose())}onBeforeShow(n){super.onBeforeShow(n),this.parent.update()}onBeforeAttach(n){super.onBeforeAttach(n),this.parent.fit()}onChildShown(n){this.parent.fit()}onChildHidden(n){this.parent.fit()}onResize(n){this.parent.isVisible&&this._update(n.width,n.height)}onUpdateRequest(n){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(n){this.parent.isAttached&&this._fit()}_removeWidget(n){if(!this._root)return;let a=this._root.findTabNode(n);if(!a)return;if(ee.removeAria(n),a.tabBar.titles.length>1){if(a.tabBar.removeTab(n.title),this._hiddenMode===B.HiddenMode.Scale&&a.tabBar.titles.length==1){let b=a.tabBar.titles[0].owner;b.hiddenMode=B.HiddenMode.Display}return}if(a.tabBar.dispose(),this._root===a){this._root=null;return}this._root.holdAllSizes();let l=a.parent;a.parent=null;let m=P.removeFirstOf(l.children,a),f=P.removeAt(l.handles,m);if(P.removeAt(l.sizers,m),f.parentNode&&f.parentNode.removeChild(f),l.children.length>1){l.syncHandles();return}let c=l.parent;l.parent=null;let h=l.children[0],g=l.handles[0];if(l.children.length=0,l.handles.length=0,l.sizers.length=0,g.parentNode&&g.parentNode.removeChild(g),this._root===l){h.parent=null,this._root=h;return}let x=c,M=x.children.indexOf(l);if(h instanceof ee.TabLayoutNode){h.parent=x,x.children[M]=h;return}let I=P.removeAt(x.handles,M);P.removeAt(x.children,M),P.removeAt(x.sizers,M),I.parentNode&&I.parentNode.removeChild(I);for(let b=0,v=h.children.length;b<v;++b){let w=h.children[b],y=h.handles[b],k=h.sizers[b];P.insert(x.children,M+b,w),P.insert(x.handles,M+b,y),P.insert(x.sizers,M+b,k),w.parent=x}h.children.length=0,h.handles.length=0,h.sizers.length=0,h.parent=null,x.syncHandles()}_insertTab(n,a,l,m){if(n===a)return;if(!this._root){let c=new ee.TabLayoutNode(this._createTabBar());c.tabBar.addTab(n.title),this._root=c,ee.addAria(n,c.tabBar);return}l||(l=this._root.findFirstTabNode()),l.tabBar.titles.indexOf(n.title)===-1&&(this._removeWidget(n),n.hide());let f;if(a?f=l.tabBar.titles.indexOf(a.title):f=l.tabBar.currentIndex,this._hiddenMode===B.HiddenMode.Scale)if(l.tabBar.titles.length===0)n.hiddenMode=B.HiddenMode.Display;else if(l.tabBar.titles.length==1){let c=l.tabBar.titles[0].owner;c.hiddenMode=B.HiddenMode.Scale}else n.hiddenMode=B.HiddenMode.Scale;else n.hiddenMode=this._hiddenMode;l.tabBar.insertTab(f+(m?1:0),n.title),ee.addAria(n,l.tabBar)}_insertSplit(n,a,l,m,f){if(n===a&&l&&l.tabBar.titles.length===1)return;this._removeWidget(n);let c=new ee.TabLayoutNode(this._createTabBar());if(c.tabBar.addTab(n.title),ee.addAria(n,c.tabBar),!this._root){this._root=c;return}if(!l||!l.parent){let I=this._splitRoot(m),b=f?I.children.length:0;I.normalizeSizes();let v=ee.createSizer(l?1:ee.GOLDEN_RATIO);P.insert(I.children,b,c),P.insert(I.sizers,b,v),P.insert(I.handles,b,this._createHandle()),c.parent=I,I.normalizeSizes(),I.syncHandles();return}let h=l.parent;if(h.orientation===m){let I=h.children.indexOf(l);h.normalizeSizes();let b=h.sizers[I].sizeHint/=2,v=I+(f?1:0);P.insert(h.children,v,c),P.insert(h.sizers,v,ee.createSizer(b)),P.insert(h.handles,v,this._createHandle()),c.parent=h,h.syncHandles();return}let g=P.removeFirstOf(h.children,l),x=new ee.SplitLayoutNode(m);x.normalized=!0,x.children.push(l),x.sizers.push(ee.createSizer(.5)),x.handles.push(this._createHandle()),l.parent=x;let M=f?1:0;P.insert(x.children,M,c),P.insert(x.sizers,M,ee.createSizer(.5)),P.insert(x.handles,M,this._createHandle()),c.parent=x,x.syncHandles(),P.insert(h.children,g,x),x.parent=h}_splitRoot(n){let a=this._root;if(a instanceof ee.SplitLayoutNode&&a.orientation===n)return a;let l=this._root=new ee.SplitLayoutNode(n);return a&&(l.children.push(a),l.sizers.push(ee.createSizer(0)),l.handles.push(this._createHandle()),a.parent=l),l}_fit(){let n=0,a=0;if(this._root){let f=this._root.fit(this._spacing,this._items);n=f.minWidth,a=f.minHeight}let l=this._box=X.boxSizing(this.parent.node);n+=l.horizontalSum,a+=l.verticalSum;let m=this.parent.node.style;m.minWidth=`${n}px`,m.minHeight=`${a}px`,this._dirty=!0,this.parent.parent&&W.sendMessage(this.parent.parent,B.Msg.FitRequest),this._dirty&&W.sendMessage(this.parent,B.Msg.UpdateRequest)}_update(n,a){if(this._dirty=!1,!this._root)return;n<0&&(n=this.parent.node.offsetWidth),a<0&&(a=this.parent.node.offsetHeight),this._box||(this._box=X.boxSizing(this.parent.node));let l=this._box.paddingTop,m=this._box.paddingLeft,f=n-this._box.horizontalSum,c=a-this._box.verticalSum;this._root.update(l,m,f,c,this._spacing,this._items)}_createTabBar(){let n=this.renderer.createTabBar(this._document);return n.orientation="horizontal",this.parent&&(n.parent=this.parent,this.attachWidget(n)),n}_createHandle(){let n=this.renderer.createHandle(),a=n.style;return a.position="absolute",a.top="0",a.left="0",a.width="0",a.height="0",this.parent&&this.parent.node.appendChild(n),n}},ee;(I=>{I.GOLDEN_RATIO=.618;function t(b){let v=new Pe;return v.sizeHint=b,v.size=b,v}I.createSizer=t;function n(b,v){let w;return b.type==="tab-area"?w=h(b,v):w=g(b,v),w}I.normalizeAreaConfig=n;function a(b,v,w){let y;return b.type==="tab-area"?y=x(b,v,w):y=M(b,v,w),y}I.realizeAreaConfig=a;class l{constructor(v){this.parent=null;this._top=0;this._left=0;this._width=0;this._height=0;let w=new Pe,y=new Pe;w.stretch=0,y.stretch=1,this.tabBar=v,this.sizers=[w,y]}get top(){return this._top}get left(){return this._left}get width(){return this._width}get height(){return this._height}iterAllWidgets(){return yn(Kt(this.tabBar),this.iterUserWidgets())}iterUserWidgets(){return Ve(this.tabBar.titles,v=>v.owner)}iterSelectedWidgets(){let v=this.tabBar.currentTitle;return v?Kt(v.owner):ge()}iterTabBars(){return Kt(this.tabBar)}iterHandles(){return ge()}findTabNode(v){return this.tabBar.titles.indexOf(v.title)!==-1?this:null}findSplitNode(v){return null}findFirstTabNode(){return this}hitTestTabNodes(v,w){return v<this._left||v>=this._left+this._width||w<this._top||w>=this._top+this._height?null:this}createConfig(){let v=this.tabBar.titles.map(y=>y.owner),w=this.tabBar.currentIndex;return{type:"tab-area",widgets:v,currentIndex:w}}holdAllSizes(){}fit(v,w){let y=0,k=0,T=1/0,E=1/0,S=w.get(this.tabBar),L=this.tabBar.currentTitle,A=L?w.get(L.owner):void 0,[u,d]=this.sizers;return S&&S.fit(),A&&A.fit(),S&&!S.isHidden?(y=Math.max(y,S.minWidth),k+=S.minHeight,u.minSize=S.minHeight,u.maxSize=S.maxHeight):(u.minSize=0,u.maxSize=0),A&&!A.isHidden?(y=Math.max(y,A.minWidth),k+=A.minHeight,d.minSize=A.minHeight,d.maxSize=1/0):(d.minSize=0,d.maxSize=1/0),{minWidth:y,minHeight:k,maxWidth:T,maxHeight:E}}update(v,w,y,k,T,E){this._top=w,this._left=v,this._width=y,this._height=k;let S=E.get(this.tabBar),L=this.tabBar.currentTitle,A=L?E.get(L.owner):void 0;if(Fe.calc(this.sizers,k),S&&!S.isHidden){let u=this.sizers[0].size;S.update(v,w,y,u),w+=u}if(A&&!A.isHidden){let u=this.sizers[1].size;A.update(v,w,y,u)}}}I.TabLayoutNode=l;class m{constructor(v){this.parent=null;this.normalized=!1;this.children=[];this.sizers=[];this.handles=[];this.orientation=v}iterAllWidgets(){let v=Ve(this.children,w=>w.iterAllWidgets());return new Ke(v)}iterUserWidgets(){let v=Ve(this.children,w=>w.iterUserWidgets());return new Ke(v)}iterSelectedWidgets(){let v=Ve(this.children,w=>w.iterSelectedWidgets());return new Ke(v)}iterTabBars(){let v=Ve(this.children,w=>w.iterTabBars());return new Ke(v)}iterHandles(){let v=Ve(this.children,w=>w.iterHandles());return yn(this.handles,new Ke(v))}findTabNode(v){for(let w=0,y=this.children.length;w<y;++w){let k=this.children[w].findTabNode(v);if(k)return k}return null}findSplitNode(v){let w=this.handles.indexOf(v);if(w!==-1)return{index:w,node:this};for(let y=0,k=this.children.length;y<k;++y){let T=this.children[y].findSplitNode(v);if(T)return T}return null}findFirstTabNode(){return this.children.length===0?null:this.children[0].findFirstTabNode()}hitTestTabNodes(v,w){for(let y=0,k=this.children.length;y<k;++y){let T=this.children[y].hitTestTabNodes(v,w);if(T)return T}return null}createConfig(){let v=this.orientation,w=this.createNormalizedSizes(),y=this.children.map(k=>k.createConfig());return{type:"split-area",orientation:v,children:y,sizes:w}}syncHandles(){N(this.handles,(v,w)=>{v.setAttribute("data-orientation",this.orientation),w===this.handles.length-1?(v.classList.add("lm-mod-hidden"),v.classList.add("p-mod-hidden")):(v.classList.remove("lm-mod-hidden"),v.classList.remove("p-mod-hidden"))})}holdSizes(){N(this.sizers,v=>{v.sizeHint=v.size})}holdAllSizes(){N(this.children,v=>v.holdAllSizes()),this.holdSizes()}normalizeSizes(){let v=this.sizers.length;if(v===0)return;this.holdSizes();let w=xn(this.sizers,(y,k)=>y+k.sizeHint,0);w===0?N(this.sizers,y=>{y.size=y.sizeHint=1/v}):N(this.sizers,y=>{y.size=y.sizeHint/=w}),this.normalized=!0}createNormalizedSizes(){let v=this.sizers.length;if(v===0)return[];let w=this.sizers.map(k=>k.size),y=xn(w,(k,T)=>k+T,0);return y===0?N(w,(k,T)=>{w[T]=1/v}):N(w,(k,T)=>{w[T]=k/y}),w}fit(v,w){let y=this.orientation==="horizontal",k=Math.max(0,this.children.length-1)*v,T=y?k:0,E=y?0:k,S=1/0,L=1/0;for(let A=0,u=this.children.length;A<u;++A){let d=this.children[A].fit(v,w);y?(E=Math.max(E,d.minHeight),T+=d.minWidth,this.sizers[A].minSize=d.minWidth):(T=Math.max(T,d.minWidth),E+=d.minHeight,this.sizers[A].minSize=d.minHeight)}return{minWidth:T,minHeight:E,maxWidth:S,maxHeight:L}}update(v,w,y,k,T,E){let S=this.orientation==="horizontal",L=Math.max(0,this.children.length-1)*T,A=Math.max(0,(S?y:k)-L);this.normalized&&(N(this.sizers,u=>{u.sizeHint*=A}),this.normalized=!1),Fe.calc(this.sizers,A);for(let u=0,d=this.children.length;u<d;++u){let r=this.children[u],i=this.sizers[u].size,o=this.handles[u].style;S?(r.update(v,w,i,k,T,E),v+=i,o.top=`${w}px`,o.left=`${v}px`,o.width=`${T}px`,o.height=`${k}px`,v+=T):(r.update(v,w,y,i,T,E),w+=i,o.top=`${w}px`,o.left=`${v}px`,o.width=`${y}px`,o.height=`${T}px`,w+=T)}}}I.SplitLayoutNode=m;function f(b,v){b.node.setAttribute("role","tabpanel");let w=v.renderer;if(w instanceof he.Renderer){let y=w.createTabKey({title:b.title,current:!1,zIndex:0});b.node.setAttribute("aria-labelledby",y)}}I.addAria=f;function c(b){b.node.removeAttribute("role"),b.node.removeAttribute("aria-labelledby")}I.removeAria=c;function h(b,v){if(b.widgets.length===0)return null;let w=[];if(N(b.widgets,k=>{v.has(k)||(v.add(k),w.push(k))}),w.length===0)return null;let y=b.currentIndex;return y!==-1&&(y<0||y>=w.length)&&(y=0),{type:"tab-area",widgets:w,currentIndex:y}}function g(b,v){let w=b.orientation,y=[],k=[];for(let T=0,E=b.children.length;T<E;++T){let S=n(b.children[T],v);!S||(S.type==="tab-area"||S.orientation!==w?(y.push(S),k.push(Math.abs(b.sizes[T]||0))):(y.push(...S.children),k.push(...S.sizes)))}return y.length===0?null:y.length===1?y[0]:{type:"split-area",orientation:w,children:y,sizes:k}}function x(b,v,w){let y=v.createTabBar(w);return N(b.widgets,k=>{k.hide(),y.addTab(k.title),I.addAria(k,y)}),y.currentIndex=b.currentIndex,new l(y)}function M(b,v,w){let y=new m(b.orientation);return N(b.children,(k,T)=>{let E=a(k,v,w),S=t(b.sizes[T]),L=v.createHandle();y.children.push(E),y.handles.push(L),y.sizers.push(S),E.parent=y}),y.syncHandles(),y.normalizeSizes(),y}})(ee||={});var Ae=class extends B{constructor(n={}){super();this._drag=null;this._tabsMovable=!0;this._tabsConstrained=!1;this._addButtonEnabled=!1;this._pressData=null;this._layoutModified=new j(this);this._addRequested=new j(this);this.addClass("lm-DockPanel"),this.addClass("p-DockPanel"),this._document=n.document||document,this._mode=n.mode||"multiple-document",this._renderer=n.renderer||Ae.defaultRenderer,this._edges=n.edges||J.DEFAULT_EDGES,n.tabsMovable!==void 0&&(this._tabsMovable=n.tabsMovable),n.tabsConstrained!==void 0&&(this._tabsConstrained=n.tabsConstrained),n.addButtonEnabled!==void 0&&(this._addButtonEnabled=n.addButtonEnabled),this.dataset.mode=this._mode;let a={createTabBar:()=>this._createTabBar(),createHandle:()=>this._createHandle()};this.layout=new Yt({document:this._document,renderer:a,spacing:n.spacing,hiddenMode:n.hiddenMode}),this.overlay=n.overlay||new Ae.Overlay,this.node.appendChild(this.overlay.node)}dispose(){this._releaseMouse(),this.overlay.hide(0),this._drag&&this._drag.dispose(),super.dispose()}get hiddenMode(){return this.layout.hiddenMode}set hiddenMode(n){this.layout.hiddenMode=n}get layoutModified(){return this._layoutModified}get addRequested(){return this._addRequested}get renderer(){return this.layout.renderer}get spacing(){return this.layout.spacing}set spacing(n){this.layout.spacing=n}get mode(){return this._mode}set mode(n){if(this._mode===n)return;this._mode=n,this.dataset.mode=n;let a=this.layout;switch(n){case"multiple-document":N(a.tabBars(),l=>{l.show()});break;case"single-document":a.restoreLayout(J.createSingleDocumentConfig(this));break;default:throw"unreachable"}W.postMessage(this,J.LayoutModified)}get tabsMovable(){return this._tabsMovable}set tabsMovable(n){this._tabsMovable=n,N(this.tabBars(),a=>{a.tabsMovable=n})}get tabsConstrained(){return this._tabsConstrained}set tabsConstrained(n){this._tabsConstrained=n}get addButtonEnabled(){return this._addButtonEnabled}set addButtonEnabled(n){this._addButtonEnabled=n,N(this.tabBars(),a=>{a.addButtonEnabled=n})}get isEmpty(){return this.layout.isEmpty}widgets(){return this.layout.widgets()}selectedWidgets(){return this.layout.selectedWidgets()}tabBars(){return this.layout.tabBars()}handles(){return this.layout.handles()}selectWidget(n){let a=It(this.tabBars(),l=>l.titles.indexOf(n.title)!==-1);if(!a)throw new Error("Widget is not contained in the dock panel.");a.currentTitle=n.title}activateWidget(n){this.selectWidget(n),n.activate()}saveLayout(){return this.layout.saveLayout()}restoreLayout(n){this._mode="multiple-document",this.layout.restoreLayout(n),(re.IS_EDGE||re.IS_IE)&&W.flush(),W.postMessage(this,J.LayoutModified)}addWidget(n,a={}){this._mode==="single-document"?this.layout.addWidget(n):this.layout.addWidget(n,a),W.postMessage(this,J.LayoutModified)}processMessage(n){n.type==="layout-modified"?this._layoutModified.emit(void 0):super.processMessage(n)}handleEvent(n){switch(n.type){case"lm-dragenter":this._evtDragEnter(n);break;case"lm-dragleave":this._evtDragLeave(n);break;case"lm-dragover":this._evtDragOver(n);break;case"lm-drop":this._evtDrop(n);break;case"mousedown":this._evtMouseDown(n);break;case"mousemove":this._evtMouseMove(n);break;case"mouseup":this._evtMouseUp(n);break;case"pointerdown":this._evtMouseDown(n);break;case"pointermove":this._evtMouseMove(n);break;case"pointerup":this._evtMouseUp(n);break;case"keydown":this._evtKeyDown(n);break;case"contextmenu":n.preventDefault(),n.stopPropagation();break}}onBeforeAttach(n){this.node.addEventListener("lm-dragenter",this),this.node.addEventListener("lm-dragleave",this),this.node.addEventListener("lm-dragover",this),this.node.addEventListener("lm-drop",this),this.node.addEventListener("mousedown",this),this.node.addEventListener("pointerdown",this)}onAfterDetach(n){this.node.removeEventListener("lm-dragenter",this),this.node.removeEventListener("lm-dragleave",this),this.node.removeEventListener("lm-dragover",this),this.node.removeEventListener("lm-drop",this),this.node.removeEventListener("mousedown",this),this.node.removeEventListener("pointerdown",this),this._releaseMouse()}onChildAdded(n){J.isGeneratedTabBarProperty.get(n.child)||(n.child.addClass("lm-DockPanel-widget"),n.child.addClass("p-DockPanel-widget"))}onChildRemoved(n){J.isGeneratedTabBarProperty.get(n.child)||(n.child.removeClass("lm-DockPanel-widget"),n.child.removeClass("p-DockPanel-widget"),W.postMessage(this,J.LayoutModified))}_evtDragEnter(n){n.mimeData.hasData("application/vnd.lumino.widget-factory")&&(n.preventDefault(),n.stopPropagation())}_evtDragLeave(n){n.preventDefault(),!(this._tabsConstrained&&n.source!==this)&&(n.stopPropagation(),this.overlay.hide(1))}_evtDragOver(n){n.preventDefault(),this._tabsConstrained&&n.source!==this||this._showOverlay(n.clientX,n.clientY)==="invalid"?n.dropAction="none":(n.stopPropagation(),n.dropAction=n.proposedAction)}_evtDrop(n){if(n.preventDefault(),this.overlay.hide(0),n.proposedAction==="none"){n.dropAction="none";return}let{clientX:a,clientY:l}=n,{zone:m,target:f}=J.findDropTarget(this,a,l,this._edges);if(this._tabsConstrained&&n.source!==this||m==="invalid"){n.dropAction="none";return}let h=n.mimeData.getData("application/vnd.lumino.widget-factory");if(typeof h!="function"){n.dropAction="none";return}let g=h();if(!(g instanceof B)){n.dropAction="none";return}if(g.contains(this)){n.dropAction="none";return}let x=f?J.getDropRef(f.tabBar):null;switch(m){case"root-all":this.addWidget(g);break;case"root-top":this.addWidget(g,{mode:"split-top"});break;case"root-left":this.addWidget(g,{mode:"split-left"});break;case"root-right":this.addWidget(g,{mode:"split-right"});break;case"root-bottom":this.addWidget(g,{mode:"split-bottom"});break;case"widget-all":this.addWidget(g,{mode:"tab-after",ref:x});break;case"widget-top":this.addWidget(g,{mode:"split-top",ref:x});break;case"widget-left":this.addWidget(g,{mode:"split-left",ref:x});break;case"widget-right":this.addWidget(g,{mode:"split-right",ref:x});break;case"widget-bottom":this.addWidget(g,{mode:"split-bottom",ref:x});break;case"widget-tab":this.addWidget(g,{mode:"tab-after",ref:x});break;default:throw"unreachable"}n.dropAction=n.proposedAction,n.stopPropagation(),this.activateWidget(g)}_evtKeyDown(n){n.preventDefault(),n.stopPropagation(),n.keyCode===27&&(this._releaseMouse(),W.postMessage(this,J.LayoutModified))}_evtMouseDown(n){if(n.button!==0)return;let a=this.layout,l=n.target,m=It(a.handles(),M=>M.contains(l));if(!m)return;n.preventDefault(),n.stopPropagation(),this._document.addEventListener("keydown",this,!0),this._document.addEventListener("mouseup",this,!0),this._document.addEventListener("mousemove",this,!0),this._document.addEventListener("pointerup",this,!0),this._document.addEventListener("pointermove",this,!0),this._document.addEventListener("contextmenu",this,!0);let f=m.getBoundingClientRect(),c=n.clientX-f.left,h=n.clientY-f.top,g=window.getComputedStyle(m),x=ze.overrideCursor(g.cursor,this._document);this._pressData={handle:m,deltaX:c,deltaY:h,override:x}}_evtMouseMove(n){if(!this._pressData)return;n.preventDefault(),n.stopPropagation();let a=this.node.getBoundingClientRect(),l=n.clientX-a.left-this._pressData.deltaX,m=n.clientY-a.top-this._pressData.deltaY;this.layout.moveHandle(this._pressData.handle,l,m)}_evtMouseUp(n){n.button===0&&(n.preventDefault(),n.stopPropagation(),this._releaseMouse(),W.postMessage(this,J.LayoutModified))}_releaseMouse(){!this._pressData||(this._pressData.override.dispose(),this._pressData=null,this._document.removeEventListener("keydown",this,!0),this._document.removeEventListener("mouseup",this,!0),this._document.removeEventListener("mousemove",this,!0),this._document.removeEventListener("pointerup",this,!0),this._document.removeEventListener("pointermove",this,!0),this._document.removeEventListener("contextmenu",this,!0))}_showOverlay(n,a){let{zone:l,target:m}=J.findDropTarget(this,n,a,this._edges);if(l==="invalid")return this.overlay.hide(100),l;let f,c,h,g,x=X.boxSizing(this.node),M=this.node.getBoundingClientRect();switch(l){case"root-all":f=x.paddingTop,c=x.paddingLeft,h=x.paddingRight,g=x.paddingBottom;break;case"root-top":f=x.paddingTop,c=x.paddingLeft,h=x.paddingRight,g=M.height*J.GOLDEN_RATIO;break;case"root-left":f=x.paddingTop,c=x.paddingLeft,h=M.width*J.GOLDEN_RATIO,g=x.paddingBottom;break;case"root-right":f=x.paddingTop,c=M.width*J.GOLDEN_RATIO,h=x.paddingRight,g=x.paddingBottom;break;case"root-bottom":f=M.height*J.GOLDEN_RATIO,c=x.paddingLeft,h=x.paddingRight,g=x.paddingBottom;break;case"widget-all":f=m.top,c=m.left,h=m.right,g=m.bottom;break;case"widget-top":f=m.top,c=m.left,h=m.right,g=m.bottom+m.height/2;break;case"widget-left":f=m.top,c=m.left,h=m.right+m.width/2,g=m.bottom;break;case"widget-right":f=m.top,c=m.left+m.width/2,h=m.right,g=m.bottom;break;case"widget-bottom":f=m.top+m.height/2,c=m.left,h=m.right,g=m.bottom;break;case"widget-tab":let I=m.tabBar.node.getBoundingClientRect().height;f=m.top,c=m.left,h=m.right,g=m.bottom+m.height-I;break;default:throw"unreachable"}return this.overlay.show({top:f,left:c,right:h,bottom:g}),l}_createTabBar(){let n=this._renderer.createTabBar(this._document);return J.isGeneratedTabBarProperty.set(n,!0),this._mode==="single-document"&&n.hide(),n.tabsMovable=this._tabsMovable,n.allowDeselect=!1,n.addButtonEnabled=this._addButtonEnabled,n.removeBehavior="select-previous-tab",n.insertBehavior="select-tab-if-needed",n.tabMoved.connect(this._onTabMoved,this),n.currentChanged.connect(this._onCurrentChanged,this),n.tabCloseRequested.connect(this._onTabCloseRequested,this),n.tabDetachRequested.connect(this._onTabDetachRequested,this),n.tabActivateRequested.connect(this._onTabActivateRequested,this),n.addRequested.connect(this._onTabAddRequested,this),n}_createHandle(){return this._renderer.createHandle()}_onTabMoved(){W.postMessage(this,J.LayoutModified)}_onCurrentChanged(n,a){let{previousTitle:l,currentTitle:m}=a;l&&l.owner.hide(),m&&m.owner.show(),(re.IS_EDGE||re.IS_IE)&&W.flush(),W.postMessage(this,J.LayoutModified)}_onTabAddRequested(n){this._addRequested.emit(n)}_onTabActivateRequested(n,a){a.title.owner.activate()}_onTabCloseRequested(n,a){a.title.owner.close()}_onTabDetachRequested(n,a){if(this._drag)return;n.releaseMouse();let{title:l,tab:m,clientX:f,clientY:c}=a,h=new Ui.MimeData,g=()=>l.owner;h.setData("application/vnd.lumino.widget-factory",g);let x=m.cloneNode(!0);this._drag=new ze({document:this._document,mimeData:h,dragImage:x,proposedAction:"move",supportedActions:"move",source:this}),m.classList.add("lm-mod-hidden"),m.classList.add("p-mod-hidden");let M=()=>{this._drag=null,m.classList.remove("lm-mod-hidden"),m.classList.remove("p-mod-hidden")};this._drag.start(f,c).then(M)}};(a=>{class e{constructor(){this._timer=-1;this._hidden=!0;this.node=document.createElement("div"),this.node.classList.add("lm-DockPanel-overlay"),this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-DockPanel-overlay"),this.node.classList.add("p-mod-hidden"),this.node.style.position="absolute"}show(m){let f=this.node.style;f.top=`${m.top}px`,f.left=`${m.left}px`,f.right=`${m.right}px`,f.bottom=`${m.bottom}px`,clearTimeout(this._timer),this._timer=-1,this._hidden&&(this._hidden=!1,this.node.classList.remove("lm-mod-hidden"),this.node.classList.remove("p-mod-hidden"))}hide(m){if(!this._hidden){if(m<=0){clearTimeout(this._timer),this._timer=-1,this._hidden=!0,this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-mod-hidden");return}this._timer===-1&&(this._timer=window.setTimeout(()=>{this._timer=-1,this._hidden=!0,this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-mod-hidden")},m))}}}a.Overlay=e;class t{createTabBar(m){let f=new he({document:m});return f.addClass("lm-DockPanel-tabBar"),f.addClass("p-DockPanel-tabBar"),f}createHandle(){let m=document.createElement("div");return m.className="lm-DockPanel-handle",m.classList.add("p-DockPanel-handle"),m}}a.Renderer=t,a.defaultRenderer=new t})(Ae||={});var J;(c=>{c.GOLDEN_RATIO=.618,c.DEFAULT_EDGES={top:12,right:40,bottom:40,left:40},c.LayoutModified=new je("layout-modified"),c.isGeneratedTabBarProperty=new le({name:"isGeneratedTabBar",create:()=>!1});function l(h){if(h.isEmpty)return{main:null};let g=Pi(h.widgets()),x=h.selectedWidgets().next(),M=x?g.indexOf(x):-1;return{main:{type:"tab-area",widgets:g,currentIndex:M}}}c.createSingleDocumentConfig=l;function m(h,g,x,M){if(!X.hitTest(h.node,g,x))return{zone:"invalid",target:null};let I=h.layout;if(I.isEmpty)return{zone:"root-all",target:null};if(h.mode==="multiple-document"){let u=h.node.getBoundingClientRect(),d=g-u.left+1,r=x-u.top+1,i=u.right-g,o=u.bottom-x;switch(Math.min(r,i,o,d)){case r:if(r<M.top)return{zone:"root-top",target:null};break;case i:if(i<M.right)return{zone:"root-right",target:null};break;case o:if(o<M.bottom)return{zone:"root-bottom",target:null};break;case d:if(d<M.left)return{zone:"root-left",target:null};break;default:throw"unreachable"}}let b=I.hitTestTabAreas(g,x);if(!b)return{zone:"invalid",target:null};if(h.mode==="single-document")return{zone:"widget-all",target:b};let v=b.x-b.left+1,w=b.y-b.top+1,y=b.left+b.width-b.x,k=b.top+b.height-b.y,T=b.tabBar.node.getBoundingClientRect().height;if(w<T)return{zone:"widget-tab",target:b};let E=Math.round(b.width/3),S=Math.round(b.height/3);if(v>E&&y>E&&w>S&&k>S)return{zone:"widget-all",target:b};v/=E,w/=S,y/=E,k/=S;let L=Math.min(v,w,y,k),A;switch(L){case v:A="widget-left";break;case w:A="widget-top";break;case y:A="widget-right";break;case k:A="widget-bottom";break;default:throw"unreachable"}return{zone:A,target:b}}c.findDropTarget=m;function f(h){return h.titles.length===0?null:h.currentTitle?h.currentTitle.owner:h.titles[h.titles.length-1].owner}c.getDropRef=f})(J||={});var Ml;(t=>{function e(n){let a=document.body,l=m=>{m.preventDefault(),m.stopPropagation(),m.clipboardData.setData("text",n),a.removeEventListener("copy",l,!0)};a.addEventListener("copy",l,!0),document.execCommand("copy")}t.copyText=e})(Ml||={});var Ln;(l=>{function e(m){let f=window.getComputedStyle(m),c=parseFloat(f.borderTopWidth)||0,h=parseFloat(f.borderLeftWidth)||0,g=parseFloat(f.borderRightWidth)||0,x=parseFloat(f.borderBottomWidth)||0,M=parseFloat(f.paddingTop)||0,I=parseFloat(f.paddingLeft)||0,b=parseFloat(f.paddingRight)||0,v=parseFloat(f.paddingBottom)||0,w=h+I+b+g,y=c+M+v+x;return{borderTop:c,borderLeft:h,borderRight:g,borderBottom:x,paddingTop:M,paddingLeft:I,paddingRight:b,paddingBottom:v,horizontalSum:w,verticalSum:y}}l.boxSizing=e;function t(m){let f=window.getComputedStyle(m),c=parseFloat(f.minWidth)||0,h=parseFloat(f.minHeight)||0,g=parseFloat(f.maxWidth)||1/0,x=parseFloat(f.maxHeight)||1/0;return g=Math.max(c,g),x=Math.max(h,x),{minWidth:c,minHeight:h,maxWidth:g,maxHeight:x}}l.sizeLimits=t;function n(m,f,c){let h=m.getBoundingClientRect();return f>=h.left&&f<h.right&&c>=h.top&&c<h.bottom}l.hitTest=n;function a(m,f){let c=m.getBoundingClientRect(),h=f.getBoundingClientRect();if(!(h.top<=c.top&&h.bottom>=c.bottom)){if(h.top<c.top&&h.height<=c.height){m.scrollTop-=c.top-h.top;return}if(h.bottom>c.bottom&&h.height>=c.height){m.scrollTop-=c.top-h.top;return}if(h.top<c.top&&h.height>c.height){m.scrollTop-=c.bottom-h.bottom;return}if(h.bottom>c.bottom&&h.height<c.height){m.scrollTop-=c.bottom-h.bottom;return}}}l.scrollIntoViewIfNeeded=a})(Ln||={});var Tl;(m=>{m.IS_MAC=!!navigator.platform.match(/Mac/i),m.IS_WIN=!!navigator.platform.match(/Win/i),m.IS_IE=/Trident/.test(navigator.userAgent),m.IS_EDGE=/Edge/.test(navigator.userAgent);function l(f){return m.IS_MAC?f.metaKey:f.ctrlKey}m.accelKey=l})(Tl||={});var kl;(a=>{function e(l){if(l in De.specificityCache)return De.specificityCache[l];let m=De.calculateSingle(l);return De.specificityCache[l]=m}a.calculateSpecificity=e;function t(l){if(l in De.validityCache)return De.validityCache[l];let m=!0;try{De.testElem.querySelector(l)}catch{m=!1}return De.validityCache[l]=m}a.isValid=t;function n(l,m){return De.protoMatchFunc.call(l,m)}a.matches=n})(kl||={});var De;(b=>{b.specificityCache=Object.create(null),b.validityCache=Object.create(null),b.testElem=document.createElement("div"),b.protoMatchFunc=(()=>{let v=Element.prototype;return v.matches||v.matchesSelector||v.mozMatchesSelector||v.msMatchesSelector||v.oMatchesSelector||v.webkitMatchesSelector||function(w){let y=this,k=y.ownerDocument?y.ownerDocument.querySelectorAll(w):[];return Array.prototype.indexOf.call(k,y)!==-1}})();function l(v){v=v.split(",",1)[0];let w=0,y=0,k=0;function T(E){let S=v.match(E);return S===null?!1:(v=v.slice(S[0].length),!0)}for(v=v.replace(I," $1 ");v.length>0;){if(T(m)){w++;continue}if(T(f)){y++;continue}if(T(c)){y++;continue}if(T(g)){k++;continue}if(T(x)){y++;continue}if(T(h)){k++;continue}if(!T(M))return 0}return w=Math.min(w,255),y=Math.min(y,255),k=Math.min(k,255),w<<16|y<<8|k}b.calculateSingle=l;let m=/^#[^\s\+>~#\.\[:]+/,f=/^\.[^\s\+>~#\.\[:]+/,c=/^\[[^\]]+\]/,h=/^[^\s\+>~#\.\[:]+/,g=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,x=/^:[^\s\+>~#\.\[:]+/,M=/^[\s\+>~\*]+/,I=/:not\(([^\)]+)\)/g})(De||={});var me;(function(e){function t(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s){var _=(r+s)%o;if(u[_]===d)return _}return-1}e.firstIndexOf=t;function n(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;r<i?p=r+1+(o-i):p=r-i+1;for(var s=0;s<p;++s){var _=(r-s+o)%o;if(u[_]===d)return _}return-1}e.lastIndexOf=n;function a(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s){var _=(r+s)%o;if(d(u[_],_))return _}return-1}e.findFirstIndex=a;function l(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;r<i?p=r+1+(o-i):p=r-i+1;for(var s=0;s<p;++s){var _=(r-s+o)%o;if(d(u[_],_))return _}return-1}e.findLastIndex=l;function m(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=a(u,d,r,i);return o!==-1?u[o]:void 0}e.findFirstValue=m;function f(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=l(u,d,r,i);return o!==-1?u[o]:void 0}e.findLastValue=f;function c(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var p=u.length;if(p===0)return 0;i<0?i=Math.max(0,i+p):i=Math.min(i,p-1),o<0?o=Math.max(0,o+p):o=Math.min(o,p-1);for(var s=i,_=o-i+1;_>0;){var C=_>>1,O=s+C;r(u[O],d)<0?(s=O+1,_-=C+1):_=C}return s}e.lowerBound=c;function h(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var p=u.length;if(p===0)return 0;i<0?i=Math.max(0,i+p):i=Math.min(i,p-1),o<0?o=Math.max(0,o+p):o=Math.min(o,p-1);for(var s=i,_=o-i+1;_>0;){var C=_>>1,O=s+C;r(u[O],d)>0?_=C:(s=O+1,_-=C+1)}return s}e.upperBound=h;function g(u,d,r){if(u===d)return!0;if(u.length!==d.length)return!1;for(var i=0,o=u.length;i<o;++i)if(r?!r(u[i],d[i]):u[i]!==d[i])return!1;return!0}e.shallowEqual=g;function x(u,d){d===void 0&&(d={});var r=d.start,i=d.stop,o=d.step;if(o===void 0&&(o=1),o===0)throw new Error("Slice `step` cannot be zero.");var p=u.length;r===void 0?r=o<0?p-1:0:r<0?r=Math.max(r+p,o<0?-1:0):r>=p&&(r=o<0?p-1:p),i===void 0?i=o<0?-1:p:i<0?i=Math.max(i+p,o<0?-1:0):i>=p&&(i=o<0?p-1:p);var s;o<0&&i>=r||o>0&&r>=i?s=0:o<0?s=Math.floor((i-r+1)/o+1):s=Math.floor((i-r-1)/o+1);for(var _=[],C=0;C<s;++C)_[C]=u[r+C*o];return _}e.slice=x;function M(u,d,r){var i=u.length;if(!(i<=1)&&(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1),d!==r)){for(var o=u[d],p=d<r?1:-1,s=d;s!==r;s+=p)u[s]=u[s+p];u[r]=o}}e.move=M;function I(u,d,r){d===void 0&&(d=0),r===void 0&&(r=-1);var i=u.length;if(!(i<=1))for(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1);d<r;){var o=u[d],p=u[r];u[d++]=p,u[r--]=o}}e.reverse=I;function b(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(!(o<=1)&&(r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1),!(r>=i))){var p=i-r+1;if(d>0?d=d%p:d<0&&(d=(d%p+p)%p),d!==0){var s=r+d;I(u,r,s-1),I(u,s,i),I(u,r,i)}}}e.rotate=b;function v(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o!==0){r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s)u[(r+s)%o]=d}}e.fill=v;function w(u,d,r){var i=u.length;d<0?d=Math.max(0,d+i):d=Math.min(d,i);for(var o=i;o>d;--o)u[o]=u[o-1];u[d]=r}e.insert=w;function y(u,d){var r=u.length;if(d<0&&(d+=r),!(d<0||d>=r)){for(var i=u[d],o=d+1;o<r;++o)u[o-1]=u[o];return u.length=r-1,i}}e.removeAt=y;function k(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=t(u,d,r,i);return o!==-1&&y(u,o),o}e.removeFirstOf=k;function T(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=n(u,d,r,i);return o!==-1&&y(u,o),o}e.removeLastOf=T;function E(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var p=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&u[s]===d||i<r&&(s<=i||s>=r)&&u[s]===d?p++:p>0&&(u[s-p]=u[s]);return p>0&&(u.length=o-p),p}e.removeAllOf=E;function S(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o,p=a(u,d,r,i);return p!==-1&&(o=y(u,p)),{index:p,value:o}}e.removeFirstWhere=S;function L(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o,p=l(u,d,r,i);return p!==-1&&(o=y(u,p)),{index:p,value:o}}e.removeLastWhere=L;function A(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var p=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&d(u[s],s)||i<r&&(s<=i||s>=r)&&d(u[s],s)?p++:p>0&&(u[s-p]=u[s]);return p>0&&(u.length=o-p),p}e.removeAllWhere=A})(me||(me={}));var d0=function(){function e(t){this._index=0,this._source=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},e}(),c0=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?t:this.next()}},e}(),f0=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?this._source[t]:this.next()}},e}(),h0=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?[t,this._source[t]]:this.next()}},e}(),m0=function(){function e(t){this._fn=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},e.prototype.next=function(){return this._fn.call(void 0)},e}();var p0=function(){function e(t){this._cloned=!1,this._source=t,this._active=void 0}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone());return t._active=this._active&&this._active.clone(),t._cloned=!0,this._cloned=!0,t},e.prototype.next=function(){if(this._active===void 0){var t=this._source.next();if(t===void 0)return;this._active=this._cloned?t.clone():t}var n=this._active.next();return n!==void 0?n:(this._active=void 0,this.next())},e}();var v0=function(){function e(){}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e},e.prototype.next=function(){},e}();var g0=function(){function e(t,n){this._source=t,this._index=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._index)},e.prototype.next=function(){var t=this._source.next();if(t!==void 0)return[this._index++,t]},e}();var b0=function(){function e(t,n){this._index=0,this._source=t,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){for(var t=this._fn,n=this._source,a;(a=n.next())!==void 0;)if(t(a,this._index++))return a},e}();var _0=function(){function e(t,n){this._index=0,this._source=t,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){var t=this._source.next();if(t!==void 0)return this._fn.call(void 0,t,this._index++)},e}();var y0=function(){function e(t,n,a){this._index=0,this._start=t,this._stop=n,this._step=a,this._length=Cn.rangeLength(t,n,a)}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._start,this._stop,this._step);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},e}(),Cn;(function(e){function t(n,a,l){return l===0?1/0:n>a&&l>0||n<a&&l<0?0:Math.ceil((a-n)/l)}e.rangeLength=t})(Cn||(Cn={}));var x0=function(){function e(t,n){this._value=t,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._value,this._count)},e.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},e}();var w0=function(){function e(t){this._source=t,this._index=t.length-1}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},e}();var I0=function(){function e(t,n){this._source=t,this._step=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._step)},e.prototype.next=function(){for(var t=this._source.next(),n=this._step-1;n>0;--n)this._source.next();return t},e}(),Gi;(function(e){function t(f,c,h){h===void 0&&(h=0);for(var g=new Array(c.length),x=0,M=h,I=c.length;x<I;++x,++M){if(M=f.indexOf(c[x],M),M===-1)return null;g[x]=M}return g}e.findIndices=t;function n(f,c,h){h===void 0&&(h=0);var g=t(f,c,h);if(!g)return null;for(var x=0,M=0,I=g.length;M<I;++M){var b=g[M]-h;x+=b*b}return{score:x,indices:g}}e.matchSumOfSquares=n;function a(f,c,h){h===void 0&&(h=0);var g=t(f,c,h);if(!g)return null;for(var x=0,M=h-1,I=0,b=g.length;I<b;++I){var v=g[I];x+=v-M-1,M=v}return{score:x,indices:g}}e.matchSumOfDeltas=a;function l(f,c,h){for(var g=[],x=0,M=0,I=c.length;x<I;){for(var b=c[x],v=c[x];++x<I&&c[x]===v+1;)v++;M<b&&g.push(f.slice(M,b)),b<v+1&&g.push(h(f.slice(b,v+1))),M=v+1}return M<f.length&&g.push(f.slice(M)),g}e.highlight=l;function m(f,c){return f<c?-1:f>c?1:0}e.cmp=m})(Gi||(Gi={}));var M0=function(){function e(t,n){this._source=t,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._count)},e.prototype.next=function(){if(!(this._count<=0)){var t=this._source.next();if(t!==void 0)return this._count--,t}},e}();var T0=function(){function e(t){this._source=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.map(function(t){return t.clone()}))},e.prototype.next=function(){for(var t=new Array(this._source.length),n=0,a=this._source.length;n<a;++n){var l=this._source[n].next();if(l===void 0)return;t[n]=l}return t},e}();var st=class{constructor(t){this.type="text";this.content=t}},kt=class{constructor(t,n,a,l){this.type="element";this.tag=t,this.attrs=n,this.children=a,this.renderer=l}};function ae(e){let t={},n,a=[];for(let m=1,f=arguments.length;m<f;++m){let c=arguments[m];typeof c=="string"?a.push(new st(c)):c instanceof st||c instanceof kt?a.push(c):c instanceof Array?l(a,c):(m===1||m===2)&&c&&typeof c=="object"&&("render"in c?n=c:t=c)}return new kt(e,t,a,n);function l(m,f){for(let c of f)typeof c=="string"?m.push(new st(c)):(c instanceof st||c instanceof kt)&&m.push(c)}}(D=>(D.a=D.bind(void 0,"a"),D.abbr=D.bind(void 0,"abbr"),D.address=D.bind(void 0,"address"),D.area=D.bind(void 0,"area"),D.article=D.bind(void 0,"article"),D.aside=D.bind(void 0,"aside"),D.audio=D.bind(void 0,"audio"),D.b=D.bind(void 0,"b"),D.bdi=D.bind(void 0,"bdi"),D.bdo=D.bind(void 0,"bdo"),D.blockquote=D.bind(void 0,"blockquote"),D.br=D.bind(void 0,"br"),D.button=D.bind(void 0,"button"),D.canvas=D.bind(void 0,"canvas"),D.caption=D.bind(void 0,"caption"),D.cite=D.bind(void 0,"cite"),D.code=D.bind(void 0,"code"),D.col=D.bind(void 0,"col"),D.colgroup=D.bind(void 0,"colgroup"),D.data=D.bind(void 0,"data"),D.datalist=D.bind(void 0,"datalist"),D.dd=D.bind(void 0,"dd"),D.del=D.bind(void 0,"del"),D.dfn=D.bind(void 0,"dfn"),D.div=D.bind(void 0,"div"),D.dl=D.bind(void 0,"dl"),D.dt=D.bind(void 0,"dt"),D.em=D.bind(void 0,"em"),D.embed=D.bind(void 0,"embed"),D.fieldset=D.bind(void 0,"fieldset"),D.figcaption=D.bind(void 0,"figcaption"),D.figure=D.bind(void 0,"figure"),D.footer=D.bind(void 0,"footer"),D.form=D.bind(void 0,"form"),D.h1=D.bind(void 0,"h1"),D.h2=D.bind(void 0,"h2"),D.h3=D.bind(void 0,"h3"),D.h4=D.bind(void 0,"h4"),D.h5=D.bind(void 0,"h5"),D.h6=D.bind(void 0,"h6"),D.header=D.bind(void 0,"header"),D.hr=D.bind(void 0,"hr"),D.i=D.bind(void 0,"i"),D.iframe=D.bind(void 0,"iframe"),D.img=D.bind(void 0,"img"),D.input=D.bind(void 0,"input"),D.ins=D.bind(void 0,"ins"),D.kbd=D.bind(void 0,"kbd"),D.label=D.bind(void 0,"label"),D.legend=D.bind(void 0,"legend"),D.li=D.bind(void 0,"li"),D.main=D.bind(void 0,"main"),D.map=D.bind(void 0,"map"),D.mark=D.bind(void 0,"mark"),D.meter=D.bind(void 0,"meter"),D.nav=D.bind(void 0,"nav"),D.noscript=D.bind(void 0,"noscript"),D.object=D.bind(void 0,"object"),D.ol=D.bind(void 0,"ol"),D.optgroup=D.bind(void 0,"optgroup"),D.option=D.bind(void 0,"option"),D.output=D.bind(void 0,"output"),D.p=D.bind(void 0,"p"),D.param=D.bind(void 0,"param"),D.pre=D.bind(void 0,"pre"),D.progress=D.bind(void 0,"progress"),D.q=D.bind(void 0,"q"),D.rp=D.bind(void 0,"rp"),D.rt=D.bind(void 0,"rt"),D.ruby=D.bind(void 0,"ruby"),D.s=D.bind(void 0,"s"),D.samp=D.bind(void 0,"samp"),D.section=D.bind(void 0,"section"),D.select=D.bind(void 0,"select"),D.small=D.bind(void 0,"small"),D.source=D.bind(void 0,"source"),D.span=D.bind(void 0,"span"),D.strong=D.bind(void 0,"strong"),D.sub=D.bind(void 0,"sub"),D.summary=D.bind(void 0,"summary"),D.sup=D.bind(void 0,"sup"),D.table=D.bind(void 0,"table"),D.tbody=D.bind(void 0,"tbody"),D.td=D.bind(void 0,"td"),D.textarea=D.bind(void 0,"textarea"),D.tfoot=D.bind(void 0,"tfoot"),D.th=D.bind(void 0,"th"),D.thead=D.bind(void 0,"thead"),D.time=D.bind(void 0,"time"),D.title=D.bind(void 0,"title"),D.tr=D.bind(void 0,"tr"),D.track=D.bind(void 0,"track"),D.u=D.bind(void 0,"u"),D.ul=D.bind(void 0,"ul"),D.var_=D.bind(void 0,"var"),D.video=D.bind(void 0,"video"),D.wbr=D.bind(void 0,"wbr")))(ae||={});var El;(n=>{function e(a){return at.createDOMNode(a)}n.realize=e;function t(a,l){let m=at.hostMap.get(l)||[],f=at.asContentArray(a);at.hostMap.set(l,f),at.updateContent(l,m,f)}n.render=t})(El||={});var at;(b=>{b.hostMap=new WeakMap;function t(v){return v?v instanceof Array?v:[v]:[]}b.asContentArray=t;function n(v){let w=arguments[1]||null,y=arguments[2]||null;if(w)w.insertBefore(n(v),y);else{if(v.type==="text")return document.createTextNode(v.content);if(w=document.createElement(v.tag),f(w,v.attrs),v.renderer)return v.renderer.render(w,{attrs:v.attrs,children:v.children}),w;for(let k=0,T=v.children.length;k<T;++k)n(v.children[k],w)}return w}b.createDOMNode=n;function a(v,w,y){if(w===y)return;let k=I(v,w),T=w.slice(),E=v.firstChild,S=y.length;for(let L=0;L<S;++L){if(L>=T.length){n(y[L],v);continue}let A=T[L],u=y[L];if(A===u){E=E.nextSibling;continue}if(A.type==="text"&&u.type==="text"){E.textContent=u.content,E=E.nextSibling;continue}if(A.type==="text"||u.type==="text"){me.insert(T,L,u),n(u,v,E);continue}if(!A.renderer!=!u.renderer){me.insert(T,L,u),n(u,v,E);continue}let d=u.attrs.key;if(d&&d in k){let i=k[d];i.vNode!==A&&(me.move(T,T.indexOf(i.vNode,L+1),L),v.insertBefore(i.element,E),A=i.vNode,E=i.element)}if(A===u){E=E.nextSibling;continue}let r=A.attrs.key;if(r&&r!==d){me.insert(T,L,u),n(u,v,E);continue}if(A.tag!==u.tag){me.insert(T,L,u),n(u,v,E);continue}c(E,A.attrs,u.attrs),u.renderer?u.renderer.render(E,{attrs:u.attrs,children:u.children}):a(E,A.children,u.children),E=E.nextSibling}l(v,T,S,!0)}b.updateContent=a;function l(v,w,y,k){for(let T=w.length-1;T>=y;--T){let E=w[T],S=k?v.lastChild:v.childNodes[T];E.type==="text"||(E.renderer&&E.renderer.unrender?E.renderer.unrender(S,{attrs:E.attrs,children:E.children}):l(S,E.children,0,!1)),k&&v.removeChild(S)}}let m={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function f(v,w){for(let y in w)y in m||(y.substr(0,2)==="on"?v[y]=w[y]:v.setAttribute(y,w[y]));w.className!==void 0&&v.setAttribute("class",w.className),w.htmlFor!==void 0&&v.setAttribute("for",w.htmlFor),w.dataset&&h(v,w.dataset),w.style&&x(v,w.style)}function c(v,w,y){if(w===y)return;let k;for(k in w)k in m||k in y||(k.substr(0,2)==="on"?v[k]=null:v.removeAttribute(k));for(k in y)k in m||w[k]===y[k]||(k.substr(0,2)==="on"?v[k]=y[k]:v.setAttribute(k,y[k]));w.className!==y.className&&(y.className!==void 0?v.setAttribute("class",y.className):v.removeAttribute("class")),w.htmlFor!==y.htmlFor&&(y.htmlFor!==void 0?v.setAttribute("for",y.htmlFor):v.removeAttribute("for")),w.dataset!==y.dataset&&g(v,w.dataset||{},y.dataset||{}),w.style!==y.style&&M(v,w.style||{},y.style||{})}function h(v,w){for(let y in w)v.setAttribute(`data-${y}`,w[y])}function g(v,w,y){for(let k in w)k in y||v.removeAttribute(`data-${k}`);for(let k in y)w[k]!==y[k]&&v.setAttribute(`data-${k}`,y[k])}function x(v,w){let y=v.style,k;for(k in w)y[k]=w[k]}function M(v,w,y){let k=v.style,T;for(T in w)T in y||(k[T]="");for(T in y)w[T]!==y[T]&&(k[T]=y[T])}function I(v,w){let y=v.firstChild,k=Object.create(null);for(let T of w)T.type==="element"&&T.attrs.key&&(k[T.attrs.key]={vNode:T,element:y}),y=y.nextSibling;return k}})(at||={});var Zt={Config:"config",Label:"label"},Ll="untitled",Xt=class extends he.Renderer{constructor(t){super(),this.maximized=t}renderLabel(t){return ae.span({className:"p-TabBar-tabLabel",id:Zt.Label},t.title.label||Ll)}renderOther(t,n){return ae.span({},n.label||"untitled")}renderInert(){return ae.div()}renderTab(t){let n=t.title.caption,a=this.createTabKey(t),l=this.createTabStyle(t),m=this.createTabClass(t),f=this.createTabDataset(t),c=[];return t.onClick&&c.push(ae.div({onclick:t.onClick,class:"bookmarks-button"},ae.div({class:"bookmarks"}))),ae.li({key:a,className:m,title:n,style:l,dataset:f},this.renderDragHandle(),...c,this.renderLabel(t),this.renderCloseIcon())}renderDragHandle(){return ae.div({className:"drag-handle"})}renderCloseIcon(){return ae.div({className:"lm-TabBar-tabCloseIcon p-TabBar-tabCloseIcon"})}};var Sn=function(e,t){return Sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])},Sn(e,t)};function Cl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Sn(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Jt=function(){function e(t){this.type="text",this.content=t}return e}(),Qt=function(){function e(t,n,a,l){this.type="element",this.tag=t,this.attrs=n,this.children=a,this.renderer=l}return e}(),O0=function(e){Cl(t,e);function t(n,a,l){return e.call(this,n,a,[],l||void 0)||this}return t}(Qt);function $i(e){for(var t={},n,a=[],l=1,m=arguments.length;l<m;++l){var f=arguments[l];typeof f=="string"?a.push(new Jt(f)):f instanceof Jt||f instanceof Qt?a.push(f):f instanceof Array?c(a,f):(l===1||l===2)&&f&&typeof f=="object"&&("render"in f?n=f:t=f)}return new Qt(e,t,a,n);function c(h,g){for(var x=0,M=g;x<M.length;x++){var I=M[x];typeof I=="string"?h.push(new Jt(I)):(I instanceof Jt||I instanceof Qt)&&h.push(I)}}}(function(e){e.a=e.bind(void 0,"a"),e.abbr=e.bind(void 0,"abbr"),e.address=e.bind(void 0,"address"),e.area=e.bind(void 0,"area"),e.article=e.bind(void 0,"article"),e.aside=e.bind(void 0,"aside"),e.audio=e.bind(void 0,"audio"),e.b=e.bind(void 0,"b"),e.bdi=e.bind(void 0,"bdi"),e.bdo=e.bind(void 0,"bdo"),e.blockquote=e.bind(void 0,"blockquote"),e.br=e.bind(void 0,"br"),e.button=e.bind(void 0,"button"),e.canvas=e.bind(void 0,"canvas"),e.caption=e.bind(void 0,"caption"),e.cite=e.bind(void 0,"cite"),e.code=e.bind(void 0,"code"),e.col=e.bind(void 0,"col"),e.colgroup=e.bind(void 0,"colgroup"),e.data=e.bind(void 0,"data"),e.datalist=e.bind(void 0,"datalist"),e.dd=e.bind(void 0,"dd"),e.del=e.bind(void 0,"del"),e.dfn=e.bind(void 0,"dfn"),e.div=e.bind(void 0,"div"),e.dl=e.bind(void 0,"dl"),e.dt=e.bind(void 0,"dt"),e.em=e.bind(void 0,"em"),e.embed=e.bind(void 0,"embed"),e.fieldset=e.bind(void 0,"fieldset"),e.figcaption=e.bind(void 0,"figcaption"),e.figure=e.bind(void 0,"figure"),e.footer=e.bind(void 0,"footer"),e.form=e.bind(void 0,"form"),e.h1=e.bind(void 0,"h1"),e.h2=e.bind(void 0,"h2"),e.h3=e.bind(void 0,"h3"),e.h4=e.bind(void 0,"h4"),e.h5=e.bind(void 0,"h5"),e.h6=e.bind(void 0,"h6"),e.header=e.bind(void 0,"header"),e.hr=e.bind(void 0,"hr"),e.i=e.bind(void 0,"i"),e.iframe=e.bind(void 0,"iframe"),e.img=e.bind(void 0,"img"),e.input=e.bind(void 0,"input"),e.ins=e.bind(void 0,"ins"),e.kbd=e.bind(void 0,"kbd"),e.label=e.bind(void 0,"label"),e.legend=e.bind(void 0,"legend"),e.li=e.bind(void 0,"li"),e.main=e.bind(void 0,"main"),e.map=e.bind(void 0,"map"),e.mark=e.bind(void 0,"mark"),e.meter=e.bind(void 0,"meter"),e.nav=e.bind(void 0,"nav"),e.noscript=e.bind(void 0,"noscript"),e.object=e.bind(void 0,"object"),e.ol=e.bind(void 0,"ol"),e.optgroup=e.bind(void 0,"optgroup"),e.option=e.bind(void 0,"option"),e.output=e.bind(void 0,"output"),e.p=e.bind(void 0,"p"),e.param=e.bind(void 0,"param"),e.pre=e.bind(void 0,"pre"),e.progress=e.bind(void 0,"progress"),e.q=e.bind(void 0,"q"),e.rp=e.bind(void 0,"rp"),e.rt=e.bind(void 0,"rt"),e.ruby=e.bind(void 0,"ruby"),e.s=e.bind(void 0,"s"),e.samp=e.bind(void 0,"samp"),e.section=e.bind(void 0,"section"),e.select=e.bind(void 0,"select"),e.small=e.bind(void 0,"small"),e.source=e.bind(void 0,"source"),e.span=e.bind(void 0,"span"),e.strong=e.bind(void 0,"strong"),e.sub=e.bind(void 0,"sub"),e.summary=e.bind(void 0,"summary"),e.sup=e.bind(void 0,"sup"),e.table=e.bind(void 0,"table"),e.tbody=e.bind(void 0,"tbody"),e.td=e.bind(void 0,"td"),e.textarea=e.bind(void 0,"textarea"),e.tfoot=e.bind(void 0,"tfoot"),e.th=e.bind(void 0,"th"),e.thead=e.bind(void 0,"thead"),e.time=e.bind(void 0,"time"),e.title=e.bind(void 0,"title"),e.tr=e.bind(void 0,"tr"),e.track=e.bind(void 0,"track"),e.u=e.bind(void 0,"u"),e.ul=e.bind(void 0,"ul"),e.var_=e.bind(void 0,"var"),e.video=e.bind(void 0,"video"),e.wbr=e.bind(void 0,"wbr")})($i||($i={}));var en;(function(e){function t(a){return Ye.createDOMNode(a)}e.realize=t;function n(a,l){var m=Ye.hostMap.get(l)||[],f=Ye.asContentArray(a);Ye.hostMap.set(l,f),Ye.updateContent(l,m,f)}e.render=n})(en||(en={}));var Ye;(function(e){e.hostMap=new WeakMap;function t(b){return b?b instanceof Array?b:[b]:[]}e.asContentArray=t;function n(b){var v=arguments[1]||null,w=arguments[2]||null;if(v)v.insertBefore(n(b),w);else{if(b.type==="text")return document.createTextNode(b.content);if(v=document.createElement(b.tag),f(v,b.attrs),b.renderer)return b.renderer.render(v,{attrs:b.attrs,children:b.children}),v;for(var y=0,k=b.children.length;y<k;++y)n(b.children[y],v)}return v}e.createDOMNode=n;function a(b,v,w){if(v!==w){for(var y=I(b,v),k=v.slice(),T=b.firstChild,E=w.length,S=0;S<E;++S){if(S>=k.length){n(w[S],b);continue}var L=k[S],A=w[S];if(L===A){T=T.nextSibling;continue}if(L.type==="text"&&A.type==="text"){T.textContent=A.content,T=T.nextSibling;continue}if(L.type==="text"||A.type==="text"){me.insert(k,S,A),n(A,b,T);continue}if(!L.renderer!=!A.renderer){me.insert(k,S,A),n(A,b,T);continue}var u=A.attrs.key;if(u&&u in y){var d=y[u];d.vNode!==L&&(me.move(k,k.indexOf(d.vNode,S+1),S),b.insertBefore(d.element,T),L=d.vNode,T=d.element)}if(L===A){T=T.nextSibling;continue}var r=L.attrs.key;if(r&&r!==u){me.insert(k,S,A),n(A,b,T);continue}if(L.tag!==A.tag){me.insert(k,S,A),n(A,b,T);continue}c(T,L.attrs,A.attrs),A.renderer?A.renderer.render(T,{attrs:A.attrs,children:A.children}):a(T,L.children,A.children),T=T.nextSibling}l(b,k,E,!0)}}e.updateContent=a;function l(b,v,w,y){for(var k=v.length-1;k>=w;--k){var T=v[k],E=y?b.lastChild:b.childNodes[k];T.type==="text"||(T.renderer&&T.renderer.unrender?T.renderer.unrender(E,{attrs:T.attrs,children:T.children}):l(E,T.children,0,!1)),y&&b.removeChild(E)}}var m={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function f(b,v){for(var w in v)w in m||(w.substr(0,2)==="on"?b[w]=v[w]:b.setAttribute(w,v[w]));v.className!==void 0&&b.setAttribute("class",v.className),v.htmlFor!==void 0&&b.setAttribute("for",v.htmlFor),v.dataset&&h(b,v.dataset),v.style&&x(b,v.style)}function c(b,v,w){if(v!==w){var y;for(y in v)y in m||y in w||(y.substr(0,2)==="on"?b[y]=null:b.removeAttribute(y));for(y in w)y in m||v[y]===w[y]||(y.substr(0,2)==="on"?b[y]=w[y]:b.setAttribute(y,w[y]));v.className!==w.className&&(w.className!==void 0?b.setAttribute("class",w.className):b.removeAttribute("class")),v.htmlFor!==w.htmlFor&&(w.htmlFor!==void 0?b.setAttribute("for",w.htmlFor):b.removeAttribute("for")),v.dataset!==w.dataset&&g(b,v.dataset||{},w.dataset||{}),v.style!==w.style&&M(b,v.style||{},w.style||{})}}function h(b,v){for(var w in v)b.setAttribute("data-"+w,v[w])}function g(b,v,w){for(var y in v)y in w||b.removeAttribute("data-"+y);for(var k in w)v[k]!==w[k]&&b.setAttribute("data-"+k,w[k])}function x(b,v){var w=b.style,y;for(y in v)w[y]=v[y]}function M(b,v,w){var y=b.style,k;for(k in v)k in w||(y[k]="");for(k in w)v[k]!==w[k]&&(y[k]=w[k])}function I(b,v){for(var w=b.firstChild,y=Object.create(null),k=0,T=v;k<T.length;k++){var E=T[k];E.type==="element"&&E.attrs.key&&(y[E.attrs.key]={vNode:E,element:w}),w=w.nextSibling}return y}})(Ye||(Ye={}));var tn;(function(e){function t(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s){var _=(r+s)%o;if(u[_]===d)return _}return-1}e.firstIndexOf=t;function n(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;r<i?p=r+1+(o-i):p=r-i+1;for(var s=0;s<p;++s){var _=(r-s+o)%o;if(u[_]===d)return _}return-1}e.lastIndexOf=n;function a(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s){var _=(r+s)%o;if(d(u[_],_))return _}return-1}e.findFirstIndex=a;function l(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;r<i?p=r+1+(o-i):p=r-i+1;for(var s=0;s<p;++s){var _=(r-s+o)%o;if(d(u[_],_))return _}return-1}e.findLastIndex=l;function m(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=a(u,d,r,i);return o!==-1?u[o]:void 0}e.findFirstValue=m;function f(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=l(u,d,r,i);return o!==-1?u[o]:void 0}e.findLastValue=f;function c(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var p=u.length;if(p===0)return 0;i<0?i=Math.max(0,i+p):i=Math.min(i,p-1),o<0?o=Math.max(0,o+p):o=Math.min(o,p-1);for(var s=i,_=o-i+1;_>0;){var C=_>>1,O=s+C;r(u[O],d)<0?(s=O+1,_-=C+1):_=C}return s}e.lowerBound=c;function h(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var p=u.length;if(p===0)return 0;i<0?i=Math.max(0,i+p):i=Math.min(i,p-1),o<0?o=Math.max(0,o+p):o=Math.min(o,p-1);for(var s=i,_=o-i+1;_>0;){var C=_>>1,O=s+C;r(u[O],d)>0?_=C:(s=O+1,_-=C+1)}return s}e.upperBound=h;function g(u,d,r){if(u===d)return!0;if(u.length!==d.length)return!1;for(var i=0,o=u.length;i<o;++i)if(r?!r(u[i],d[i]):u[i]!==d[i])return!1;return!0}e.shallowEqual=g;function x(u,d){d===void 0&&(d={});var r=d.start,i=d.stop,o=d.step;if(o===void 0&&(o=1),o===0)throw new Error("Slice `step` cannot be zero.");var p=u.length;r===void 0?r=o<0?p-1:0:r<0?r=Math.max(r+p,o<0?-1:0):r>=p&&(r=o<0?p-1:p),i===void 0?i=o<0?-1:p:i<0?i=Math.max(i+p,o<0?-1:0):i>=p&&(i=o<0?p-1:p);var s;o<0&&i>=r||o>0&&r>=i?s=0:o<0?s=Math.floor((i-r+1)/o+1):s=Math.floor((i-r-1)/o+1);for(var _=[],C=0;C<s;++C)_[C]=u[r+C*o];return _}e.slice=x;function M(u,d,r){var i=u.length;if(!(i<=1)&&(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1),d!==r)){for(var o=u[d],p=d<r?1:-1,s=d;s!==r;s+=p)u[s]=u[s+p];u[r]=o}}e.move=M;function I(u,d,r){d===void 0&&(d=0),r===void 0&&(r=-1);var i=u.length;if(!(i<=1))for(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1);d<r;){var o=u[d],p=u[r];u[d++]=p,u[r--]=o}}e.reverse=I;function b(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(!(o<=1)&&(r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1),!(r>=i))){var p=i-r+1;if(d>0?d=d%p:d<0&&(d=(d%p+p)%p),d!==0){var s=r+d;I(u,r,s-1),I(u,s,i),I(u,r,i)}}}e.rotate=b;function v(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o!==0){r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s)u[(r+s)%o]=d}}e.fill=v;function w(u,d,r){var i=u.length;d<0?d=Math.max(0,d+i):d=Math.min(d,i);for(var o=i;o>d;--o)u[o]=u[o-1];u[d]=r}e.insert=w;function y(u,d){var r=u.length;if(d<0&&(d+=r),!(d<0||d>=r)){for(var i=u[d],o=d+1;o<r;++o)u[o-1]=u[o];return u.length=r-1,i}}e.removeAt=y;function k(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=t(u,d,r,i);return o!==-1&&y(u,o),o}e.removeFirstOf=k;function T(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=n(u,d,r,i);return o!==-1&&y(u,o),o}e.removeLastOf=T;function E(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var p=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&u[s]===d||i<r&&(s<=i||s>=r)&&u[s]===d?p++:p>0&&(u[s-p]=u[s]);return p>0&&(u.length=o-p),p}e.removeAllOf=E;function S(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o,p=a(u,d,r,i);return p!==-1&&(o=y(u,p)),{index:p,value:o}}e.removeFirstWhere=S;function L(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o,p=l(u,d,r,i);return p!==-1&&(o=y(u,p)),{index:p,value:o}}e.removeLastWhere=L;function A(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var p=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&d(u[s],s)||i<r&&(s<=i||s>=r)&&d(u[s],s)?p++:p>0&&(u[s-p]=u[s]);return p>0&&(u.length=o-p),p}e.removeAllWhere=A})(tn||(tn={}));var R0=function(){function e(t){this._index=0,this._source=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},e}(),B0=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?t:this.next()}},e}(),P0=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?this._source[t]:this.next()}},e}(),F0=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?[t,this._source[t]]:this.next()}},e}(),W0=function(){function e(t){this._fn=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},e.prototype.next=function(){return this._fn.call(void 0)},e}();var H0=function(){function e(t){this._cloned=!1,this._source=t,this._active=void 0}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone());return t._active=this._active&&this._active.clone(),t._cloned=!0,this._cloned=!0,t},e.prototype.next=function(){if(this._active===void 0){var t=this._source.next();if(t===void 0)return;this._active=this._cloned?t.clone():t}var n=this._active.next();return n!==void 0?n:(this._active=void 0,this.next())},e}();var q0=function(){function e(){}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e},e.prototype.next=function(){},e}();var N0=function(){function e(t,n){this._source=t,this._index=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._index)},e.prototype.next=function(){var t=this._source.next();if(t!==void 0)return[this._index++,t]},e}();var K0=function(){function e(t,n){this._index=0,this._source=t,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){for(var t=this._fn,n=this._source,a;(a=n.next())!==void 0;)if(t(a,this._index++))return a},e}();var V0=function(){function e(t,n){this._index=0,this._source=t,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){var t=this._source.next();if(t!==void 0)return this._fn.call(void 0,t,this._index++)},e}();var j0=function(){function e(t,n,a){this._index=0,this._start=t,this._stop=n,this._step=a,this._length=An.rangeLength(t,n,a)}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._start,this._stop,this._step);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},e}(),An;(function(e){function t(n,a,l){return l===0?1/0:n>a&&l>0||n<a&&l<0?0:Math.ceil((a-n)/l)}e.rangeLength=t})(An||(An={}));var U0=function(){function e(t,n){this._value=t,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._value,this._count)},e.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},e}();var G0=function(){function e(t){this._source=t,this._index=t.length-1}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},e}();var $0=function(){function e(t,n){this._source=t,this._step=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._step)},e.prototype.next=function(){for(var t=this._source.next(),n=this._step-1;n>0;--n)this._source.next();return t},e}(),Yi;(function(e){function t(f,c,h){h===void 0&&(h=0);for(var g=new Array(c.length),x=0,M=h,I=c.length;x<I;++x,++M){if(M=f.indexOf(c[x],M),M===-1)return null;g[x]=M}return g}e.findIndices=t;function n(f,c,h){h===void 0&&(h=0);var g=t(f,c,h);if(!g)return null;for(var x=0,M=0,I=g.length;M<I;++M){var b=g[M]-h;x+=b*b}return{score:x,indices:g}}e.matchSumOfSquares=n;function a(f,c,h){h===void 0&&(h=0);var g=t(f,c,h);if(!g)return null;for(var x=0,M=h-1,I=0,b=g.length;I<b;++I){var v=g[I];x+=v-M-1,M=v}return{score:x,indices:g}}e.matchSumOfDeltas=a;function l(f,c,h){for(var g=[],x=0,M=0,I=c.length;x<I;){for(var b=c[x],v=c[x];++x<I&&c[x]===v+1;)v++;M<b&&g.push(f.slice(M,b)),b<v+1&&g.push(h(f.slice(b,v+1))),M=v+1}return M<f.length&&g.push(f.slice(M)),g}e.highlight=l;function m(f,c){return f<c?-1:f>c?1:0}e.cmp=m})(Yi||(Yi={}));var Y0=function(){function e(t,n){this._source=t,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._count)},e.prototype.next=function(){if(!(this._count<=0)){var t=this._source.next();if(t!==void 0)return this._count--,t}},e}();var X0=function(){function e(t){this._source=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.map(function(t){return t.clone()}))},e.prototype.next=function(){for(var t=new Array(this._source.length),n=0,a=this._source.length;n<a;++n){var l=this._source[n].next();if(l===void 0)return;t[n]=l}return t},e}();var se=Qe(Zi());var Ji;(function(e){function t(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s){var _=(r+s)%o;if(u[_]===d)return _}return-1}e.firstIndexOf=t;function n(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;r<i?p=r+1+(o-i):p=r-i+1;for(var s=0;s<p;++s){var _=(r-s+o)%o;if(u[_]===d)return _}return-1}e.lastIndexOf=n;function a(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s){var _=(r+s)%o;if(d(u[_],_))return _}return-1}e.findFirstIndex=a;function l(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;r<i?p=r+1+(o-i):p=r-i+1;for(var s=0;s<p;++s){var _=(r-s+o)%o;if(d(u[_],_))return _}return-1}e.findLastIndex=l;function m(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=a(u,d,r,i);return o!==-1?u[o]:void 0}e.findFirstValue=m;function f(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=l(u,d,r,i);return o!==-1?u[o]:void 0}e.findLastValue=f;function c(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var p=u.length;if(p===0)return 0;i<0?i=Math.max(0,i+p):i=Math.min(i,p-1),o<0?o=Math.max(0,o+p):o=Math.min(o,p-1);for(var s=i,_=o-i+1;_>0;){var C=_>>1,O=s+C;r(u[O],d)<0?(s=O+1,_-=C+1):_=C}return s}e.lowerBound=c;function h(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var p=u.length;if(p===0)return 0;i<0?i=Math.max(0,i+p):i=Math.min(i,p-1),o<0?o=Math.max(0,o+p):o=Math.min(o,p-1);for(var s=i,_=o-i+1;_>0;){var C=_>>1,O=s+C;r(u[O],d)>0?_=C:(s=O+1,_-=C+1)}return s}e.upperBound=h;function g(u,d,r){if(u===d)return!0;if(u.length!==d.length)return!1;for(var i=0,o=u.length;i<o;++i)if(r?!r(u[i],d[i]):u[i]!==d[i])return!1;return!0}e.shallowEqual=g;function x(u,d){d===void 0&&(d={});var r=d.start,i=d.stop,o=d.step;if(o===void 0&&(o=1),o===0)throw new Error("Slice `step` cannot be zero.");var p=u.length;r===void 0?r=o<0?p-1:0:r<0?r=Math.max(r+p,o<0?-1:0):r>=p&&(r=o<0?p-1:p),i===void 0?i=o<0?-1:p:i<0?i=Math.max(i+p,o<0?-1:0):i>=p&&(i=o<0?p-1:p);var s;o<0&&i>=r||o>0&&r>=i?s=0:o<0?s=Math.floor((i-r+1)/o+1):s=Math.floor((i-r-1)/o+1);for(var _=[],C=0;C<s;++C)_[C]=u[r+C*o];return _}e.slice=x;function M(u,d,r){var i=u.length;if(!(i<=1)&&(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1),d!==r)){for(var o=u[d],p=d<r?1:-1,s=d;s!==r;s+=p)u[s]=u[s+p];u[r]=o}}e.move=M;function I(u,d,r){d===void 0&&(d=0),r===void 0&&(r=-1);var i=u.length;if(!(i<=1))for(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1);d<r;){var o=u[d],p=u[r];u[d++]=p,u[r--]=o}}e.reverse=I;function b(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(!(o<=1)&&(r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1),!(r>=i))){var p=i-r+1;if(d>0?d=d%p:d<0&&(d=(d%p+p)%p),d!==0){var s=r+d;I(u,r,s-1),I(u,s,i),I(u,r,i)}}}e.rotate=b;function v(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o!==0){r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s)u[(r+s)%o]=d}}e.fill=v;function w(u,d,r){var i=u.length;d<0?d=Math.max(0,d+i):d=Math.min(d,i);for(var o=i;o>d;--o)u[o]=u[o-1];u[d]=r}e.insert=w;function y(u,d){var r=u.length;if(d<0&&(d+=r),!(d<0||d>=r)){for(var i=u[d],o=d+1;o<r;++o)u[o-1]=u[o];return u.length=r-1,i}}e.removeAt=y;function k(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=t(u,d,r,i);return o!==-1&&y(u,o),o}e.removeFirstOf=k;function T(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=n(u,d,r,i);return o!==-1&&y(u,o),o}e.removeLastOf=T;function E(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var p=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&u[s]===d||i<r&&(s<=i||s>=r)&&u[s]===d?p++:p>0&&(u[s-p]=u[s]);return p>0&&(u.length=o-p),p}e.removeAllOf=E;function S(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o,p=a(u,d,r,i);return p!==-1&&(o=y(u,p)),{index:p,value:o}}e.removeFirstWhere=S;function L(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o,p=l(u,d,r,i);return p!==-1&&(o=y(u,p)),{index:p,value:o}}e.removeLastWhere=L;function A(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var p=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&d(u[s],s)||i<r&&(s<=i||s>=r)&&d(u[s],s)?p++:p>0&&(u[s-p]=u[s]);return p>0&&(u.length=o-p),p}e.removeAllWhere=A})(Ji||(Ji={}));function Sl(e){var t;return typeof e.iter=="function"?t=e.iter():t=new Al(e),t}function On(e,t){for(var n=0,a=Sl(e),l;(l=a.next())!==void 0;)if(t(l,n++)===!1)return}var Al=function(){function e(t){this._index=0,this._source=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},e}(),J0=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?t:this.next()}},e}(),Q0=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?this._source[t]:this.next()}},e}(),ew=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?[t,this._source[t]]:this.next()}},e}(),tw=function(){function e(t){this._fn=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},e.prototype.next=function(){return this._fn.call(void 0)},e}();var nw=function(){function e(t){this._cloned=!1,this._source=t,this._active=void 0}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone());return t._active=this._active&&this._active.clone(),t._cloned=!0,this._cloned=!0,t},e.prototype.next=function(){if(this._active===void 0){var t=this._source.next();if(t===void 0)return;this._active=this._cloned?t.clone():t}var n=this._active.next();return n!==void 0?n:(this._active=void 0,this.next())},e}();var iw=function(){function e(){}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e},e.prototype.next=function(){},e}();var rw=function(){function e(t,n){this._source=t,this._index=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._index)},e.prototype.next=function(){var t=this._source.next();if(t!==void 0)return[this._index++,t]},e}();var ow=function(){function e(t,n){this._index=0,this._source=t,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){for(var t=this._fn,n=this._source,a;(a=n.next())!==void 0;)if(t(a,this._index++))return a},e}();var aw=function(){function e(t,n){this._index=0,this._source=t,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){var t=this._source.next();if(t!==void 0)return this._fn.call(void 0,t,this._index++)},e}();var sw=function(){function e(t,n,a){this._index=0,this._start=t,this._stop=n,this._step=a,this._length=Dn.rangeLength(t,n,a)}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._start,this._stop,this._step);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},e}(),Dn;(function(e){function t(n,a,l){return l===0?1/0:n>a&&l>0||n<a&&l<0?0:Math.ceil((a-n)/l)}e.rangeLength=t})(Dn||(Dn={}));var uw=function(){function e(t,n){this._value=t,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._value,this._count)},e.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},e}();var lw=function(){function e(t){this._source=t,this._index=t.length-1}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},e}();var dw=function(){function e(t,n){this._source=t,this._step=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._step)},e.prototype.next=function(){for(var t=this._source.next(),n=this._step-1;n>0;--n)this._source.next();return t},e}(),Qi;(function(e){function t(f,c,h){h===void 0&&(h=0);for(var g=new Array(c.length),x=0,M=h,I=c.length;x<I;++x,++M){if(M=f.indexOf(c[x],M),M===-1)return null;g[x]=M}return g}e.findIndices=t;function n(f,c,h){h===void 0&&(h=0);var g=t(f,c,h);if(!g)return null;for(var x=0,M=0,I=g.length;M<I;++M){var b=g[M]-h;x+=b*b}return{score:x,indices:g}}e.matchSumOfSquares=n;function a(f,c,h){h===void 0&&(h=0);var g=t(f,c,h);if(!g)return null;for(var x=0,M=h-1,I=0,b=g.length;I<b;++I){var v=g[I];x+=v-M-1,M=v}return{score:x,indices:g}}e.matchSumOfDeltas=a;function l(f,c,h){for(var g=[],x=0,M=0,I=c.length;x<I;){for(var b=c[x],v=c[x];++x<I&&c[x]===v+1;)v++;M<b&&g.push(f.slice(M,b)),b<v+1&&g.push(h(f.slice(b,v+1))),M=v+1}return M<f.length&&g.push(f.slice(M)),g}e.highlight=l;function m(f,c){return f<c?-1:f>c?1:0}e.cmp=m})(Qi||(Qi={}));var cw=function(){function e(t,n){this._source=t,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._count)},e.prototype.next=function(){if(!(this._count<=0)){var t=this._source.next();if(t!==void 0)return this._count--,t}},e}();var fw=function(){function e(t){this._source=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.map(function(t){return t.clone()}))},e.prototype.next=function(){for(var t=new Array(this._source.length),n=0,a=this._source.length;n<a;++n){var l=this._source[n].next();if(l===void 0)return;t[n]=l}return t},e}();var rn;(function(e){function t(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s){var _=(r+s)%o;if(u[_]===d)return _}return-1}e.firstIndexOf=t;function n(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;r<i?p=r+1+(o-i):p=r-i+1;for(var s=0;s<p;++s){var _=(r-s+o)%o;if(u[_]===d)return _}return-1}e.lastIndexOf=n;function a(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s){var _=(r+s)%o;if(d(u[_],_))return _}return-1}e.findFirstIndex=a;function l(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;r<i?p=r+1+(o-i):p=r-i+1;for(var s=0;s<p;++s){var _=(r-s+o)%o;if(d(u[_],_))return _}return-1}e.findLastIndex=l;function m(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=a(u,d,r,i);return o!==-1?u[o]:void 0}e.findFirstValue=m;function f(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=l(u,d,r,i);return o!==-1?u[o]:void 0}e.findLastValue=f;function c(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var p=u.length;if(p===0)return 0;i<0?i=Math.max(0,i+p):i=Math.min(i,p-1),o<0?o=Math.max(0,o+p):o=Math.min(o,p-1);for(var s=i,_=o-i+1;_>0;){var C=_>>1,O=s+C;r(u[O],d)<0?(s=O+1,_-=C+1):_=C}return s}e.lowerBound=c;function h(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var p=u.length;if(p===0)return 0;i<0?i=Math.max(0,i+p):i=Math.min(i,p-1),o<0?o=Math.max(0,o+p):o=Math.min(o,p-1);for(var s=i,_=o-i+1;_>0;){var C=_>>1,O=s+C;r(u[O],d)>0?_=C:(s=O+1,_-=C+1)}return s}e.upperBound=h;function g(u,d,r){if(u===d)return!0;if(u.length!==d.length)return!1;for(var i=0,o=u.length;i<o;++i)if(r?!r(u[i],d[i]):u[i]!==d[i])return!1;return!0}e.shallowEqual=g;function x(u,d){d===void 0&&(d={});var r=d.start,i=d.stop,o=d.step;if(o===void 0&&(o=1),o===0)throw new Error("Slice `step` cannot be zero.");var p=u.length;r===void 0?r=o<0?p-1:0:r<0?r=Math.max(r+p,o<0?-1:0):r>=p&&(r=o<0?p-1:p),i===void 0?i=o<0?-1:p:i<0?i=Math.max(i+p,o<0?-1:0):i>=p&&(i=o<0?p-1:p);var s;o<0&&i>=r||o>0&&r>=i?s=0:o<0?s=Math.floor((i-r+1)/o+1):s=Math.floor((i-r-1)/o+1);for(var _=[],C=0;C<s;++C)_[C]=u[r+C*o];return _}e.slice=x;function M(u,d,r){var i=u.length;if(!(i<=1)&&(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1),d!==r)){for(var o=u[d],p=d<r?1:-1,s=d;s!==r;s+=p)u[s]=u[s+p];u[r]=o}}e.move=M;function I(u,d,r){d===void 0&&(d=0),r===void 0&&(r=-1);var i=u.length;if(!(i<=1))for(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1);d<r;){var o=u[d],p=u[r];u[d++]=p,u[r--]=o}}e.reverse=I;function b(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(!(o<=1)&&(r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1),!(r>=i))){var p=i-r+1;if(d>0?d=d%p:d<0&&(d=(d%p+p)%p),d!==0){var s=r+d;I(u,r,s-1),I(u,s,i),I(u,r,i)}}}e.rotate=b;function v(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o!==0){r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s)u[(r+s)%o]=d}}e.fill=v;function w(u,d,r){var i=u.length;d<0?d=Math.max(0,d+i):d=Math.min(d,i);for(var o=i;o>d;--o)u[o]=u[o-1];u[d]=r}e.insert=w;function y(u,d){var r=u.length;if(d<0&&(d+=r),!(d<0||d>=r)){for(var i=u[d],o=d+1;o<r;++o)u[o-1]=u[o];return u.length=r-1,i}}e.removeAt=y;function k(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=t(u,d,r,i);return o!==-1&&y(u,o),o}e.removeFirstOf=k;function T(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=n(u,d,r,i);return o!==-1&&y(u,o),o}e.removeLastOf=T;function E(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var p=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&u[s]===d||i<r&&(s<=i||s>=r)&&u[s]===d?p++:p>0&&(u[s-p]=u[s]);return p>0&&(u.length=o-p),p}e.removeAllOf=E;function S(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o,p=a(u,d,r,i);return p!==-1&&(o=y(u,p)),{index:p,value:o}}e.removeFirstWhere=S;function L(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o,p=l(u,d,r,i);return p!==-1&&(o=y(u,p)),{index:p,value:o}}e.removeLastWhere=L;function A(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var p=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&d(u[s],s)||i<r&&(s<=i||s>=r)&&d(u[s],s)?p++:p>0&&(u[s-p]=u[s]);return p>0&&(u.length=o-p),p}e.removeAllWhere=A})(rn||(rn={}));function tr(e){var t;return typeof e.iter=="function"?t=e.iter():t=new Dl(e),t}function on(e,t){for(var n=0,a=tr(e),l;(l=a.next())!==void 0;)if(t(l,n++)===!1)return}var Dl=function(){function e(t){this._index=0,this._source=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},e}(),mw=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?t:this.next()}},e}(),pw=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?this._source[t]:this.next()}},e}(),vw=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?[t,this._source[t]]:this.next()}},e}(),gw=function(){function e(t){this._fn=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},e.prototype.next=function(){return this._fn.call(void 0)},e}();var bw=function(){function e(t){this._cloned=!1,this._source=t,this._active=void 0}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone());return t._active=this._active&&this._active.clone(),t._cloned=!0,this._cloned=!0,t},e.prototype.next=function(){if(this._active===void 0){var t=this._source.next();if(t===void 0)return;this._active=this._cloned?t.clone():t}var n=this._active.next();return n!==void 0?n:(this._active=void 0,this.next())},e}();var _w=function(){function e(){}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e},e.prototype.next=function(){},e}();var yw=function(){function e(t,n){this._source=t,this._index=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._index)},e.prototype.next=function(){var t=this._source.next();if(t!==void 0)return[this._index++,t]},e}();var xw=function(){function e(t,n){this._index=0,this._source=t,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){for(var t=this._fn,n=this._source,a;(a=n.next())!==void 0;)if(t(a,this._index++))return a},e}();function nr(e,t){for(var n=0,a=tr(e),l;(l=a.next())!==void 0;)if(t(l,n++))return l}var ww=function(){function e(t,n){this._index=0,this._source=t,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){var t=this._source.next();if(t!==void 0)return this._fn.call(void 0,t,this._index++)},e}();var Iw=function(){function e(t,n,a){this._index=0,this._start=t,this._stop=n,this._step=a,this._length=zn.rangeLength(t,n,a)}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._start,this._stop,this._step);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},e}(),zn;(function(e){function t(n,a,l){return l===0?1/0:n>a&&l>0||n<a&&l<0?0:Math.ceil((a-n)/l)}e.rangeLength=t})(zn||(zn={}));var Mw=function(){function e(t,n){this._value=t,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._value,this._count)},e.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},e}();var Tw=function(){function e(t){this._source=t,this._index=t.length-1}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},e}();var kw=function(){function e(t,n){this._source=t,this._step=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._step)},e.prototype.next=function(){for(var t=this._source.next(),n=this._step-1;n>0;--n)this._source.next();return t},e}(),er;(function(e){function t(f,c,h){h===void 0&&(h=0);for(var g=new Array(c.length),x=0,M=h,I=c.length;x<I;++x,++M){if(M=f.indexOf(c[x],M),M===-1)return null;g[x]=M}return g}e.findIndices=t;function n(f,c,h){h===void 0&&(h=0);var g=t(f,c,h);if(!g)return null;for(var x=0,M=0,I=g.length;M<I;++M){var b=g[M]-h;x+=b*b}return{score:x,indices:g}}e.matchSumOfSquares=n;function a(f,c,h){h===void 0&&(h=0);var g=t(f,c,h);if(!g)return null;for(var x=0,M=h-1,I=0,b=g.length;I<b;++I){var v=g[I];x+=v-M-1,M=v}return{score:x,indices:g}}e.matchSumOfDeltas=a;function l(f,c,h){for(var g=[],x=0,M=0,I=c.length;x<I;){for(var b=c[x],v=c[x];++x<I&&c[x]===v+1;)v++;M<b&&g.push(f.slice(M,b)),b<v+1&&g.push(h(f.slice(b,v+1))),M=v+1}return M<f.length&&g.push(f.slice(M)),g}e.highlight=l;function m(f,c){return f<c?-1:f>c?1:0}e.cmp=m})(er||(er={}));var Ew=function(){function e(t,n){this._source=t,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._count)},e.prototype.next=function(){if(!(this._count<=0)){var t=this._source.next();if(t!==void 0)return this._count--,t}},e}();var Lw=function(){function e(t){this._source=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.map(function(t){return t.clone()}))},e.prototype.next=function(){for(var t=new Array(this._source.length),n=0,a=this._source.length;n<a;++n){var l=this._source[n].next();if(l===void 0)return;t[n]=l}return t},e}();var ke=function(){function e(t){this.sender=t}return e.prototype.connect=function(t,n){return _e.connect(this,t,n)},e.prototype.disconnect=function(t,n){return _e.disconnect(this,t,n)},e.prototype.emit=function(t){_e.emit(this,t)},e}();(function(e){function t(h,g){_e.disconnectBetween(h,g)}e.disconnectBetween=t;function n(h){_e.disconnectSender(h)}e.disconnectSender=n;function a(h){_e.disconnectReceiver(h)}e.disconnectReceiver=a;function l(h){_e.disconnectAll(h)}e.disconnectAll=l;function m(h){_e.disconnectAll(h)}e.clearData=m;function f(){return _e.exceptionHandler}e.getExceptionHandler=f;function c(h){var g=_e.exceptionHandler;return _e.exceptionHandler=h,g}e.setExceptionHandler=c})(ke||(ke={}));var _e;(function(e){e.exceptionHandler=function(T){console.error(T)};function t(T,E,S){S=S||void 0;var L=h.get(T.sender);if(L||(L=[],h.set(T.sender,L)),I(L,T,E,S))return!1;var A=S||E,u=g.get(A);u||(u=[],g.set(A,u));var d={signal:T,slot:E,thisArg:S};return L.push(d),u.push(d),!0}e.connect=t;function n(T,E,S){S=S||void 0;var L=h.get(T.sender);if(!L||L.length===0)return!1;var A=I(L,T,E,S);if(!A)return!1;var u=S||E,d=g.get(u);return A.signal=null,v(L),v(d),!0}e.disconnect=n;function a(T,E){var S=h.get(T);if(!(!S||S.length===0)){var L=g.get(E);!L||L.length===0||(on(L,function(A){!A.signal||A.signal.sender===T&&(A.signal=null)}),v(S),v(L))}}e.disconnectBetween=a;function l(T){var E=h.get(T);!E||E.length===0||(on(E,function(S){if(!!S.signal){var L=S.thisArg||S.slot;S.signal=null,v(g.get(L))}}),v(E))}e.disconnectSender=l;function m(T){var E=g.get(T);!E||E.length===0||(on(E,function(S){if(!!S.signal){var L=S.signal.sender;S.signal=null,v(h.get(L))}}),v(E))}e.disconnectReceiver=m;function f(T){l(T),m(T)}e.disconnectAll=f;function c(T,E){var S=h.get(T.sender);if(!(!S||S.length===0))for(var L=0,A=S.length;L<A;++L){var u=S[L];u.signal===T&&b(u,E)}}e.emit=c;var h=new WeakMap,g=new WeakMap,x=new Set,M=function(){var T=typeof requestAnimationFrame=="function";return T?requestAnimationFrame:setImmediate}();function I(T,E,S,L){return nr(T,function(A){return A.signal===E&&A.slot===S&&A.thisArg===L})}function b(T,E){var S=T.signal,L=T.slot,A=T.thisArg;try{L.call(A,S.sender,E)}catch(u){e.exceptionHandler(u)}}function v(T){x.size===0&&M(w),x.add(T)}function w(){x.forEach(y),x.clear()}function y(T){rn.removeAllWhere(T,k)}function k(T){return T.signal===null}})(_e||(_e={}));var Rn=function(e,t){return Rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])},Rn(e,t)};function rr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Rn(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var an=function(){function e(t){this._fn=t}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return!this._fn},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){if(!!this._fn){var t=this._fn;this._fn=null,t()}},e}(),zw=function(e){rr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._disposed=new ke(n),n}return Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(e.prototype.dispose.call(this),this._disposed.emit(void 0),ke.clearData(this))},t}(an),Bn=function(){function e(){this._isDisposed=!1,this._items=new Set}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._items.forEach(function(t){t.dispose()}),this._items.clear())},e.prototype.contains=function(t){return this._items.has(t)},e.prototype.add=function(t){this._items.add(t)},e.prototype.remove=function(t){this._items.delete(t)},e.prototype.clear=function(){this._items.clear()},e}();(function(e){function t(n){var a=new e;return On(n,function(l){a.add(l)}),a}e.from=t})(Bn||(Bn={}));var ir=function(e){rr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._disposed=new ke(n),n}return Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(e.prototype.dispose.call(this),this._disposed.emit(void 0),ke.clearData(this))},t}(Bn);(function(e){function t(n){var a=new e;return On(n,function(l){a.add(l)}),a}e.from=t})(ir||(ir={}));var or;(function(e){function t(n){var a=document.body,l=function(m){m.preventDefault(),m.stopPropagation(),m.clipboardData.setData("text",n),a.removeEventListener("copy",l,!0)};a.addEventListener("copy",l,!0),document.execCommand("copy")}e.copyText=t})(or||(or={}));var ar;(function(e){function t(m){var f=window.getComputedStyle(m),c=parseFloat(f.borderTopWidth)||0,h=parseFloat(f.borderLeftWidth)||0,g=parseFloat(f.borderRightWidth)||0,x=parseFloat(f.borderBottomWidth)||0,M=parseFloat(f.paddingTop)||0,I=parseFloat(f.paddingLeft)||0,b=parseFloat(f.paddingRight)||0,v=parseFloat(f.paddingBottom)||0,w=h+I+b+g,y=c+M+v+x;return{borderTop:c,borderLeft:h,borderRight:g,borderBottom:x,paddingTop:M,paddingLeft:I,paddingRight:b,paddingBottom:v,horizontalSum:w,verticalSum:y}}e.boxSizing=t;function n(m){var f=window.getComputedStyle(m),c=parseFloat(f.minWidth)||0,h=parseFloat(f.minHeight)||0,g=parseFloat(f.maxWidth)||1/0,x=parseFloat(f.maxHeight)||1/0;return g=Math.max(c,g),x=Math.max(h,x),{minWidth:c,minHeight:h,maxWidth:g,maxHeight:x}}e.sizeLimits=n;function a(m,f,c){var h=m.getBoundingClientRect();return f>=h.left&&f<h.right&&c>=h.top&&c<h.bottom}e.hitTest=a;function l(m,f){var c=m.getBoundingClientRect(),h=f.getBoundingClientRect();if(!(h.top<=c.top&&h.bottom>=c.bottom)){if(h.top<c.top&&h.height<=c.height){m.scrollTop-=c.top-h.top;return}if(h.bottom>c.bottom&&h.height>=c.height){m.scrollTop-=c.top-h.top;return}if(h.top<c.top&&h.height>c.height){m.scrollTop-=c.bottom-h.bottom;return}if(h.bottom>c.bottom&&h.height<c.height){m.scrollTop-=c.bottom-h.bottom;return}}}e.scrollIntoViewIfNeeded=l})(ar||(ar={}));var Le;(function(e){e.IS_MAC=!!navigator.platform.match(/Mac/i),e.IS_WIN=!!navigator.platform.match(/Win/i),e.IS_IE=/Trident/.test(navigator.userAgent),e.IS_EDGE=/Edge/.test(navigator.userAgent);function t(n){return e.IS_MAC?n.metaKey:n.ctrlKey}e.accelKey=t})(Le||(Le={}));var ut;(function(e){function t(l){if(l in Ee.specificityCache)return Ee.specificityCache[l];var m=Ee.calculateSingle(l);return Ee.specificityCache[l]=m}e.calculateSpecificity=t;function n(l){if(l in Ee.validityCache)return Ee.validityCache[l];var m=!0;try{Ee.testElem.querySelector(l)}catch{m=!1}return Ee.validityCache[l]=m}e.isValid=n;function a(l,m){return Ee.protoMatchFunc.call(l,m)}e.matches=a})(ut||(ut={}));var Ee;(function(e){e.specificityCache=Object.create(null),e.validityCache=Object.create(null),e.testElem=document.createElement("div"),e.protoMatchFunc=function(){var x=Element.prototype;return x.matches||x.matchesSelector||x.mozMatchesSelector||x.msMatchesSelector||x.oMatchesSelector||x.webkitMatchesSelector||function(M){var I=this,b=I.ownerDocument?I.ownerDocument.querySelectorAll(M):[];return Array.prototype.indexOf.call(b,I)!==-1}}();function t(x){x=x.split(",",1)[0];var M=0,I=0,b=0;function v(w){var y=x.match(w);return y===null?!1:(x=x.slice(y[0].length),!0)}for(x=x.replace(g," $1 ");x.length>0;){if(v(n)){M++;continue}if(v(a)){I++;continue}if(v(l)){I++;continue}if(v(f)){b++;continue}if(v(c)){I++;continue}if(v(m)){b++;continue}if(!v(h))return 0}return M=Math.min(M,255),I=Math.min(I,255),b=Math.min(b,255),M<<16|I<<8|b}e.calculateSingle=t;var n=/^#[^\s\+>~#\.\[:]+/,a=/^\.[^\s\+>~#\.\[:]+/,l=/^\[[^\]]+\]/,m=/^[^\s\+>~#\.\[:]+/,f=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,c=/^:[^\s\+>~#\.\[:]+/,h=/^[\s\+>~\*]+/,g=/:not\(([^\)]+)\)/g})(Ee||(Ee={}));function Wn(){return Fn.keyboardLayout}var Pn=function(){function e(t,n,a){a===void 0&&(a=[]),this.name=t,this._codes=n,this._keys=e.extractKeys(n),this._modifierKeys=e.convertToKeySet(a)}return e.prototype.keys=function(){return Object.keys(this._keys)},e.prototype.isValidKey=function(t){return t in this._keys},e.prototype.isModifierKey=function(t){return t in this._modifierKeys},e.prototype.keyForKeydownEvent=function(t){return this._codes[t.keyCode]||""},e}();(function(e){function t(a){var l=Object.create(null);for(var m in a)l[a[m]]=!0;return l}e.extractKeys=t;function n(a){for(var l=Object(null),m=0,f=a.length;m<f;++m)l[a[m]]=!0;return l}e.convertToKeySet=n})(Pn||(Pn={}));var Ol=new Pn("en-us",{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",93:"ContextMenu",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Meta"},["Shift","Ctrl","Alt","Meta"]),Fn;(function(e){e.keyboardLayout=Ol})(Fn||(Fn={}));var ye=class{constructor(){this._timerID=0;this._replaying=!1;this._keystrokes=[];this._keydownEvents=[];this._keyBindings=[];this._exactKeyMatch=null;this._commands=Object.create(null);this._commandChanged=new ke(this);this._commandExecuted=new ke(this);this._keyBindingChanged=new ke(this)}get commandChanged(){return this._commandChanged}get commandExecuted(){return this._commandExecuted}get keyBindingChanged(){return this._keyBindingChanged}get keyBindings(){return this._keyBindings}listCommands(){return Object.keys(this._commands)}hasCommand(t){return t in this._commands}addCommand(t,n){if(t in this._commands)throw new Error(`Command '${t}' already registered.`);return this._commands[t]=Xe.createCommand(n),this._commandChanged.emit({id:t,type:"added"}),new an(()=>{delete this._commands[t],this._commandChanged.emit({id:t,type:"removed"})})}notifyCommandChanged(t){if(t!==void 0&&!(t in this._commands))throw new Error(`Command '${t}' is not registered.`);this._commandChanged.emit({id:t,type:t?"changed":"many-changed"})}label(t,n=se.JSONExt.emptyObject){let a=this._commands[t];return a?a.label.call(void 0,n):""}mnemonic(t,n=se.JSONExt.emptyObject){let a=this._commands[t];return a?a.mnemonic.call(void 0,n):-1}icon(t,n=se.JSONExt.emptyObject){let a=this._commands[t];return a?a.icon.call(void 0,n):""}iconClass(t,n=se.JSONExt.emptyObject){let a=this._commands[t];return a?a.iconClass.call(void 0,n):""}iconLabel(t,n=se.JSONExt.emptyObject){let a=this._commands[t];return a?a.iconLabel.call(void 0,n):""}caption(t,n=se.JSONExt.emptyObject){let a=this._commands[t];return a?a.caption.call(void 0,n):""}usage(t,n=se.JSONExt.emptyObject){let a=this._commands[t];return a?a.usage.call(void 0,n):""}className(t,n=se.JSONExt.emptyObject){let a=this._commands[t];return a?a.className.call(void 0,n):""}dataset(t,n=se.JSONExt.emptyObject){let a=this._commands[t];return a?a.dataset.call(void 0,n):{}}isEnabled(t,n=se.JSONExt.emptyObject){let a=this._commands[t];return a?a.isEnabled.call(void 0,n):!1}isToggled(t,n=se.JSONExt.emptyObject){let a=this._commands[t];return a?a.isToggled.call(void 0,n):!1}isToggleable(t,n=se.JSONExt.emptyObject){let a=this._commands[t];return a?a.isToggleable:!1}isVisible(t,n=se.JSONExt.emptyObject){let a=this._commands[t];return a?a.isVisible.call(void 0,n):!1}execute(t,n=se.JSONExt.emptyObject){let a=this._commands[t];if(!a)return Promise.reject(new Error(`Command '${t}' not registered.`));let l;try{l=a.execute.call(void 0,n)}catch(f){l=Promise.reject(f)}let m=Promise.resolve(l);return this._commandExecuted.emit({id:t,args:n,result:m}),m}addKeyBinding(t){let n=Xe.createKeyBinding(t);return this._keyBindings.push(n),this._keyBindingChanged.emit({binding:n,type:"added"}),new an(()=>{tn.removeFirstOf(this._keyBindings,n),this._keyBindingChanged.emit({binding:n,type:"removed"})})}processKeydownEvent(t){if(this._replaying||ye.isModifierKeyPressed(t))return;let n=ye.keystrokeForKeydownEvent(t);if(!n){this._replayKeydownEvents(),this._clearPendingState();return}this._keystrokes.push(n);let{exact:a,partial:l}=Xe.matchKeyBinding(this._keyBindings,this._keystrokes,t);if(!a&&!l){this._replayKeydownEvents(),this._clearPendingState();return}if(t.preventDefault(),t.stopPropagation(),a&&!l){this._executeKeyBinding(a),this._clearPendingState();return}a&&(this._exactKeyMatch=a),this._keydownEvents.push(t),this._startTimer()}_startTimer(){this._clearTimer(),this._timerID=window.setTimeout(()=>{this._onPendingTimeout()},Xe.CHORD_TIMEOUT)}_clearTimer(){this._timerID!==0&&(clearTimeout(this._timerID),this._timerID=0)}_replayKeydownEvents(){this._keydownEvents.length!==0&&(this._replaying=!0,this._keydownEvents.forEach(Xe.replayKeyEvent),this._replaying=!1)}_executeKeyBinding(t){let{command:n,args:a}=t;if(!this.hasCommand(n)||!this.isEnabled(n,a)){let l=this.hasCommand(n)?"enabled":"registered",f=`Cannot execute key binding '${t.keys.join(", ")}':`,c=`command '${n}' is not ${l}.`;console.warn(`${f} ${c}`);return}this.execute(n,a)}_clearPendingState(){this._clearTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0}_onPendingTimeout(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()}};(f=>{function e(c){let h="",g=!1,x=!1,M=!1,I=!1;for(let b of c.split(/\s+/))b==="Accel"?Le.IS_MAC?x=!0:M=!0:b==="Alt"?g=!0:b==="Cmd"?x=!0:b==="Ctrl"?M=!0:b==="Shift"?I=!0:b.length>0&&(h=b);return{cmd:x,ctrl:M,alt:g,shift:I,key:h}}f.parseKeystroke=e;function t(c){let h="",g=e(c);return g.ctrl&&(h+="Ctrl "),g.alt&&(h+="Alt "),g.shift&&(h+="Shift "),g.cmd&&Le.IS_MAC&&(h+="Cmd "),h+g.key}f.normalizeKeystroke=t;function n(c){let h;return Le.IS_WIN?h=c.winKeys||c.keys:Le.IS_MAC?h=c.macKeys||c.keys:h=c.linuxKeys||c.keys,h.map(t)}f.normalizeKeys=n;function a(c){let h=[],g=Le.IS_MAC?" ":"+",x=e(c);return x.ctrl&&h.push("Ctrl"),x.alt&&h.push("Alt"),x.shift&&h.push("Shift"),Le.IS_MAC&&x.cmd&&h.push("Cmd"),h.push(x.key),h.map(Xe.formatKey).join(g)}f.formatKeystroke=a;function l(c){let h=Wn(),g=h.keyForKeydownEvent(c);return h.isModifierKey(g)}f.isModifierKeyPressed=l;function m(c){let h=Wn(),g=h.keyForKeydownEvent(c);if(!g||h.isModifierKey(g))return"";let x=[];return c.ctrlKey&&x.push("Ctrl"),c.altKey&&x.push("Alt"),c.shiftKey&&x.push("Shift"),c.metaKey&&Le.IS_MAC&&x.push("Cmd"),x.push(g),x.join(" ")}f.keystrokeForKeydownEvent=m})(ye||={});var Xe;(S=>{S.CHORD_TIMEOUT=1e3;function t(L){let A,u;return!L.icon||typeof L.icon=="string"?(u=v(L.iconClass||L.icon,h),A=u):(u=v(L.iconClass,h),A=v(L.icon,b)),{execute:L.execute,label:v(L.label,h),mnemonic:v(L.mnemonic,g),icon:A,iconClass:u,iconLabel:v(L.iconLabel,h),caption:v(L.caption,h),usage:v(L.usage,h),className:v(L.className,h),dataset:v(L.dataset,I),isEnabled:L.isEnabled||x,isToggled:L.isToggled||M,isToggleable:L.isToggleable||!!L.isToggled,isVisible:L.isVisible||x}}S.createCommand=t;function n(L){return{keys:ye.normalizeKeys(L),selector:w(L),command:L.command,args:L.args||se.JSONExt.emptyObject}}S.createKeyBinding=n;function a(L,A,u){let d=null,r=!1,i=1/0,o=0;for(let p=0,s=L.length;p<s;++p){let _=L[p],C=k(_.keys,A);if(C===y.None)continue;if(C===y.Partial){!r&&T(_.selector,u)!==-1&&(r=!0);continue}let O=T(_.selector,u);if(O===-1||O>i)continue;let R=ut.calculateSpecificity(_.selector);(!d||O<i||R>=o)&&(d=_,i=O,o=R)}return{exact:d,partial:r}}S.matchKeyBinding=a;function l(L){L.target.dispatchEvent(E(L))}S.replayKeyEvent=l;function m(L){return Le.IS_MAC?f.hasOwnProperty(L)?f[L]:L:c.hasOwnProperty(L)?c[L]:L}S.formatKey=m;let f={Backspace:"\u232B",Tab:"\u21E5",Enter:"\u21A9",Shift:"\u21E7",Ctrl:"\u2303",Alt:"\u2325",Escape:"\u238B",PageUp:"\u21DE",PageDown:"\u21DF",End:"\u2198",Home:"\u2196",ArrowLeft:"\u2190",ArrowUp:"\u2191",ArrowRight:"\u2192",ArrowDown:"\u2193",Delete:"\u2326",Cmd:"\u2318"},c={Escape:"Esc",PageUp:"Page Up",PageDown:"Page Down",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},h=()=>"",g=()=>-1,x=()=>!0,M=()=>!1,I=()=>({}),b=()=>{};function v(L,A){return L===void 0?A:typeof L=="function"?L:()=>L}function w(L){if(L.selector.indexOf(",")!==-1)throw new Error(`Selector cannot contain commas: ${L.selector}`);if(!ut.isValid(L.selector))throw new Error(`Invalid selector: ${L.selector}`);return L.selector}let y;(d=>(d[d.None=0]="None",d[d.Exact=1]="Exact",d[d.Partial=2]="Partial"))(y||={});function k(L,A){if(L.length<A.length)return 0;for(let u=0,d=A.length;u<d;++u)if(L[u]!==A[u])return 0;return L.length>A.length?2:1}function T(L,A){let u=A.target,d=A.currentTarget;for(let r=0;u!==null;u=u.parentElement,++r){if(u.hasAttribute("data-lm-suppress-shortcuts")||u.hasAttribute("data-p-suppress-shortcuts"))return-1;if(ut.matches(u,L))return r;if(u===d)return-1}return-1}function E(L){let A=document.createEvent("Event"),u=L.bubbles||!0,d=L.cancelable||!0;return A.initEvent(L.type||"keydown",u,d),A.key=L.key||"",A.keyCode=L.keyCode||0,A.which=L.keyCode||0,A.ctrlKey=L.ctrlKey||!1,A.altKey=L.altKey||!1,A.shiftKey=L.shiftKey||!1,A.metaKey=L.metaKey||!1,A.view=L.view||window,A}})(Xe||={});var de=Qe(Ut());function Et(){return qn.keyboardLayout}var Hn=function(){function e(t,n,a){a===void 0&&(a=[]),this.name=t,this._codes=n,this._keys=e.extractKeys(n),this._modifierKeys=e.convertToKeySet(a)}return e.prototype.keys=function(){return Object.keys(this._keys)},e.prototype.isValidKey=function(t){return t in this._keys},e.prototype.isModifierKey=function(t){return t in this._modifierKeys},e.prototype.keyForKeydownEvent=function(t){return this._codes[t.keyCode]||""},e}();(function(e){function t(a){var l=Object.create(null);for(var m in a)l[a[m]]=!0;return l}e.extractKeys=t;function n(a){for(var l=Object(null),m=0,f=a.length;m<f;++m)l[a[m]]=!0;return l}e.convertToKeySet=n})(Hn||(Hn={}));var zl=new Hn("en-us",{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",93:"ContextMenu",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Meta"},["Shift","Ctrl","Alt","Meta"]),qn;(function(e){e.keyboardLayout=zl})(qn||(qn={}));var Nn=function(){return Nn=Object.assign||function(t){for(var n,a=1,l=arguments.length;a<l;a++){n=arguments[a];for(var m in n)Object.prototype.hasOwnProperty.call(n,m)&&(t[m]=n[m])}return t},Nn.apply(this,arguments)},Lt=function(){function e(){this._timerID=0,this._replaying=!1,this._keystrokes=[],this._keydownEvents=[],this._keyBindings=[],this._exactKeyMatch=null,this._commands=Object.create(null),this._commandChanged=new j(this),this._commandExecuted=new j(this),this._keyBindingChanged=new j(this)}return Object.defineProperty(e.prototype,"commandChanged",{get:function(){return this._commandChanged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commandExecuted",{get:function(){return this._commandExecuted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyBindingChanged",{get:function(){return this._keyBindingChanged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyBindings",{get:function(){return this._keyBindings},enumerable:!0,configurable:!0}),e.prototype.listCommands=function(){return Object.keys(this._commands)},e.prototype.hasCommand=function(t){return t in this._commands},e.prototype.addCommand=function(t,n){var a=this;if(t in this._commands)throw new Error("Command '"+t+"' already registered.");return this._commands[t]=qe.createCommand(n),this._commandChanged.emit({id:t,type:"added"}),new rt(function(){delete a._commands[t],a._commandChanged.emit({id:t,type:"removed"})})},e.prototype.notifyCommandChanged=function(t){if(t!==void 0&&!(t in this._commands))throw new Error("Command '"+t+"' is not registered.");this._commandChanged.emit({id:t,type:t?"changed":"many-changed"})},e.prototype.describedBy=function(t){var n=this._commands[t];return n?n.describedBy||{args:null}:{args:null}},e.prototype.label=function(t,n){n===void 0&&(n=de.JSONExt.emptyObject);var a=this._commands[t];return a?a.label.call(void 0,n):""},e.prototype.mnemonic=function(t,n){n===void 0&&(n=de.JSONExt.emptyObject);var a=this._commands[t];return a?a.mnemonic.call(void 0,n):-1},e.prototype.icon=function(t,n){n===void 0&&(n=de.JSONExt.emptyObject);var a=this._commands[t];return a?a.icon.call(void 0,n):""},e.prototype.iconClass=function(t,n){n===void 0&&(n=de.JSONExt.emptyObject);var a=this._commands[t];return a?a.iconClass.call(void 0,n):""},e.prototype.iconLabel=function(t,n){n===void 0&&(n=de.JSONExt.emptyObject);var a=this._commands[t];return a?a.iconLabel.call(void 0,n):""},e.prototype.caption=function(t,n){n===void 0&&(n=de.JSONExt.emptyObject);var a=this._commands[t];return a?a.caption.call(void 0,n):""},e.prototype.usage=function(t,n){n===void 0&&(n=de.JSONExt.emptyObject);var a=this._commands[t];return a?a.usage.call(void 0,n):""},e.prototype.className=function(t,n){n===void 0&&(n=de.JSONExt.emptyObject);var a=this._commands[t];return a?a.className.call(void 0,n):""},e.prototype.dataset=function(t,n){n===void 0&&(n=de.JSONExt.emptyObject);var a=this._commands[t];return a?a.dataset.call(void 0,n):{}},e.prototype.isEnabled=function(t,n){n===void 0&&(n=de.JSONExt.emptyObject);var a=this._commands[t];return a?a.isEnabled.call(void 0,n):!1},e.prototype.isToggled=function(t,n){n===void 0&&(n=de.JSONExt.emptyObject);var a=this._commands[t];return a?a.isToggled.call(void 0,n):!1},e.prototype.isToggleable=function(t,n){var a=this._commands[t];return a?a.isToggleable:!1},e.prototype.isVisible=function(t,n){n===void 0&&(n=de.JSONExt.emptyObject);var a=this._commands[t];return a?a.isVisible.call(void 0,n):!1},e.prototype.execute=function(t,n){n===void 0&&(n=de.JSONExt.emptyObject);var a=this._commands[t];if(!a)return Promise.reject(new Error("Command '"+t+"' not registered."));var l;try{l=a.execute.call(void 0,n)}catch(f){l=Promise.reject(f)}var m=Promise.resolve(l);return this._commandExecuted.emit({id:t,args:n,result:m}),m},e.prototype.addKeyBinding=function(t){var n=this,a=qe.createKeyBinding(t);return this._keyBindings.push(a),this._keyBindingChanged.emit({binding:a,type:"added"}),new rt(function(){P.removeFirstOf(n._keyBindings,a),n._keyBindingChanged.emit({binding:a,type:"removed"})})},e.prototype.processKeydownEvent=function(t){if(!(this._replaying||e.isModifierKeyPressed(t))){var n=e.keystrokeForKeydownEvent(t);if(!n){this._replayKeydownEvents(),this._clearPendingState();return}this._keystrokes.push(n);var a=qe.matchKeyBinding(this._keyBindings,this._keystrokes,t),l=a.exact,m=a.partial;if(!l&&!m){this._replayKeydownEvents(),this._clearPendingState();return}if(t.preventDefault(),t.stopPropagation(),l&&!m){this._executeKeyBinding(l),this._clearPendingState();return}l&&(this._exactKeyMatch=l),this._keydownEvents.push(t),this._startTimer()}},e.prototype._startTimer=function(){var t=this;this._clearTimer(),this._timerID=window.setTimeout(function(){t._onPendingTimeout()},qe.CHORD_TIMEOUT)},e.prototype._clearTimer=function(){this._timerID!==0&&(clearTimeout(this._timerID),this._timerID=0)},e.prototype._replayKeydownEvents=function(){this._keydownEvents.length!==0&&(this._replaying=!0,this._keydownEvents.forEach(qe.replayKeyEvent),this._replaying=!1)},e.prototype._executeKeyBinding=function(t){var n=t.command,a=t.args;if(!this.hasCommand(n)||!this.isEnabled(n,a)){var l=this.hasCommand(n)?"enabled":"registered",m=t.keys.join(", "),f="Cannot execute key binding '"+m+"':",c="command '"+n+"' is not "+l+".";console.warn(f+" "+c);return}this.execute(n,a)},e.prototype._clearPendingState=function(){this._clearTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0},e.prototype._onPendingTimeout=function(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()},e}();(function(e){function t(c){for(var h="",g=!1,x=!1,M=!1,I=!1,b=0,v=c.split(/\s+/);b<v.length;b++){var w=v[b];w==="Accel"?re.IS_MAC?x=!0:M=!0:w==="Alt"?g=!0:w==="Cmd"?x=!0:w==="Ctrl"?M=!0:w==="Shift"?I=!0:w.length>0&&(h=w)}return{cmd:x,ctrl:M,alt:g,shift:I,key:h}}e.parseKeystroke=t;function n(c){var h="",g=t(c);return g.ctrl&&(h+="Ctrl "),g.alt&&(h+="Alt "),g.shift&&(h+="Shift "),g.cmd&&re.IS_MAC&&(h+="Cmd "),h+g.key}e.normalizeKeystroke=n;function a(c){var h;return re.IS_WIN?h=c.winKeys||c.keys:re.IS_MAC?h=c.macKeys||c.keys:h=c.linuxKeys||c.keys,h.map(n)}e.normalizeKeys=a;function l(c){return typeof c=="string"?h(c):c.map(h).join(", ");function h(g){var x=[],M=re.IS_MAC?" ":"+",I=t(g);return I.ctrl&&x.push("Ctrl"),I.alt&&x.push("Alt"),I.shift&&x.push("Shift"),re.IS_MAC&&I.cmd&&x.push("Cmd"),x.push(I.key),x.map(qe.formatKey).join(M)}}e.formatKeystroke=l;function m(c){var h=Et(),g=h.keyForKeydownEvent(c);return h.isModifierKey(g)}e.isModifierKeyPressed=m;function f(c){var h=Et(),g=h.keyForKeydownEvent(c);if(!g||h.isModifierKey(g))return"";var x=[];return c.ctrlKey&&x.push("Ctrl"),c.altKey&&x.push("Alt"),c.shiftKey&&x.push("Shift"),c.metaKey&&re.IS_MAC&&x.push("Cmd"),x.push(g),x.join(" ")}e.keystrokeForKeydownEvent=f})(Lt||(Lt={}));var qe;(function(e){e.CHORD_TIMEOUT=1e3;function t(E){var S,L;return!E.icon||typeof E.icon=="string"?(L=v(E.iconClass||E.icon,h),S=L):(L=v(E.iconClass,h),S=v(E.icon,b)),{execute:E.execute,describedBy:Nn({args:null},E.describedBy),label:v(E.label,h),mnemonic:v(E.mnemonic,g),icon:S,iconClass:L,iconLabel:v(E.iconLabel,h),caption:v(E.caption,h),usage:v(E.usage,h),className:v(E.className,h),dataset:v(E.dataset,I),isEnabled:E.isEnabled||x,isToggled:E.isToggled||M,isToggleable:E.isToggleable||!!E.isToggled,isVisible:E.isVisible||x}}e.createCommand=t;function n(E){return{keys:Lt.normalizeKeys(E),selector:w(E),command:E.command,args:E.args||de.JSONExt.emptyObject}}e.createKeyBinding=n;function a(E,S,L){for(var A=null,u=!1,d=1/0,r=0,i=0,o=E.length;i<o;++i){var p=E[i],s=y(p.keys,S);if(s!==0){if(s===2){!u&&k(p.selector,L)!==-1&&(u=!0);continue}var _=k(p.selector,L);if(!(_===-1||_>d)){var C=et.calculateSpecificity(p.selector);(!A||_<d||C>=r)&&(A=p,d=_,r=C)}}}return{exact:A,partial:u}}e.matchKeyBinding=a;function l(E){E.target.dispatchEvent(T(E))}e.replayKeyEvent=l;function m(E){return re.IS_MAC?f.hasOwnProperty(E)?f[E]:E:c.hasOwnProperty(E)?c[E]:E}e.formatKey=m;var f={Backspace:"\u232B",Tab:"\u21E5",Enter:"\u21A9",Shift:"\u21E7",Ctrl:"\u2303",Alt:"\u2325",Escape:"\u238B",PageUp:"\u21DE",PageDown:"\u21DF",End:"\u2198",Home:"\u2196",ArrowLeft:"\u2190",ArrowUp:"\u2191",ArrowRight:"\u2192",ArrowDown:"\u2193",Delete:"\u2326",Cmd:"\u2318"},c={Escape:"Esc",PageUp:"Page Up",PageDown:"Page Down",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},h=function(){return""},g=function(){return-1},x=function(){return!0},M=function(){return!1},I=function(){return{}},b=function(){};function v(E,S){return E===void 0?S:typeof E=="function"?E:function(){return E}}function w(E){if(E.selector.indexOf(",")!==-1)throw new Error("Selector cannot contain commas: "+E.selector);if(!et.isValid(E.selector))throw new Error("Invalid selector: "+E.selector);return E.selector}function y(E,S){if(E.length<S.length)return 0;for(var L=0,A=S.length;L<A;++L)if(E[L]!==S[L])return 0;return E.length>S.length?2:1}function k(E,S){for(var L=S.target,A=S.currentTarget,u=0;L!==null;L=L.parentElement,++u){if(L.hasAttribute("data-lm-suppress-shortcuts")||L.hasAttribute("data-p-suppress-shortcuts"))return-1;if(et.matches(L,E))return u;if(L===A)return-1}return-1}function T(E){var S=document.createEvent("Event"),L=E.bubbles||!0,A=E.cancelable||!0;return S.initEvent(E.type||"keydown",L,A),S.key=E.key||"",S.keyCode=E.keyCode||0,S.which=E.keyCode||0,S.ctrlKey=E.ctrlKey||!1,S.altKey=E.altKey||!1,S.shiftKey=E.shiftKey||!1,S.metaKey=E.metaKey||!1,S.view=E.view||window,S}})(qe||(qe={}));var Kn=Qe(Ut());var ve=class extends B{constructor(n){super({node:pe.createNode()});this._childIndex=-1;this._activeIndex=-1;this._openTimerID=0;this._closeTimerID=0;this._items=[];this._childMenu=null;this._parentMenu=null;this._aboutToClose=new j(this);this._menuRequested=new j(this);this.addClass("lm-Menu"),this.addClass("p-Menu"),this.setFlag(B.Flag.DisallowLayout),this.commands=n.commands,this.renderer=n.renderer||ve.defaultRenderer}dispose(){this.close(),this._items.length=0,super.dispose()}get aboutToClose(){return this._aboutToClose}get menuRequested(){return this._menuRequested}get parentMenu(){return this._parentMenu}get childMenu(){return this._childMenu}get rootMenu(){let n=this;for(;n._parentMenu;)n=n._parentMenu;return n}get leafMenu(){let n=this;for(;n._childMenu;)n=n._childMenu;return n}get contentNode(){return this.node.getElementsByClassName("lm-Menu-content")[0]}get activeItem(){return this._items[this._activeIndex]||null}set activeItem(n){this.activeIndex=n?this._items.indexOf(n):-1}get activeIndex(){return this._activeIndex}set activeIndex(n){(n<0||n>=this._items.length)&&(n=-1),n!==-1&&!pe.canActivate(this._items[n])&&(n=-1),this._activeIndex!==n&&(this._activeIndex=n,this._activeIndex>=0&&this.contentNode.childNodes[this._activeIndex]&&this.contentNode.childNodes[this._activeIndex].focus(),this.update())}get items(){return this._items}activateNextItem(){let n=this._items.length,a=this._activeIndex,l=a<n-1?a+1:0,m=l===0?n-1:l-1;this.activeIndex=P.findFirstIndex(this._items,pe.canActivate,l,m)}activatePreviousItem(){let n=this._items.length,a=this._activeIndex,l=a<=0?n-1:a-1,m=l===n-1?0:l+1;this.activeIndex=P.findLastIndex(this._items,pe.canActivate,l,m)}triggerActiveItem(){if(!this.isAttached)return;let n=this.activeItem;if(!n)return;if(this._cancelOpenTimer(),this._cancelCloseTimer(),n.type==="submenu"){this._openChildMenu(!0);return}this.rootMenu.close();let{command:a,args:l}=n;this.commands.isEnabled(a,l)?this.commands.execute(a,l):console.log(`Command '${a}' is disabled.`)}addItem(n){return this.insertItem(this._items.length,n)}insertItem(n,a){this.isAttached&&this.close(),this.activeIndex=-1;let l=Math.max(0,Math.min(n,this._items.length)),m=pe.createItem(this,a);return P.insert(this._items,l,m),this.update(),m}removeItem(n){this.removeItemAt(this._items.indexOf(n))}removeItemAt(n){this.isAttached&&this.close(),this.activeIndex=-1,P.removeAt(this._items,n)&&this.update()}clearItems(){this.isAttached&&this.close(),this.activeIndex=-1,this._items.length!==0&&(this._items.length=0,this.update())}open(n,a,l={}){if(this.isAttached)return;let m=l.forceX||!1,f=l.forceY||!1;pe.openRootMenu(this,n,a,m,f),this.activate()}handleEvent(n){switch(n.type){case"keydown":this._evtKeyDown(n);break;case"mouseup":this._evtMouseUp(n);break;case"mousemove":this._evtMouseMove(n);break;case"mouseenter":this._evtMouseEnter(n);break;case"mouseleave":this._evtMouseLeave(n);break;case"mousedown":this._evtMouseDown(n);break;case"contextmenu":n.preventDefault(),n.stopPropagation();break}}onBeforeAttach(n){this.node.addEventListener("keydown",this),this.node.addEventListener("mouseup",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("mouseenter",this),this.node.addEventListener("mouseleave",this),this.node.addEventListener("contextmenu",this),document.addEventListener("mousedown",this,!0)}onAfterDetach(n){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mouseup",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("mouseenter",this),this.node.removeEventListener("mouseleave",this),this.node.removeEventListener("contextmenu",this),document.removeEventListener("mousedown",this,!0)}onActivateRequest(n){this.isAttached&&this.node.focus()}onUpdateRequest(n){let a=this._items,l=this.renderer,m=this._activeIndex,f=pe.computeCollapsed(a),c=new Array(a.length);for(let h=0,g=a.length;h<g;++h){let x=a[h],M=h===m,I=f[h];c[h]=l.renderItem({item:x,active:M,collapsed:I,onfocus:()=>{this.activeIndex=h}})}ot.render(c,this.contentNode)}onCloseRequest(n){this._cancelOpenTimer(),this._cancelCloseTimer(),this.activeIndex=-1;let a=this._childMenu;a&&(this._childIndex=-1,this._childMenu=null,a._parentMenu=null,a.close());let l=this._parentMenu;l&&(this._parentMenu=null,l._childIndex=-1,l._childMenu=null,l.activate()),this.isAttached&&this._aboutToClose.emit(void 0),super.onCloseRequest(n)}_evtKeyDown(n){n.preventDefault(),n.stopPropagation();let a=n.keyCode;if(a===13){this.triggerActiveItem();return}if(a===27){this.close();return}if(a===37){this._parentMenu?this.close():this._menuRequested.emit("previous");return}if(a===38){this.activatePreviousItem();return}if(a===39){let c=this.activeItem;c&&c.type==="submenu"?this.triggerActiveItem():this.rootMenu._menuRequested.emit("next");return}if(a===40){this.activateNextItem();return}let l=Et().keyForKeydownEvent(n);if(!l)return;let m=this._activeIndex+1,f=pe.findMnemonic(this._items,l,m);f.index!==-1&&!f.multiple?(this.activeIndex=f.index,this.triggerActiveItem()):f.index!==-1?this.activeIndex=f.index:f.auto!==-1&&(this.activeIndex=f.auto)}_evtMouseUp(n){n.button===0&&(n.preventDefault(),n.stopPropagation(),this.triggerActiveItem())}_evtMouseMove(n){let a=P.findFirstIndex(this.contentNode.children,m=>X.hitTest(m,n.clientX,n.clientY));if(a===this._activeIndex)return;if(this.activeIndex=a,a=this.activeIndex,a===this._childIndex){this._cancelOpenTimer(),this._cancelCloseTimer();return}this._childIndex!==-1&&this._startCloseTimer(),this._cancelOpenTimer();let l=this.activeItem;!l||l.type!=="submenu"||!l.submenu||this._startOpenTimer()}_evtMouseEnter(n){for(let a=this._parentMenu;a;a=a._parentMenu)a._cancelOpenTimer(),a._cancelCloseTimer(),a.activeIndex=a._childIndex}_evtMouseLeave(n){if(this._cancelOpenTimer(),!this._childMenu){this.activeIndex=-1;return}let{clientX:a,clientY:l}=n;if(X.hitTest(this._childMenu.node,a,l)){this._cancelCloseTimer();return}this.activeIndex=-1,this._startCloseTimer()}_evtMouseDown(n){this._parentMenu||(pe.hitTestMenus(this,n.clientX,n.clientY)?(n.preventDefault(),n.stopPropagation()):this.close())}_openChildMenu(n=!1){let a=this.activeItem;if(!a||a.type!=="submenu"||!a.submenu){this._closeChildMenu();return}let l=a.submenu;if(l===this._childMenu)return;ve.saveWindowData(),this._closeChildMenu(),this._childMenu=l,this._childIndex=this._activeIndex,l._parentMenu=this,W.sendMessage(this,B.Msg.UpdateRequest);let m=this.contentNode.children[this._activeIndex];pe.openSubmenu(l,m),n&&(l.activeIndex=-1,l.activateNextItem()),l.activate()}_closeChildMenu(){this._childMenu&&this._childMenu.close()}_startOpenTimer(){this._openTimerID===0&&(this._openTimerID=window.setTimeout(()=>{this._openTimerID=0,this._openChildMenu()},pe.TIMER_DELAY))}_startCloseTimer(){this._closeTimerID===0&&(this._closeTimerID=window.setTimeout(()=>{this._closeTimerID=0,this._closeChildMenu()},pe.TIMER_DELAY))}_cancelOpenTimer(){this._openTimerID!==0&&(clearTimeout(this._openTimerID),this._openTimerID=0)}_cancelCloseTimer(){this._closeTimerID!==0&&(clearTimeout(this._closeTimerID),this._closeTimerID=0)}static saveWindowData(){pe.saveWindowData()}};(n=>{class e{renderItem(l){let m=this.createItemClass(l),f=this.createItemDataset(l),c=this.createItemARIA(l);return ie.li({className:m,dataset:f,tabindex:"0",onfocus:l.onfocus,...c},this.renderIcon(l),this.renderLabel(l),this.renderShortcut(l),this.renderSubmenu(l))}renderIcon(l){let m=this.createIconClass(l);return typeof l.item.icon=="string"?ie.div({className:m},l.item.iconLabel):ie.div({className:m},l.item.icon,l.item.iconLabel)}renderLabel(l){let m=this.formatLabel(l);return ie.div({className:"lm-Menu-itemLabel p-Menu-itemLabel"},m)}renderShortcut(l){let m=this.formatShortcut(l);return ie.div({className:"lm-Menu-itemShortcut p-Menu-itemShortcut"},m)}renderSubmenu(l){return ie.div({className:"lm-Menu-itemSubmenuIcon p-Menu-itemSubmenuIcon"})}createItemClass(l){let m="lm-Menu-item";m+=" p-Menu-item",l.item.isEnabled||(m+=" lm-mod-disabled",m+=" p-mod-disabled"),l.item.isToggled&&(m+=" lm-mod-toggled",m+=" p-mod-toggled"),l.item.isVisible||(m+=" lm-mod-hidden",m+=" p-mod-hidden"),l.active&&(m+=" lm-mod-active",m+=" p-mod-active"),l.collapsed&&(m+=" lm-mod-collapsed",m+=" p-mod-collapsed");let f=l.item.className;return f&&(m+=` ${f}`),m}createItemDataset(l){let m,{type:f,command:c,dataset:h}=l.item;return f==="command"?m={...h,type:f,command:c}:m={...h,type:f},m}createIconClass(l){let m="lm-Menu-itemIcon";m+=" p-Menu-itemIcon";let f=l.item.iconClass;return f?`${m} ${f}`:m}createItemARIA(l){let m={};switch(l.item.type){case"separator":m.role="presentation";break;case"submenu":m["aria-haspopup"]="true",l.item.isEnabled||(m["aria-disabled"]="true");break;default:l.item.isEnabled||(m["aria-disabled"]="true"),m.role="menuitem"}return m}formatLabel(l){let{label:m,mnemonic:f}=l.item;if(f<0||f>=m.length)return m;let c=m.slice(0,f),h=m.slice(f+1),g=m[f],x=ie.span({className:"lm-Menu-itemMnemonic p-Menu-itemMnemonic"},g);return[c,x,h]}formatShortcut(l){let m=l.item.keyBinding;return m?Lt.formatKeystroke(m.keys):null}}n.Renderer=e,n.defaultRenderer=new e})(ve||={});var pe;(y=>{y.TIMER_DELAY=300,y.SUBMENU_OVERLAP=3;let n=null,a=0;function l(){return a>0?(a--,n):M()}function m(){n=M(),a++}y.saveWindowData=m;function f(){let k=document.createElement("div"),T=document.createElement("ul");return T.className="lm-Menu-content",T.classList.add("p-Menu-content"),k.appendChild(T),T.setAttribute("role","menu"),k.tabIndex=0,k}y.createNode=f;function c(k){return k.type!=="separator"&&k.isEnabled&&k.isVisible}y.canActivate=c;function h(k,T){return new w(k.commands,T)}y.createItem=h;function g(k,T,E){for(let S=k;S;S=S.childMenu)if(X.hitTest(S.node,T,E))return!0;return!1}y.hitTestMenus=g;function x(k){let T=new Array(k.length);P.fill(T,!1);let E=0,S=k.length;for(;E<S;++E){let u=k[E];if(!!u.isVisible){if(u.type!=="separator")break;T[E]=!0}}let L=S-1;for(;L>=0;--L){let u=k[L];if(!!u.isVisible){if(u.type!=="separator")break;T[L]=!0}}let A=!1;for(;++E<L;){let u=k[E];!u.isVisible||(u.type!=="separator"?A=!1:A?T[E]=!0:A=!0)}return T}y.computeCollapsed=x;function M(){return{pageXOffset:window.pageXOffset,pageYOffset:window.pageYOffset,clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight}}function I(k,T,E,S,L){let A=l(),u=A.pageXOffset,d=A.pageYOffset,r=A.clientWidth,i=A.clientHeight;W.sendMessage(k,B.Msg.UpdateRequest);let o=i-(L?E:0),p=k.node,s=p.style;s.opacity="0",s.maxHeight=`${o}px`,B.attach(k,document.body);let{width:_,height:C}=p.getBoundingClientRect();!S&&T+_>u+r&&(T=u+r-_),!L&&E+C>d+i&&(E>d+i?E=d+i-C:E=E-C),s.transform=`translate(${Math.max(0,T)}px, ${Math.max(0,E)}px`,s.opacity="1"}y.openRootMenu=I;function b(k,T){let E=l(),S=E.pageXOffset,L=E.pageYOffset,A=E.clientWidth,u=E.clientHeight;W.sendMessage(k,B.Msg.UpdateRequest);let d=u,r=k.node,i=r.style;i.opacity="0",i.maxHeight=`${d}px`,B.attach(k,document.body);let{width:o,height:p}=r.getBoundingClientRect(),s=X.boxSizing(k.node),_=T.getBoundingClientRect(),C=_.right-3;C+o>S+A&&(C=_.left+3-o);let O=_.top-s.borderTop-s.paddingTop;O+p>L+u&&(O=_.bottom+s.borderBottom+s.paddingBottom-p),i.transform=`translate(${Math.max(0,C)}px, ${Math.max(0,O)}px`,i.opacity="1"}y.openSubmenu=b;function v(k,T,E){let S=-1,L=-1,A=!1,u=T.toUpperCase();for(let d=0,r=k.length;d<r;++d){let i=(d+E)%r,o=k[i];if(!c(o))continue;let p=o.label;if(p.length===0)continue;let s=o.mnemonic;if(s>=0&&s<p.length){p[s].toUpperCase()===u&&(S===-1?S=i:A=!0);continue}L===-1&&p[0].toUpperCase()===u&&(L=i)}return{index:S,multiple:A,auto:L}}y.findMnemonic=v;class w{constructor(T,E){this._commands=T,this.type=E.type||"command",this.command=E.command||"",this.args=E.args||Kn.JSONExt.emptyObject,this.submenu=E.submenu||null}get label(){return this.type==="command"?this._commands.label(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.label:""}get mnemonic(){return this.type==="command"?this._commands.mnemonic(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.mnemonic:-1}get icon(){return this.type==="command"?this._commands.icon(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.icon:this.iconClass}get iconClass(){return this.type==="command"?this._commands.iconClass(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.iconClass:""}get iconLabel(){return this.type==="command"?this._commands.iconLabel(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.iconLabel:""}get caption(){return this.type==="command"?this._commands.caption(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.caption:""}get className(){return this.type==="command"?this._commands.className(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.className:""}get dataset(){return this.type==="command"?this._commands.dataset(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.dataset:{}}get isEnabled(){return this.type==="command"?this._commands.isEnabled(this.command,this.args):this.type==="submenu"?this.submenu!==null:!0}get isToggled(){return this.type==="command"?this._commands.isToggled(this.command,this.args):!1}get isVisible(){return this.type==="command"?this._commands.isVisible(this.command,this.args):this.type==="submenu"?this.submenu!==null:!0}get keyBinding(){if(this.type==="command"){let{command:T,args:E}=this;return P.findLastValue(this._commands.keyBindings,S=>S.command===T&&Kn.JSONExt.deepEqual(S.args,E))||null}return null}}})(pe||={});var lt=class extends ve.Renderer{formatLabel(t){let{label:n,mnemonic:a}=t.item;if(a<0||a>=n.length)return n;let l=n.slice(0,a),m=n.slice(a+1),f=n[a],c=ae.span({className:"lm-Menu-itemMnemonic p-Menu-itemMnemonic"},f);return[l,c,m]}renderLabel(t){let n=this.formatLabel(t);return ae.div({className:"lm-Menu-itemLabel p-Menu-itemLabel"},n)}renderSubmenu(t){return ae.div({className:"lm-Menu-itemSubmenuIcon p-Menu-itemSubmenuIcon"})}renderItem(t){let n=this.createItemClass(t),a=this.createItemDataset(t),l=this.createItemARIA(t);return ae.li({className:n,dataset:a,tabindex:"0",onfocus:t.onfocus,...l},this.renderLabel(t),this.renderShortcut(t),this.renderSubmenu(t))}};var sn=class extends he{constructor(t,n={}){super(n),this._addEventListeners(),this.__content_node__,this._workspace=t}onUpdateRequest(t){this.__content_node__=this.contentNode;let n=this._titles,a=this.renderer,l=this.currentTitle,m=new Array;for(let f=0,c=n.length;f<c;++f){let h=n[f],g=h===l,x=n.filter(I=>I!==l),M;x.length>0&&(M=this.onClick.bind(this,x,f)),g?m[f]=a.renderTab({title:h,zIndex:n.length+1,current:g,onClick:M}):m[f]=a.renderInert()}en.render(m,this.contentNode),this._check_shade()}onClick(t,n,a){let l=new ye,m=new lt(null);this._menu=new ve({commands:l,renderer:m}),this._menu.addClass("perspective-workspace-menu"),this._menu.dataset.minwidth=this._titles[n];for(let c of t)this._menu.addItem({command:"tabbar:switch",args:{title:c}});l.addCommand("tabbar:switch",{execute:async({title:c})=>{let h=this._titles.findIndex(g=>g===c);this.currentTitle=c,this.tabActivateRequested.emit({index:h,title:c})},label:({title:c})=>c.label||"untitled",mnemonic:0});let f=a.target.getBoundingClientRect();this._menu.open(f.x,f.y+f.height),this._menu.aboutToClose.connect(()=>{this._menu=void 0}),a.preventDefault(),a.stopPropagation()}_check_shade(){Array.from(this.contentNode.children).filter(t=>t.classList.contains("settings_open")&&t.classList.contains("p-mod-current")).length>0?this.contentNode.classList.add("inactive-blur"):this.contentNode.classList.remove("inactive-blur")}handleEvent(t){switch(this._menu?.close(),this.retargetEvent(t),t.type){case"contextmenu":let n=this.currentTitle.owner;this.parent.parent.parent.showContextMenu(n,t),t.preventDefault();break;case"mousedown":if(t.target.id===Zt.Label)return;break;case"pointerdown":if(t.target.id===Zt.Label){let a=this.contentNode.children,l=bn.findFirstIndex(a,f=>Ln.hitTest(f,t.clientX,t.clientY));if(l<0)break;let m=this.titles[l];this._workspace._maximize(m.owner),requestAnimationFrame(()=>m.owner.viewer.toggleConfig());return}break}super.handleEvent(t)}retargetEvent(t){return Object.defineProperty(t,"target",{value:t.composedPath()[0],enumerable:!0}),t}_addEventListeners(){this.node.addEventListener("dblclick",this),this.node.addEventListener("contextmenu",this)}};var Vn=class extends Ae.Renderer{constructor(t){super(),this._workspace=t}createTabBar(){let t=new sn(this._workspace,{renderer:new Xt});return t.addClass("p-DockPanel-tabBar"),t}},ce=class extends Ae{constructor(t){super({renderer:new Vn(t)}),this._renderer.dock=this}_onTabDetachRequested(t,n){super._onTabDetachRequested(t,n);let a=t.titles[n.index].owner,l=this.layout.saveLayout();wt(this.layout.widgets()).length>1&&this.layout.removeWidget(a),a.addClass("widget-blur"),this._drag&&this._drag._promise.then(()=>{a.node.isConnected||this.layout.restoreLayout(l),a.removeClass("widget-blur")})}static getWidgets(t){return t?.hasOwnProperty("main")?ce.getWidgets(t.main):t?.children?t.children.flatMap(n=>ce.getWidgets(n)):t?.widgets?t.widgets:[]}static mapWidgets(t,n){return n.main?n.main=ce.mapWidgets(t,n.main):n.children?n.children=n.children.map(a=>ce.mapWidgets(t,a)):n.widgets&&(n.widgets=n.widgets.map(a=>t(a))),n}onAfterAttach(){this.spacing=parseInt(window.getComputedStyle(this.node).padding)||0}};var sr=(e,t)=>{let n=new ye;return n.addCommand("workspace:export",{execute:async a=>{let l=document.createElement("perspective-export-menu");e.apply_indicator_theme(),l.unsafe_set_model(await a.widget.viewer.unsafeGetModel()),l.open(t),a.init_overlay(),l.addEventListener("blur",()=>{a.contextMenu.aboutToClose.emit({})})},isEnabled:a=>{if(a.contextMenu.node.isConnected){let l=a.contextMenu.node.getBoundingClientRect();t.style.top=l.top+"px",t.style.left=l.left+"px"}return!0},label:"Export",mnemonic:0}),n.addCommand("workspace:copy",{execute:async a=>{let l=document.createElement("perspective-copy-menu");e.apply_indicator_theme(),l.unsafe_set_model(await a.widget.viewer.unsafeGetModel()),l.open(t),a.init_overlay(),l.addEventListener("blur",()=>{a.contextMenu.aboutToClose.emit({})})},isEnabled:a=>{if(a.contextMenu.node.isConnected){let l=a.contextMenu.node.getBoundingClientRect();t.style.top=l.top+"px",t.style.left=l.left+"px"}return!0},label:"Copy",mnemonic:0}),n.addCommand("workspace:new",{execute:a=>{let l=e._createWidgetAndNode({config:{table:a.table}});e.dockpanel.addWidget(l,{mode:"split-right",ref:a.widget})},label:a=>a.table}),n.addCommand("workspace:newview",{execute:async a=>{let l=await a.target_widget.save(),m=e._createWidgetAndNode({config:l});e.dockpanel.addWidget(m,{mode:"split-right",ref:a.widget})},isVisible:a=>a.target_widget.title.label!=="",label:a=>a.target_widget.title.label||"untitled"}),n.addCommand("workspace:reset",{execute:a=>a.widget.viewer.reset(),label:"Reset",mnemonic:0}),n.addCommand("workspace:duplicate",{execute:({widget:a})=>e.duplicate(a),isVisible:a=>a.widget.parent===e.dockpanel,label:"Duplicate",mnemonic:0}),n.addCommand("workspace:master",{execute:a=>e.toggleMasterDetail(a.widget),isVisible:()=>e.mode===Ne.GLOBAL_FILTERS,label:a=>a.widget.parent===e.dockpanel?"Create Global Filter":"Remove Global Filter",mnemonic:0}),n.addCommand("workspace:close",{execute:a=>{a.widget.close()},label:()=>"Close",mnemonic:0}),n.addCommand("workspace:help",{label:"Shift+Click for Browser Menu",isEnabled:()=>!1}),n.add,n};var Ct=class extends B{constructor({viewer:t,node:n}){super({node:n}),this.viewer=t,this.master=!1}set master(t){t!==void 0&&this._master!==t&&(t?(this.viewer.classList.add("workspace-master-widget"),this.viewer.classList.remove("workspace-detail-widget"),this.viewer.toggleAttribute?.("selectable",!0)):(this.viewer.classList.add("workspace-detail-widget"),this.viewer.classList.remove("workspace-master-widget"),this.viewer.removeAttribute("selectable")),this._master=t)}get master(){return this._master}get name(){return console.error("Test"),this._title}set linked(t){t!==void 0&&(t?this.viewer.setAttribute("linked",""):this.viewer.removeAttribute("linked"))}get linked(){return this.viewer.hasAttribute("linked")}toggleConfig(){return this.viewer.toggleConfig()}async load(t){this._is_table_loaded=!0;let n=[this.viewer.load(t)];this._restore_config&&n.push(this._restore_config()),await Promise.all(n)}restore(t){let{master:n,table:a,linked:l,name:m,editable:f,selectable:c,...h}=t;this.master=n,this.linked=l,this._title=t.title,this.title.label=t.title,a&&this.viewer.setAttribute("table",a),c&&this.viewer.setAttribute("selectable",c),f&&this.viewer.setAttribute("editable",f);let g=()=>this.viewer.restore({...h});if(this._is_table_loaded)return g();this._restore_config=g}async save(){let t={...await this.viewer.save(),master:this.master,table:this.viewer.getAttribute("table"),linked:this.linked};return this.viewer.hasAttribute("selectable")&&(t.selectable=this.viewer.getAttribute("selectable")),this.viewer.hasAttribute("editable")&&(t.editable=this.viewer.getAttribute("editable")),t}removeClass(t){super.removeClass(t),this.viewer&&this.viewer.classList.remove(t)}async onCloseRequest(t){super.onCloseRequest(t),this.viewer.parentElement&&this.viewer.parentElement.removeChild(this.viewer),await this.viewer.delete()}};var Xu=Qe(Hu()),Zu=Qe(Yu()),wi=[1,3],xg=0,yt={LEFT:"left",RIGHT:"right"},Ne={GLOBAL_FILTERS:"globalFilters",LINKED:"linked"},Ii=class extends Map{set(t,n){this._set_listener?.(t,n),super.set(t,n)}get(t){return super.get(t)}delete(t){return this._delete_listener?.(t)?super.delete(t):!1}addSetListener(t){this._set_listener=t}addDeleteListener(t){this._delete_listener=t}},qt=class extends He{constructor(t,n={}){super({orientation:"horizontal"}),this.addClass("perspective-workspace"),this.dockpanel=new ce(this),this.detailPanel=new it,this.detailPanel.layout.fitPolicy="set-no-constraint",this.detailPanel.addClass("perspective-scroll-panel"),this.detailPanel.addWidget(this.dockpanel),this.masterPanel=new He({orientation:"vertical"}),this.masterPanel.addClass("master-panel"),this.dockpanel.layoutModified.connect(()=>this.workspaceUpdated()),this.addWidget(this.detailPanel),this.spacing=8,this.element=t,this._side=n.side||yt.LEFT,this.mode=n.mode||Ne.GLOBAL_FILTERS,this._linkedViewers=[],this.listeners=new WeakMap,this._tables=new Ii,this._tables.addSetListener(this._set_listener.bind(this)),this._tables.addDeleteListener(this._delete_listener.bind(this)),this.indicator=this.init_indicator(),this.commands=sr(this,this.indicator),this.menuRenderer=new lt(this.element),this.customCommands=[],t.addEventListener("contextmenu",a=>this.showContextMenu(null,a))}init_indicator(){let t=document.createElement("perspective-indicator");return t.style.position="fixed",t.style.pointerEvents="none",document.body.appendChild(t),t}apply_indicator_theme(){let t=JSON.parse(window.getComputedStyle(this.element).getPropertyValue("--theme-name").trim());this.indicator.setAttribute("theme",t)}addTable(t,n){this.tables.set(t,n)}getTable(t){return this.tables.get(t)}removeTable(t){return this.tables.delete(t)}get tables(){return this._tables}set side(t){if(yt[t.toUpperCase()]===void 0){console.warn("Unknown `side` attribute:",t);return}if(this._side!==t&&this.masterPanel.isAttached){let n=this.relativeSizes().slice().reverse();this.detailPanel.close(),this.detailPanel.removeClass("has-master-panel"),this.masterPanel.close(),t===yt.LEFT?(this.addWidget(this.masterPanel),this.addWidget(this.detailPanel)):(this.addWidget(this.detailPanel),this.addWidget(this.masterPanel)),this.setRelativeSizes(n)}this._side=t}get side(){return this._side}async save(){let t=this.dockpanel.mode==="single-document",n=t?this._minimizedLayoutSlots:ce.mapWidgets(f=>f.viewer.getAttribute("slot"),this.dockpanel.saveLayout()),a={sizes:[...this.relativeSizes()],detail:n,mode:this.mode};if(this.masterPanel.isAttached){let f={widgets:this.masterPanel.widgets.map(c=>c.viewer.getAttribute("slot")),sizes:[...this.masterPanel.relativeSizes()]};a.master=f}let l={};for(let f of this.masterPanel.widgets)l[f.viewer.getAttribute("slot")]=await f.save();let m=ce.getWidgets(t?this._minimizedLayout:this.dockpanel.saveLayout());return await Promise.all(m.map(async f=>{let c=f.viewer.getAttribute("slot");l[c]=await f.save(),l[c].settings=!1})),{...a,viewers:l}}async restore(t){let{sizes:n,master:a,detail:l,viewers:m=[],mode:f=Ne.GLOBAL_FILTERS}=structuredClone(t);this.mode=f,this.mode===Ne.GLOBAL_FILTERS&&a&&a.widgets.length>0?this.setupMasterPanel(n||wi):(this.masterPanel.isAttached&&(this.detailPanel.removeClass("has-master-panel"),this.masterPanel.close()),this.addWidget(this.detailPanel));let c=[];for(let h of this._capture_viewers())for(let g of this._capture_widgets()){let x=this._restore_callback.bind(this,m,h,g);if(l){let M=ce.mapWidgets(x.bind(this,!1),l);this.dockpanel.mode="multiple-document",this.dockpanel.restoreLayout(M),c=c.concat(ce.getWidgets(M).map(I=>I.task))}a&&(this.mode===Ne.GLOBAL_FILTERS?(c=c.concat(a.widgets.map(M=>x.bind(this,!0)(M).task)),a.sizes&&this.masterPanel.setRelativeSizes(a.sizes)):c=c.concat(a.widgets.map(M=>{let I=x.bind(this,void 0)(M);return this.dockpanel.addWidget(I),I.task})))}await Promise.all(c)}*_capture_widgets(){let t=this.getAllWidgets();yield t;for(let n of t)n.node.isConnected||n.close()}*_capture_viewers(){let t=Array.from(this.element.children);yield t;let n=this.getAllWidgets();for(let a of t)!n.find(m=>m.viewer===a)&&Array.from(this.element.children).indexOf(a)>-1&&(this.element.removeChild(a),a.delete())}_restore_callback(t,n,a,l,m){let f;typeof m=="string"?f=t[m]:(f=m,m=f.slot);let c=!!m&&n.find(g=>g.getAttribute("slot")===m),h;return c?(h=a.find(g=>g.viewer===c),h?(h.load(this.tables.get(f.table)),h.restore({...f,master:l})):h=this._createWidget({config:{...f,master:l},viewer:c})):f?h=this._createWidgetAndNode({config:{...f,master:l},slot:m}):console.error(`Could not find or create <perspective-viewer> for slot "${m}"`),(l||this.mode===Ne.LINKED)&&(h.viewer.addEventListener("perspective-select",this.onPerspectiveSelect.bind(this)),h.viewer.addEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),this.masterPanel.addWidget(h)),h.linked&&this._linkWidget(h),h}_validate(t){if(!t||!("view"in t)||typeof t?.view!="function")throw new Error("Only `perspective.Table()` instances can be added to `tables`");return t}_set_listener(t,n){typeof n?.then=="function"?n=n.then(this._validate):this._validate(n),this.getAllWidgets().forEach(a=>{a.viewer.getAttribute("table")===t&&a.load(n)})}_delete_listener(t){return this.getAllWidgets().some(a=>a.viewer.getAttribute("table")===t)?(console.error(`Cannot remove table: '${t}' because it's still bound to widget(s)`),!1):!0}update_widget_for_viewer(t){let n=t.getAttribute("slot");if(n||(n=this._gen_id(),t.setAttribute("slot",n)),t.getAttribute("table")){if(!this.node.querySelector(`slot[name=${n}]`)){console.warn(`Undocked ${t.outerHTML}, creating default layout`);let m=this._createWidget({table:t.getAttribute("table"),config:{master:!1},viewer:t});this.dockpanel.addWidget(m),this.dockpanel.activateWidget(m)}}else console.warn(`No table set for ${t.outerHTML}`)}remove_unslotted_widgets(t){let n=this.getAllWidgets();for(let a of n)t.indexOf(a.viewer)===-1&&a.close()}update_details_panel(t){this.masterPanel.widgets.length===0&&this.masterPanel.close()}async duplicate(t){this.dockpanel.mode==="single-document"&&this.toggleSingleDocument(t);let n=await t.save();n.title=n.title?`${n.title} (*)`:"";let a=this._createWidgetAndNode({config:n});if(n.linked&&this._linkWidget(a),t.master){let l=this.masterPanel.widgets.indexOf(t)+1;this.masterPanel.insertWidget(l,a)}else this.dockpanel.addWidget(a,{mode:"split-right",ref:t});await a.task}toggleMasterDetail(t){let n=t.parent!==this.dockpanel;this.element.dispatchEvent(new CustomEvent("workspace-toggle-global-filter",{detail:{widget:t,isGlobalFilter:!n}})),n?this.makeDetail(t):(this.dockpanel.mode==="single-document"&&this.toggleSingleDocument(t),this.makeMaster(t))}_maximize(t){t.viewer.classList.add("widget-maximize"),this._minimizedLayout=this.dockpanel.saveLayout(),this._minimizedLayoutSlots=ce.mapWidgets(n=>n.viewer.getAttribute("slot"),this.dockpanel.saveLayout()),this._maximizedWidget=t,this.dockpanel.mode="single-document",this.dockpanel.activateWidget(t)}_unmaximize(){this._maximizedWidget.viewer.classList.remove("widget-maximize"),this.dockpanel.mode="multiple-document",this.dockpanel.restoreLayout(this._minimizedLayout)}toggleSingleDocument(t){this.dockpanel.mode!=="single-document"?this._maximize(t):this._unmaximize()}async _filterViewer(t,n,a){let l=await t.save(),m=await t.getTable(),f=Object.keys(await m.schema()),c=l.filter||[],h=M=>M[0]&&f.includes(M[0]),g=n.filter(h);g.push(...c.filter(M=>!a.has(M[0])));let x=(0,Xu.default)(g,M=>M[0]);await t.restore({filter:x})}async onPerspectiveSelect(t){let n=await t.target.save();if(t.type==="perspective-click"&&(n.plugin==="Datagrid"||n.plugin===null))return;let a=new Set([...n.group_by||[],...n.split_by||[],...(n.filter||[]).map(m=>m[0])]),l=[...t.detail.config.filter];this.mode===Ne.LINKED?this._linkedViewers.forEach(m=>{m!==t.target&&this._filterViewer(m,l,a)}):wt(this.dockpanel.widgets()).forEach(m=>this._filterViewer(m.viewer,l,a))}async makeMaster(t){t.master=!0,t.viewer.hasAttribute("settings")&&await t.toggleConfig(),this.masterPanel.isAttached||(this.detailPanel.close(),this.setupMasterPanel(wi)),this.masterPanel.addWidget(t),t.isHidden&&t.show(),t.viewer.restyleElement(),t.viewer.addEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),t.viewer.addEventListener("perspective-select",this.onPerspectiveSelect.bind(this))}makeDetail(t){t.master=!1,this.dockpanel.addWidget(t,{mode:`split-${this._side}`}),this.masterPanel.widgets.length===0&&(this.detailPanel.close(),this.masterPanel.close(),this.detailPanel.removeClass("has-master-panel"),this.addWidget(this.detailPanel)),t.viewer.restyleElement(),t.viewer.removeEventListener("perspective-click",this.onPerspectiveSelect.bind(this)),t.viewer.removeEventListener("perspective-select",this.onPerspectiveSelect.bind(this))}isLinked(t){return this._linkedViewers.indexOf(t.viewer)>-1}async _linkWidget(t){t.title.className+=" linked",this._linkedViewers.indexOf(t.viewer)===-1&&(this._linkedViewers.push(t.viewer),this._linkedViewers.length===1&&this.getAllWidgets().forEach(async n=>{(await n.viewer.save()).group_by&&await n.viewer.restore({selectable:!0})}))}toggleLink(t){t.linked=!t.linked,t.linked?this._linkWidget(t):(t.title.className=t.title.className.replace(/ linked/g,""),this._linkedViewers=this._linkedViewers.filter(n=>n!==t.viewer),this._linkedViewers.length===0&&this.getAllWidgets().forEach(n=>n.viewer.restore({selectable:!1})))}createContextMenu(t){let n=new ve({commands:this.commands,renderer:this.menuRenderer}),a=Oi(this.dockpanel.tabBars(),m=>m.currentTitle.owner===t),l=()=>{t&&(t.addClass("context-focus"),t.viewer.classList.add("context-focus"),a&&a.node.classList.add("context-focus"),this.element.classList.add("context-menu"),this.addClass("context-menu"),t.viewer.classList.contains("workspace-master-widget")?n.node.classList.add("workspace-master-menu"):n.node.classList.remove("workspace-master-menu"))};return n.init_overlay=l,(t?.parent===this.dockpanel||t===null)&&n.addItem({type:"submenu",command:"workspace:newmenu",submenu:(()=>{let m=new ve({commands:this.commands,renderer:this.menuRenderer});for(let h of this.tables.keys())m.addItem({command:"workspace:new",args:{table:h,widget:t}});let f=ce.getWidgets(this.dockpanel.saveLayout());f.length>0&&m.addItem({type:"separator"});let c=new Set;for(let h of f)c.has(h.title.label)||(m.addItem({command:"workspace:newview",args:{widget:t,target_widget:h}}),c.add(h.title.label));return m.title.label="New Table",m})()}),t&&(t?.parent===this.dockpanel&&n.addItem({type:"separator"}),n.addItem({command:"workspace:maximize",args:{widget:t}}),n.addItem({command:"workspace:minimize",args:{widget:t}}),n.addItem({command:"workspace:duplicate",args:{widget:t}}),n.addItem({command:"workspace:master",args:{widget:t}}),n.addItem({command:"workspace:link",args:{widget:t}}),n.addItem({type:"separator"}),n.addItem({command:"workspace:reset",args:{widget:t}}),n.addItem({command:"workspace:export",args:{contextMenu:n,widget:t,init_overlay:l}}),n.addItem({command:"workspace:copy",args:{contextMenu:n,widget:t,init_overlay:l}}),n.addItem({type:"separator"}),n.addItem({command:"workspace:close",args:{widget:t}}),n.addItem({command:"workspace:help"})),this.customCommands.length>0&&(n.addItem({type:"separator"}),this.customCommands.forEach(m=>{n.addItem({command:m,args:{widget:t}})})),n.aboutToClose.connect(()=>{t&&(this.element.classList.remove("context-menu"),this.removeClass("context-menu"),t.removeClass("context-focus"),a?.node?.classList.remove("context-focus"))}),n}showContextMenu(t,n){if(!n.shiftKey){let a=this.createContextMenu(t);a.init_overlay(),a.open(n.clientX,n.clientY),n.preventDefault(),n.stopPropagation()}}clearLayout(){this.getAllWidgets().forEach(t=>t.close()),this.widgets.forEach(t=>t.close()),this.detailPanel.close(),this._linkedViewers=[],this.masterPanel.isAttached&&(this.detailPanel.removeClass("has-master-panel"),this.masterPanel.close())}setupMasterPanel(t){this.detailPanel.addClass("has-master-panel"),this.side===yt.RIGHT?(this.addWidget(this.detailPanel),this.addWidget(this.masterPanel),this.setRelativeSizes(t.slice().reverse())):(this.addWidget(this.masterPanel),this.addWidget(this.detailPanel),this.setRelativeSizes(t))}_addContextMenuItem(t){this.customCommands.push(t.id),this.commands.addCommand(t.id,{execute:n=>t.execute({widget:n.widget}),label:t.label,isVisible:n=>t.isVisible({widget:n.widget}),mnemonic:0})}addViewer(t){let n=this._createWidgetAndNode({config:t});this.dockpanel.mode==="single-document"&&this.toggleSingleDocument(),t.master?(this.masterPanel.isAttached||this.setupMasterPanel(wi),this.masterPanel.addWidget(n)):(this.detailPanel.isAttached||this.addWidget(this.detailPanel),this.dockpanel.addWidget(n,{mode:"split-right"})),this.update()}_createWidgetAndNode({config:t,slot:n}){let a=this._createNode(n),l=t.table,m=document.createElement("perspective-viewer");return m.setAttribute("slot",a.querySelector("slot").getAttribute("name")),l&&m.setAttribute("table",l),this._createWidget({config:t,node:a,viewer:m})}_gen_id(){let t=`PERSPECTIVE_GENERATED_ID_${xg++}`;return this.element.querySelector(`[slot=${t}]`)&&(t=this._gen_id()),t}_createNode(t){let n=this.node.querySelector(`slot[name=${t}]`);if(n)n=n.parentElement.parentElement;else{let a=document.createElement("slot");t=t||this._gen_id(),a.setAttribute("name",t);let l=document.createElement("div");l.classList.add("viewer-container"),l.appendChild(a),n=document.createElement("div"),n.classList.add("workspace-widget"),n.appendChild(l)}return n}_createWidget({config:t,node:n,viewer:a}){if(!n){let c=a.getAttribute("slot");n=this.node.querySelector(`slot[name=${c}]`),n?n=n.parentElement.parentElement:n=this._createNode(c)}let l=this.tables.get(a.getAttribute("table")||t.table),m=new Ct({node:n,viewer:a});m.task=(async()=>{l&&m.load(l),await m.restore(t)})();let f=new CustomEvent("workspace-new-view",{detail:{config:t,widget:m}});return this.element.dispatchEvent(f),m.title.closable=!0,this.element.appendChild(m.viewer),this._addWidgetEventListeners(m),m}_addWidgetEventListeners(t){this.listeners.has(t)&&this.listeners.get(t)();let n=m=>{!m.detail&&this.dockpanel.mode==="single-document"&&this._unmaximize()},a=m=>this.showContextMenu(t,m),l=async m=>{this.workspaceUpdated();let f=await m.target?.save();f&&(t.title.label=f.title)};t.node.addEventListener("contextmenu",a),t.viewer.addEventListener("perspective-toggle-settings",n),t.viewer.addEventListener("perspective-config-update",l),t.viewer.addEventListener("perspective-plugin-update",this.workspaceUpdated.bind(this)),t.title.changed.connect(l),this.listeners.set(t,()=>{t.node.removeEventListener("contextmenu",a),t.viewer.removeEventListener("perspective-toggle-settings",n),t.viewer.removeEventListener("perspective-config-update",l),t.viewer.removeEventListener("perspective-plugin-update",this.workspaceUpdated.bind(this)),t.title.changed.disconnect(l)})}getAllWidgets(){return[...this.masterPanel.widgets,...wt(this.dockpanel.widgets())]}async _fireUpdateEvent(){let t=await this.save();if(t){let n={};this.tables.forEach((a,l)=>{n[l]=a}),this.element.dispatchEvent(new CustomEvent("workspace-layout-update",{detail:{tables:n,layout:t}}))}}async workspaceUpdated(){this._save||(this._save=(0,Zu.default)(()=>this.dockpanel.mode!=="single-document"&&this._fireUpdateEvent(),500)),this._save()}};var Nt;(function(e){function t(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s){var _=(r+s)%o;if(u[_]===d)return _}return-1}e.firstIndexOf=t;function n(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;r<i?p=r+1+(o-i):p=r-i+1;for(var s=0;s<p;++s){var _=(r-s+o)%o;if(u[_]===d)return _}return-1}e.lastIndexOf=n;function a(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s){var _=(r+s)%o;if(d(u[_],_))return _}return-1}e.findFirstIndex=a;function l(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;r<i?p=r+1+(o-i):p=r-i+1;for(var s=0;s<p;++s){var _=(r-s+o)%o;if(d(u[_],_))return _}return-1}e.findLastIndex=l;function m(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=a(u,d,r,i);return o!==-1?u[o]:void 0}e.findFirstValue=m;function f(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=l(u,d,r,i);return o!==-1?u[o]:void 0}e.findLastValue=f;function c(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var p=u.length;if(p===0)return 0;i<0?i=Math.max(0,i+p):i=Math.min(i,p-1),o<0?o=Math.max(0,o+p):o=Math.min(o,p-1);for(var s=i,_=o-i+1;_>0;){var C=_>>1,O=s+C;r(u[O],d)<0?(s=O+1,_-=C+1):_=C}return s}e.lowerBound=c;function h(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var p=u.length;if(p===0)return 0;i<0?i=Math.max(0,i+p):i=Math.min(i,p-1),o<0?o=Math.max(0,o+p):o=Math.min(o,p-1);for(var s=i,_=o-i+1;_>0;){var C=_>>1,O=s+C;r(u[O],d)>0?_=C:(s=O+1,_-=C+1)}return s}e.upperBound=h;function g(u,d,r){if(u===d)return!0;if(u.length!==d.length)return!1;for(var i=0,o=u.length;i<o;++i)if(r?!r(u[i],d[i]):u[i]!==d[i])return!1;return!0}e.shallowEqual=g;function x(u,d){d===void 0&&(d={});var r=d.start,i=d.stop,o=d.step;if(o===void 0&&(o=1),o===0)throw new Error("Slice `step` cannot be zero.");var p=u.length;r===void 0?r=o<0?p-1:0:r<0?r=Math.max(r+p,o<0?-1:0):r>=p&&(r=o<0?p-1:p),i===void 0?i=o<0?-1:p:i<0?i=Math.max(i+p,o<0?-1:0):i>=p&&(i=o<0?p-1:p);var s;o<0&&i>=r||o>0&&r>=i?s=0:o<0?s=Math.floor((i-r+1)/o+1):s=Math.floor((i-r-1)/o+1);for(var _=[],C=0;C<s;++C)_[C]=u[r+C*o];return _}e.slice=x;function M(u,d,r){var i=u.length;if(!(i<=1)&&(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1),d!==r)){for(var o=u[d],p=d<r?1:-1,s=d;s!==r;s+=p)u[s]=u[s+p];u[r]=o}}e.move=M;function I(u,d,r){d===void 0&&(d=0),r===void 0&&(r=-1);var i=u.length;if(!(i<=1))for(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1);d<r;){var o=u[d],p=u[r];u[d++]=p,u[r--]=o}}e.reverse=I;function b(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(!(o<=1)&&(r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1),!(r>=i))){var p=i-r+1;if(d>0?d=d%p:d<0&&(d=(d%p+p)%p),d!==0){var s=r+d;I(u,r,s-1),I(u,s,i),I(u,r,i)}}}e.rotate=b;function v(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o!==0){r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s)u[(r+s)%o]=d}}e.fill=v;function w(u,d,r){var i=u.length;d<0?d=Math.max(0,d+i):d=Math.min(d,i);for(var o=i;o>d;--o)u[o]=u[o-1];u[d]=r}e.insert=w;function y(u,d){var r=u.length;if(d<0&&(d+=r),!(d<0||d>=r)){for(var i=u[d],o=d+1;o<r;++o)u[o-1]=u[o];return u.length=r-1,i}}e.removeAt=y;function k(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=t(u,d,r,i);return o!==-1&&y(u,o),o}e.removeFirstOf=k;function T(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=n(u,d,r,i);return o!==-1&&y(u,o),o}e.removeLastOf=T;function E(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var p=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&u[s]===d||i<r&&(s<=i||s>=r)&&u[s]===d?p++:p>0&&(u[s-p]=u[s]);return p>0&&(u.length=o-p),p}e.removeAllOf=E;function S(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o,p=a(u,d,r,i);return p!==-1&&(o=y(u,p)),{index:p,value:o}}e.removeFirstWhere=S;function L(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o,p=l(u,d,r,i);return p!==-1&&(o=y(u,p)),{index:p,value:o}}e.removeLastWhere=L;function A(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var p=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&d(u[s],s)||i<r&&(s<=i||s>=r)&&d(u[s],s)?p++:p>0&&(u[s-p]=u[s]);return p>0&&(u.length=o-p),p}e.removeAllWhere=A})(Nt||(Nt={}));function Ti(e){var t;return typeof e.iter=="function"?t=e.iter():t=new wg(e),t}function Qu(e,t){for(var n=0,a=Ti(e),l;(l=a.next())!==void 0;)if(t(l,n++)===!1)return}function el(e,t){for(var n=0,a=Ti(e),l;(l=a.next())!==void 0;)if(!t(l,n++))return!1;return!0}function tl(e,t){for(var n=0,a=Ti(e),l;(l=a.next())!==void 0;)if(t(l,n++))return!0;return!1}var wg=function(){function e(t){this._index=0,this._source=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},e}(),pT=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?t:this.next()}},e}(),vT=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?this._source[t]:this.next()}},e}(),gT=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?[t,this._source[t]]:this.next()}},e}(),bT=function(){function e(t){this._fn=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},e.prototype.next=function(){return this._fn.call(void 0)},e}();var _T=function(){function e(t){this._cloned=!1,this._source=t,this._active=void 0}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone());return t._active=this._active&&this._active.clone(),t._cloned=!0,this._cloned=!0,t},e.prototype.next=function(){if(this._active===void 0){var t=this._source.next();if(t===void 0)return;this._active=this._cloned?t.clone():t}var n=this._active.next();return n!==void 0?n:(this._active=void 0,this.next())},e}();var yT=function(){function e(){}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e},e.prototype.next=function(){},e}();var xT=function(){function e(t,n){this._source=t,this._index=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._index)},e.prototype.next=function(){var t=this._source.next();if(t!==void 0)return[this._index++,t]},e}();var wT=function(){function e(t,n){this._index=0,this._source=t,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){for(var t=this._fn,n=this._source,a;(a=n.next())!==void 0;)if(t(a,this._index++))return a},e}();var IT=function(){function e(t,n){this._index=0,this._source=t,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){var t=this._source.next();if(t!==void 0)return this._fn.call(void 0,t,this._index++)},e}();var MT=function(){function e(t,n,a){this._index=0,this._start=t,this._stop=n,this._step=a,this._length=Mi.rangeLength(t,n,a)}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._start,this._stop,this._step);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},e}(),Mi;(function(e){function t(n,a,l){return l===0?1/0:n>a&&l>0||n<a&&l<0?0:Math.ceil((a-n)/l)}e.rangeLength=t})(Mi||(Mi={}));var TT=function(){function e(t,n){this._value=t,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._value,this._count)},e.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},e}();function nl(e){var t;return typeof e.retro=="function"?t=e.retro():t=new Ig(e),t}var Ig=function(){function e(t){this._source=t,this._index=t.length-1}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},e}();var kT=function(){function e(t,n){this._source=t,this._step=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._step)},e.prototype.next=function(){for(var t=this._source.next(),n=this._step-1;n>0;--n)this._source.next();return t},e}(),Ju;(function(e){function t(f,c,h){h===void 0&&(h=0);for(var g=new Array(c.length),x=0,M=h,I=c.length;x<I;++x,++M){if(M=f.indexOf(c[x],M),M===-1)return null;g[x]=M}return g}e.findIndices=t;function n(f,c,h){h===void 0&&(h=0);var g=t(f,c,h);if(!g)return null;for(var x=0,M=0,I=g.length;M<I;++M){var b=g[M]-h;x+=b*b}return{score:x,indices:g}}e.matchSumOfSquares=n;function a(f,c,h){h===void 0&&(h=0);var g=t(f,c,h);if(!g)return null;for(var x=0,M=h-1,I=0,b=g.length;I<b;++I){var v=g[I];x+=v-M-1,M=v}return{score:x,indices:g}}e.matchSumOfDeltas=a;function l(f,c,h){for(var g=[],x=0,M=0,I=c.length;x<I;){for(var b=c[x],v=c[x];++x<I&&c[x]===v+1;)v++;M<b&&g.push(f.slice(M,b)),b<v+1&&g.push(h(f.slice(b,v+1))),M=v+1}return M<f.length&&g.push(f.slice(M)),g}e.highlight=l;function m(f,c){return f<c?-1:f>c?1:0}e.cmp=m})(Ju||(Ju={}));var ET=function(){function e(t,n){this._source=t,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._count)},e.prototype.next=function(){if(!(this._count<=0)){var t=this._source.next();if(t!==void 0)return this._count--,t}},e}();var LT=function(){function e(t){this._source=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.map(function(t){return t.clone()}))},e.prototype.next=function(){for(var t=new Array(this._source.length),n=0,a=this._source.length;n<a;++n){var l=this._source[n].next();if(l===void 0)return;t[n]=l}return t},e}();var ue;(function(e){function t(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s){var _=(r+s)%o;if(u[_]===d)return _}return-1}e.firstIndexOf=t;function n(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;r<i?p=r+1+(o-i):p=r-i+1;for(var s=0;s<p;++s){var _=(r-s+o)%o;if(u[_]===d)return _}return-1}e.lastIndexOf=n;function a(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s){var _=(r+s)%o;if(d(u[_],_))return _}return-1}e.findFirstIndex=a;function l(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=u.length;if(o===0)return-1;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;r<i?p=r+1+(o-i):p=r-i+1;for(var s=0;s<p;++s){var _=(r-s+o)%o;if(d(u[_],_))return _}return-1}e.findLastIndex=l;function m(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=a(u,d,r,i);return o!==-1?u[o]:void 0}e.findFirstValue=m;function f(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=l(u,d,r,i);return o!==-1?u[o]:void 0}e.findLastValue=f;function c(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var p=u.length;if(p===0)return 0;i<0?i=Math.max(0,i+p):i=Math.min(i,p-1),o<0?o=Math.max(0,o+p):o=Math.min(o,p-1);for(var s=i,_=o-i+1;_>0;){var C=_>>1,O=s+C;r(u[O],d)<0?(s=O+1,_-=C+1):_=C}return s}e.lowerBound=c;function h(u,d,r,i,o){i===void 0&&(i=0),o===void 0&&(o=-1);var p=u.length;if(p===0)return 0;i<0?i=Math.max(0,i+p):i=Math.min(i,p-1),o<0?o=Math.max(0,o+p):o=Math.min(o,p-1);for(var s=i,_=o-i+1;_>0;){var C=_>>1,O=s+C;r(u[O],d)>0?_=C:(s=O+1,_-=C+1)}return s}e.upperBound=h;function g(u,d,r){if(u===d)return!0;if(u.length!==d.length)return!1;for(var i=0,o=u.length;i<o;++i)if(r?!r(u[i],d[i]):u[i]!==d[i])return!1;return!0}e.shallowEqual=g;function x(u,d){d===void 0&&(d={});var r=d.start,i=d.stop,o=d.step;if(o===void 0&&(o=1),o===0)throw new Error("Slice `step` cannot be zero.");var p=u.length;r===void 0?r=o<0?p-1:0:r<0?r=Math.max(r+p,o<0?-1:0):r>=p&&(r=o<0?p-1:p),i===void 0?i=o<0?-1:p:i<0?i=Math.max(i+p,o<0?-1:0):i>=p&&(i=o<0?p-1:p);var s;o<0&&i>=r||o>0&&r>=i?s=0:o<0?s=Math.floor((i-r+1)/o+1):s=Math.floor((i-r-1)/o+1);for(var _=[],C=0;C<s;++C)_[C]=u[r+C*o];return _}e.slice=x;function M(u,d,r){var i=u.length;if(!(i<=1)&&(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1),d!==r)){for(var o=u[d],p=d<r?1:-1,s=d;s!==r;s+=p)u[s]=u[s+p];u[r]=o}}e.move=M;function I(u,d,r){d===void 0&&(d=0),r===void 0&&(r=-1);var i=u.length;if(!(i<=1))for(d<0?d=Math.max(0,d+i):d=Math.min(d,i-1),r<0?r=Math.max(0,r+i):r=Math.min(r,i-1);d<r;){var o=u[d],p=u[r];u[d++]=p,u[r--]=o}}e.reverse=I;function b(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(!(o<=1)&&(r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1),!(r>=i))){var p=i-r+1;if(d>0?d=d%p:d<0&&(d=(d%p+p)%p),d!==0){var s=r+d;I(u,r,s-1),I(u,s,i),I(u,r,i)}}}e.rotate=b;function v(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o!==0){r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);var p;i<r?p=i+1+(o-r):p=i-r+1;for(var s=0;s<p;++s)u[(r+s)%o]=d}}e.fill=v;function w(u,d,r){var i=u.length;d<0?d=Math.max(0,d+i):d=Math.min(d,i);for(var o=i;o>d;--o)u[o]=u[o-1];u[d]=r}e.insert=w;function y(u,d){var r=u.length;if(d<0&&(d+=r),!(d<0||d>=r)){for(var i=u[d],o=d+1;o<r;++o)u[o-1]=u[o];return u.length=r-1,i}}e.removeAt=y;function k(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=t(u,d,r,i);return o!==-1&&y(u,o),o}e.removeFirstOf=k;function T(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o=n(u,d,r,i);return o!==-1&&y(u,o),o}e.removeLastOf=T;function E(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var p=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&u[s]===d||i<r&&(s<=i||s>=r)&&u[s]===d?p++:p>0&&(u[s-p]=u[s]);return p>0&&(u.length=o-p),p}e.removeAllOf=E;function S(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o,p=a(u,d,r,i);return p!==-1&&(o=y(u,p)),{index:p,value:o}}e.removeFirstWhere=S;function L(u,d,r,i){r===void 0&&(r=-1),i===void 0&&(i=0);var o,p=l(u,d,r,i);return p!==-1&&(o=y(u,p)),{index:p,value:o}}e.removeLastWhere=L;function A(u,d,r,i){r===void 0&&(r=0),i===void 0&&(i=-1);var o=u.length;if(o===0)return 0;r<0?r=Math.max(0,r+o):r=Math.min(r,o-1),i<0?i=Math.max(0,i+o):i=Math.min(i,o-1);for(var p=0,s=0;s<o;++s)r<=i&&s>=r&&s<=i&&d(u[s],s)||i<r&&(s<=i||s>=r)&&d(u[s],s)?p++:p>0&&(u[s-p]=u[s]);return p>0&&(u.length=o-p),p}e.removeAllWhere=A})(ue||(ue={}));function Mg(e){var t;return typeof e.iter=="function"?t=e.iter():t=new Tg(e),t}function pn(e,t){for(var n=0,a=Mg(e),l;(l=a.next())!==void 0;)if(t(l,n++)===!1)return}var Tg=function(){function e(t){this._index=0,this._source=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},e}(),ST=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?t:this.next()}},e}(),AT=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?this._source[t]:this.next()}},e}(),DT=function(){function e(t,n){n===void 0&&(n=Object.keys(t)),this._index=0,this._source=t,this._keys=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?[t,this._source[t]]:this.next()}},e}(),OT=function(){function e(t){this._fn=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},e.prototype.next=function(){return this._fn.call(void 0)},e}();var zT=function(){function e(t){this._cloned=!1,this._source=t,this._active=void 0}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone());return t._active=this._active&&this._active.clone(),t._cloned=!0,this._cloned=!0,t},e.prototype.next=function(){if(this._active===void 0){var t=this._source.next();if(t===void 0)return;this._active=this._cloned?t.clone():t}var n=this._active.next();return n!==void 0?n:(this._active=void 0,this.next())},e}();function Ei(){return new kg}var kg=function(){function e(){}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e},e.prototype.next=function(){},e}();var RT=function(){function e(t,n){this._source=t,this._index=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._index)},e.prototype.next=function(){var t=this._source.next();if(t!==void 0)return[this._index++,t]},e}();var BT=function(){function e(t,n){this._index=0,this._source=t,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){for(var t=this._fn,n=this._source,a;(a=n.next())!==void 0;)if(t(a,this._index++))return a},e}();var PT=function(){function e(t,n){this._index=0,this._source=t,this._fn=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){var t=this._source.next();if(t!==void 0)return this._fn.call(void 0,t,this._index++)},e}();var FT=function(){function e(t,n,a){this._index=0,this._start=t,this._stop=n,this._step=a,this._length=ki.rangeLength(t,n,a)}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._start,this._stop,this._step);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},e}(),ki;(function(e){function t(n,a,l){return l===0?1/0:n>a&&l>0||n<a&&l<0?0:Math.ceil((a-n)/l)}e.rangeLength=t})(ki||(ki={}));var WT=function(){function e(t,n){this._value=t,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._value,this._count)},e.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},e}();var HT=function(){function e(t){this._source=t,this._index=t.length-1}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},e}();var qT=function(){function e(t,n){this._source=t,this._step=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._step)},e.prototype.next=function(){for(var t=this._source.next(),n=this._step-1;n>0;--n)this._source.next();return t},e}(),il;(function(e){function t(f,c,h){h===void 0&&(h=0);for(var g=new Array(c.length),x=0,M=h,I=c.length;x<I;++x,++M){if(M=f.indexOf(c[x],M),M===-1)return null;g[x]=M}return g}e.findIndices=t;function n(f,c,h){h===void 0&&(h=0);var g=t(f,c,h);if(!g)return null;for(var x=0,M=0,I=g.length;M<I;++M){var b=g[M]-h;x+=b*b}return{score:x,indices:g}}e.matchSumOfSquares=n;function a(f,c,h){h===void 0&&(h=0);var g=t(f,c,h);if(!g)return null;for(var x=0,M=h-1,I=0,b=g.length;I<b;++I){var v=g[I];x+=v-M-1,M=v}return{score:x,indices:g}}e.matchSumOfDeltas=a;function l(f,c,h){for(var g=[],x=0,M=0,I=c.length;x<I;){for(var b=c[x],v=c[x];++x<I&&c[x]===v+1;)v++;M<b&&g.push(f.slice(M,b)),b<v+1&&g.push(h(f.slice(b,v+1))),M=v+1}return M<f.length&&g.push(f.slice(M)),g}e.highlight=l;function m(f,c){return f<c?-1:f>c?1:0}e.cmp=m})(il||(il={}));var NT=function(){function e(t,n){this._source=t,this._count=n}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._count)},e.prototype.next=function(){if(!(this._count<=0)){var t=this._source.next();if(t!==void 0)return this._count--,t}},e}();var KT=function(){function e(t){this._source=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.map(function(t){return t.clone()}))},e.prototype.next=function(){for(var t=new Array(this._source.length),n=0,a=this._source.length;n<a;++n){var l=this._source[n].next();if(l===void 0)return;t[n]=l}return t},e}();var rl=function(){function e(t){this._root=new Q.LeafNode,this.cmp=t}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this._root.size===0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._root.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){var t=Q.firstLeaf(this._root);return t.size>0?t.items[0]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){var t=Q.lastLeaf(this._root);return t.size>0?t.items[t.size-1]:void 0},enumerable:!0,configurable:!0}),e.prototype.iter=function(){return Q.iterItems(this._root)},e.prototype.retro=function(){return Q.retroItems(this._root)},e.prototype.slice=function(t,n){return Q.sliceItems(this._root,t,n)},e.prototype.retroSlice=function(t,n){return Q.retroSliceItems(this._root,t,n)},e.prototype.at=function(t){return Q.itemAt(this._root,t)},e.prototype.has=function(t,n){return Q.hasItem(this._root,t,n)},e.prototype.indexOf=function(t,n){return Q.indexOf(this._root,t,n)},e.prototype.get=function(t,n){return Q.getItem(this._root,t,n)},e.prototype.assign=function(t){this.clear(),this.update(t)},e.prototype.insert=function(t){var n=Q.insertItem(this._root,t,this.cmp);return this._root=Q.maybeSplitRoot(this._root),n},e.prototype.update=function(t){var n=this;pn(t,function(a){n.insert(a)})},e.prototype.delete=function(t,n){var a=Q.deleteItem(this._root,t,n);return this._root=Q.maybeExtractRoot(this._root),a},e.prototype.remove=function(t){var n=Q.removeItem(this._root,t);return this._root=Q.maybeExtractRoot(this._root),n},e.prototype.clear=function(){Q.clear(this._root),this._root=new Q.LeafNode},e}();(function(e){function t(n,a){var l=new e(a);return l.assign(n),l}e.from=t})(rl||(rl={}));var Q;(function(e){var t=function(){function s(){this.items=[],this.sizes=[],this.children=[]}return Object.defineProperty(s.prototype,"type",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"size",{get:function(){return this.sizes[this.sizes.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"width",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),s}();e.BranchNode=t;var n=function(){function s(){this.next=null,this.prev=null,this.items=[]}return Object.defineProperty(s.prototype,"type",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"width",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),s}();e.LeafNode=n;function a(s){for(;s.type===0;)s=s.children[0];return s}e.firstLeaf=a;function l(s){for(;s.type===0;)s=s.children[s.children.length-1];return s}e.lastLeaf=l;function m(s){var _=a(s);return new L(_,0,-1)}e.iterItems=m;function f(s){var _=l(s);return new A(_,_.size-1,-1)}e.retroItems=f;function c(s,_,C){_===void 0?_=0:_<0?_=Math.max(0,_+s.size):_=Math.min(_,s.size),C===void 0?C=s.size:C<0?C=Math.max(0,C+s.size):C=Math.min(C,s.size);var O=Math.max(0,C-_);if(O===0)return Ei();for(;s.type===0;){var R=u(s.sizes,_);R>0&&(_-=s.sizes[R-1]),s=s.children[R]}return new L(s,_,O)}e.sliceItems=c;function h(s,_,C){_===void 0?_=s.size-1:_<0?_=Math.max(-1,_+s.size):_=Math.min(_,s.size-1),C===void 0?C=-1:C<0?C=Math.max(-1,C+s.size):C=Math.min(C,s.size-1);var O=Math.max(0,_-C);if(O===0)return Ei();for(;s.type===0;){var R=u(s.sizes,_);R>0&&(_-=s.sizes[R-1]),s=s.children[R]}return new A(s,_,O)}e.retroSliceItems=h;function g(s,_){if(_<0&&(_+=s.size),!(_<0||_>=s.size)){for(;s.type===0;){var C=u(s.sizes,_);C>0&&(_-=s.sizes[C-1]),s=s.children[C]}return s.items[_]}}e.itemAt=g;function x(s,_,C){for(;s.type===0;){var O=d(s.items,_,C);s=s.children[O]}var R=r(s.items,_,C);return R>=0}e.hasItem=x;function M(s,_,C){for(var O=0;s.type===0;){var R=d(s.items,_,C);R>0&&(O+=s.sizes[R-1]),s=s.children[R]}var q=r(s.items,_,C);return q>=0?O+q:-O+q}e.indexOf=M;function I(s,_,C){for(;s.type===0;){var O=d(s.items,_,C);s=s.children[O]}var R=r(s.items,_,C);return R>=0?s.items[R]:void 0}e.getItem=I;function b(s,_,C){if(s.type===1){var O=r(s.items,_,C),R;return O>=0?(R=s.items[O],s.items[O]=_):(R=void 0,ue.insert(s.items,-O-1,_)),R}var q=d(s.items,_,C),K=s.children[q],Y=K.size,V=b(K,_,C),U=K.size;if(s.items[q]=K.items[0],Y===U)return V;if(K.width>E){var G=o(K);ue.insert(s.children,q+1,G),ue.insert(s.items,q+1,G.items[0])}return i(s,q),V}e.insertItem=b;function v(s,_,C){if(s.type===1){var O=r(s.items,_,C);return O<0?void 0:ue.removeAt(s.items,O)}var R=d(s.items,_,C),q=s.children[R],K=q.size,Y=v(q,_,C),V=q.size;return K===V||(s.items[R]=q.items[0],q.width<S&&(R=p(s,R)),i(s,R)),Y}e.deleteItem=v;function w(s,_){if(_<0&&(_+=s.size),!(_<0||_>=s.size)){if(s.type===1)return ue.removeAt(s.items,_);var C=u(s.sizes,_);C>0&&(_-=s.sizes[C]);var O=s.children[C],R=w(O,_);return s.items[C]=O.items[0],O.width<S&&(C=p(s,C)),i(s,C),R}}e.removeItem=w;function y(s){s.type===0?(pn(s.children,y),s.children.length=0,s.sizes.length=0,s.items.length=0):(s.items.length=0,s.next=null,s.prev=null)}e.clear=y;function k(s){if(s.width<=E)return s;var _=new t,C=o(s);return _.sizes[0]=s.size,_.sizes[1]=s.size+C.size,_.children[0]=s,_.children[1]=C,_.items[0]=s.items[0],_.items[1]=C.items[0],_}e.maybeSplitRoot=k;function T(s){if(s.type===1||s.children.length>1)return s;var _=s.children.pop();return y(s),_}e.maybeExtractRoot=T;var E=32,S=E>>1,L=function(){function s(_,C,O){this._node=_,this._index=C,this._count=O}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node,this._index,this._count)},s.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size?(this._node=this._node.next,this._index=0,this.next()):(this._count>0&&this._count--,this._node.items[this._index++])},s}(),A=function(){function s(_,C,O){this._node=_,this._index=C,this._count=O}return s.prototype.iter=function(){return this},s.prototype.clone=function(){return new s(this._node,this._index,this._count)},s.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size&&(this._index=this._node.size-1),this._index<0?(this._node=this._node.prev,this._index=this._node?this._node.size-1:-1,this.next()):(this._count>0&&this._count--,this._node.items[this._index--])},s}();function u(s,_){for(var C=s.length,O=0;O<C;++O)if(s[O]>_)return O;return C-1}function d(s,_,C){for(var O=s.length,R=1;R<O;++R)if(C(s[R],_)>0)return R-1;return O-1}function r(s,_,C){for(var O=s.length,R=0;R<O;++R){var q=C(s[R],_);if(q===0)return R;if(q>0)return-R-1}return-O-1}function i(s,_){for(var C=s.sizes,O=s.children,R=_>0?C[_-1]:0,q=O.length;_<q;++_)R=C[_]=R+O[_].size;C.length=O.length}function o(s){if(s.type===1){for(var _=new n,C=s.items,O=_.items,R=S,q=C.length;R<q;++R)O.push(C[R]);return C.length=S,s.next&&(s.next.prev=_),_.next=s.next,_.prev=s,s.next=_,_}for(var K=new t,Y=s.children,V=K.children,R=S,q=Y.length;R<q;++R)V.push(Y[R]);Y.length=S;for(var U=s.items,G=K.items,R=S,q=U.length;R<q;++R)G.push(U[R]);return U.length=S,i(s,S),i(K,0),K}function p(s,_){var C,O,R,q,K,Y,V=s.children[_],U=_===0?s.children[_+1]:s.children[_-1],G=_===0,te=V.type===1,ne=U.width>S;if(te&&ne&&G){var F=V,H=U;return F.items.push(H.items.shift()),s.items[_+1]=H.items[0],_}if(te&&ne&&!G){var F=V,H=U;return F.items.unshift(H.items.pop()),s.items[_]=F.items[0],_-1}if(te&&!ne&&G){var F=V,H=U;return(C=H.items).unshift.apply(C,F.items),ue.removeAt(s.children,_),ue.removeAt(s.items,_+1),F.prev&&(F.prev.next=H),H.prev=F.prev,y(F),_}if(te&&!ne&&!G){var F=V,H=U;return(O=H.items).push.apply(O,F.items),ue.removeAt(s.children,_),ue.removeAt(s.items,_),F.next&&(F.next.prev=H),H.next=F.next,y(F),_-1}if(!te&&ne&&G){var F=V,H=U;return F.children.push(H.children.shift()),F.items.push(H.items.shift()),s.items[_+1]=H.items[0],i(F,F.width-1),i(H,0),_}if(!te&&ne&&!G){var F=V,H=U;return F.children.unshift(H.children.pop()),F.items.unshift(H.items.pop()),s.items[_]=F.items[0],i(F,0),i(H,H.width-1),_-1}if(!te&&!ne&&G){var F=V,H=U;return(R=H.children).unshift.apply(R,F.children),(q=H.items).unshift.apply(q,F.items),ue.removeAt(s.children,_),ue.removeAt(s.items,_+1),i(H,0),F.children.length=0,y(F),_}if(!te&&!ne&&!G){var F=V,H=U;return(K=H.children).push.apply(K,F.children),(Y=H.items).push.apply(Y,F.items),ue.removeAt(s.children,_),ue.removeAt(s.items,_),i(H,0),F.children.length=0,y(F),_-1}throw"unreachable"}})(Q||(Q={}));var vn=function(){function e(){this._first=null,this._last=null,this._size=0}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this._size===0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this._first?this._first.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this._last?this._last.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstNode",{get:function(){return this._first},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastNode",{get:function(){return this._last},enumerable:!0,configurable:!0}),e.prototype.iter=function(){return new e.ForwardValueIterator(this._first)},e.prototype.retro=function(){return new e.RetroValueIterator(this._last)},e.prototype.nodes=function(){return new e.ForwardNodeIterator(this._first)},e.prototype.retroNodes=function(){return new e.RetroNodeIterator(this._last)},e.prototype.assign=function(t){var n=this;this.clear(),pn(t,function(a){n.addLast(a)})},e.prototype.push=function(t){this.addLast(t)},e.prototype.pop=function(){return this.removeLast()},e.prototype.shift=function(t){this.addFirst(t)},e.prototype.unshift=function(){return this.removeFirst()},e.prototype.addFirst=function(t){var n=new Be.LinkedListNode(this,t);return this._first?(n.next=this._first,this._first.prev=n,this._first=n):(this._first=n,this._last=n),this._size++,n},e.prototype.addLast=function(t){var n=new Be.LinkedListNode(this,t);return this._last?(n.prev=this._last,this._last.next=n,this._last=n):(this._first=n,this._last=n),this._size++,n},e.prototype.insertBefore=function(t,n){if(!n||n===this._first)return this.addFirst(t);if(!(n instanceof Be.LinkedListNode)||n.list!==this)throw new Error("Reference node is not owned by the list.");var a=new Be.LinkedListNode(this,t),l=n,m=l.prev;return a.next=l,a.prev=m,l.prev=a,m.next=a,this._size++,a},e.prototype.insertAfter=function(t,n){if(!n||n===this._last)return this.addLast(t);if(!(n instanceof Be.LinkedListNode)||n.list!==this)throw new Error("Reference node is not owned by the list.");var a=new Be.LinkedListNode(this,t),l=n,m=l.next;return a.next=m,a.prev=l,l.next=a,m.prev=a,this._size++,a},e.prototype.removeFirst=function(){var t=this._first;if(!!t)return t===this._last?(this._first=null,this._last=null):(this._first=t.next,this._first.prev=null),t.list=null,t.next=null,t.prev=null,this._size--,t.value},e.prototype.removeLast=function(){var t=this._last;if(!!t)return t===this._first?(this._first=null,this._last=null):(this._last=t.prev,this._last.next=null),t.list=null,t.next=null,t.prev=null,this._size--,t.value},e.prototype.removeNode=function(t){if(!(t instanceof Be.LinkedListNode)||t.list!==this)throw new Error("Node is not owned by the list.");var n=t;n===this._first&&n===this._last?(this._first=null,this._last=null):n===this._first?(this._first=n.next,this._first.prev=null):n===this._last?(this._last=n.prev,this._last.next=null):(n.next.prev=n.prev,n.prev.next=n.next),n.list=null,n.next=null,n.prev=null,this._size--},e.prototype.clear=function(){for(var t=this._first;t;){var n=t.next;t.list=null,t.prev=null,t.next=null,t=n}this._first=null,this._last=null,this._size=0},e}();(function(e){function t(f){var c=new e;return c.assign(f),c}e.from=t;var n=function(){function f(c){this._node=c}return f.prototype.iter=function(){return this},f.prototype.clone=function(){return new f(this._node)},f.prototype.next=function(){if(!!this._node){var c=this._node;return this._node=c.next,c.value}},f}();e.ForwardValueIterator=n;var a=function(){function f(c){this._node=c}return f.prototype.iter=function(){return this},f.prototype.clone=function(){return new f(this._node)},f.prototype.next=function(){if(!!this._node){var c=this._node;return this._node=c.prev,c.value}},f}();e.RetroValueIterator=a;var l=function(){function f(c){this._node=c}return f.prototype.iter=function(){return this},f.prototype.clone=function(){return new f(this._node)},f.prototype.next=function(){if(!!this._node){var c=this._node;return this._node=c.next,c}},f}();e.ForwardNodeIterator=l;var m=function(){function f(c){this._node=c}return f.prototype.iter=function(){return this},f.prototype.clone=function(){return new f(this._node)},f.prototype.next=function(){if(!!this._node){var c=this._node;return this._node=c.prev,c}},f}();e.RetroNodeIterator=m})(vn||(vn={}));var Be;(function(e){var t=function(){function n(a,l){this.list=null,this.next=null,this.prev=null,this.list=a,this.value=l}return n}();e.LinkedListNode=t})(Be||(Be={}));var gn;(d=>{function e(r,i){let o=g.get(r);if(!o||o.length===0){k(r,i);return}el(nl(o),s=>s?y(s,r,i):!0)&&k(r,i)}d.sendMessage=e;function t(r,i){if(!i.isConflatable){T(r,i);return}tl(h,p=>p.handler!==r||!p.msg||p.msg.type!==i.type||!p.msg.isConflatable?!1:p.msg.conflate(i))||T(r,i)}d.postMessage=t;function n(r,i){let o=g.get(r);o&&o.indexOf(i)!==-1||(o?o.push(i):g.set(r,[i]))}d.installMessageHook=n;function a(r,i){let o=g.get(r);if(!o)return;let p=o.indexOf(i);p!==-1&&(o[p]=null,S(o))}d.removeMessageHook=a;function l(r){let i=g.get(r);i&&i.length>0&&(Nt.fill(i,null),S(i)),Qu(h,o=>{o.handler===r&&(o.handler=null,o.msg=null)})}d.clearData=l;function m(){b||I===0||(w(I),b=!0,E(),b=!1)}d.flush=m;function f(){return M}d.getExceptionHandler=f;function c(r){let i=M;return M=r,i}d.setExceptionHandler=c;let h=new vn,g=new WeakMap,x=new Set,M=r=>{console.error(r)},I=0,b=!1,v=(()=>typeof requestAnimationFrame=="function"?requestAnimationFrame:setImmediate)(),w=(()=>typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearImmediate)();function y(r,i,o){let p=!0;try{typeof r=="function"?p=r(i,o):p=r.messageHook(i,o)}catch(s){M(s)}return p}function k(r,i){try{r.processMessage(i)}catch(o){M(o)}}function T(r,i){h.addLast({handler:r,msg:i}),I===0&&(I=v(E))}function E(){if(I=0,h.isEmpty)return;let r={handler:null,msg:null};for(h.addLast(r);;){let i=h.removeFirst();if(i===r)return;i.handler&&i.msg&&e(i.handler,i.msg)}}function S(r){x.size===0&&v(L),x.add(r)}function L(){x.forEach(A),x.clear()}function A(r){Nt.removeAllWhere(r,u)}function u(r){return r===null}})(gn||={});function Eg(e){let t=document.createElement("div");return t.innerHTML=e,Array.prototype.slice.call(t.children)[0]}function Lg(e){if(e.content)return;e.content=document.createDocumentFragment();let t;for(;t=e.firstChild;)Node.prototype.appendChild.call(e.content,t)}function Cg(e,t,n){let a=Eg(e);Lg(a),t&&(a.innerHTML=`<style>${t.toString()}</style>`+a.innerHTML),a.innerHTML=`<style id="psp_styles" scope="${a.getAttribute("id")}">test{}</style>`+a.innerHTML;let l=0,m=class extends n{attributeChangedCallback(c,h,g){l>0||(g===null&&(g="null"),c[0]!=="_"&&h!=g&&!!Object.getOwnPropertyDescriptor(n.prototype,c).set&&(this[c]=g))}_setAttributeSafe(c,h){l++;try{this.setAttribute(c,h)}finally{l--}}connectedCallback(){if(!this._initialized){this._initializing=!0;var c=document.importNode(a.content,!0);this.attachShadow({mode:"open"}),this._vieux&&(this._vieux.appendChild(c),c=this._vieux),this.shadowRoot.appendChild(c),super.connectedCallback&&super.connectedCallback();for(let h of Object.getOwnPropertyNames(n.prototype))h!=="connectedCallback"&&this.hasAttribute(h)&&h[0]!=="_"&&!!Object.getOwnPropertyDescriptor(n.prototype,h).set&&(this[h]=this.getAttribute(h));this._initializing=!1,this._initialized=!0}}static get observedAttributes(){return Object.getOwnPropertyNames(n.prototype)}};for(let c of Object.getOwnPropertyNames(n.prototype)){let h=Object.getOwnPropertyDescriptor(n.prototype,c);if(h&&h.set){let g=h.set;h.set=function(x){if(!this.hasAttribute(c)||this.getAttribute(c)!==x){this.setAttribute(c,x);return}!this._initializing&&!this._initialized||g.call(this,x)},Object.defineProperty(n.prototype,c,h)}}let f=a.getAttribute("id");window.customElements.define(f,m)}function ol(e,...t){let n=t.map(a=>a.toString()).join(`
`);return function(a){return Cg(e,{toString:()=>n},a)}}var al='.workspace-master-widget{--config-button-icon--content:var(--open-settings-button--content,"\\1F527")!important;}.workspace-master-widget[settings]{--config-button-icon--content:var(--close-settings-button--content,"\\1F527")!important;}.workspace-detail-widget.widget-maximize{--config-button-icon--content:var(--open-settings-button--content,"\\1F527")!important;}.workspace-detail-widget.widget-maximize[settings]{--config-button-icon--content:var(--close-settings-button--content,"\\1F527")!important;}.p-DockPanel-widget{border:1px solid#eaeaea;border-width:0px!important;min-width:300px;min-height:200px;}.workspace-detail-widget{--config-button-icon--content:""!important;}.context-menu>perspective-viewer.context-focus{opacity:1;filter:none;}.context-menu>perspective-viewer{filter:saturate(0);}.context-menu>perspective-viewer>*{pointer-events:none;}perspective-viewer{flex:1;position:relative;display:block;align-items:center;justify-content:center;flex-direction:column;width:100%;height:100%;overflow:visible!important;}.lm-mod-override-cursor{cursor:grabbing!important;}.lm-mod-override-cursor perspective-viewer>*{pointer-events:none;}.p-Menu,.lm-Menu{z-index:10000;position:absolute;white-space:nowrap;overflow-x:hidden;overflow-y:auto;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.p-Menu-content,.lm-Menu-content{margin:0;padding:0;display:table;list-style-type:none;}.p-Menu-item,.lm-Menu-item{display:table-row;}.p-Menu-item.p-mod-hidden,.p-Menu-item.p-mod-collapsed,.lm-Menu-item.lm-mod-hidden,.lm-Menu-item.lm-mod-collapsed{display:none!important;}.p-Menu-itemIcon,.p-Menu-itemSubmenuIcon,.lm-Menu-itemIcon,.lm-Menu-itemSubmenuIcon{display:table-cell;text-align:center;}.p-Menu-itemLabel,.lm-Menu-itemLabel{display:table-cell;text-align:left;}.p-Menu-itemShortcut,.lm-Menu-itemShortcut{display:table-cell;text-align:right;}.p-Menu{font-size:12px;padding:8px;background:white;color:#666;border:1px solid var(--inactive--color);border-radius:3px;max-width:350px;}.p-Menu.perspective-workspace-menu .p-Menu-item{padding-left:37px!important;min-width:var(--min-width);}.p-Menu-item.p-mod-active{background-color:var(--icon--color);color:var(--plugin--background);}.p-Menu-item.p-mod-disabled{opacity:0.5;}.p-Menu-itemIcon{width:24px;height:12px;margin-right:4px;}.p-Menu-itemLabel{flex:1 1;padding:4px 2px 4px 2px;}.p-Menu-itemMnemonic{text-decoration:underline;}.p-Menu-itemShortcut{padding:4px 0px;}.p-Menu-itemSubmenuIcon{width:24px;height:18px;}.p-Menu-item{display:flex;align-items:center;outline:none;margin:0 -8px;padding:0 8px;}.p-Menu-item[data-type="separator"]>div{padding:0;height:9px;}.p-Menu-item[data-type="separator"]>div::after{content:"";display:block;position:relative;top:4px;border-top:1px solid#dddddd;}.p-MenuBar-menu{transform:translateY(-1px);}.p-MenuBar-item{padding:10px 32px;border-left:1px solid transparent;border-right:1px solid transparent;color:#737373!important;}.p-MenuBar-item.p-mod-active{background:rgba(0,0,0,0.2);}.p-MenuBar.p-mod-active .p-MenuBar-item.p-mod-active{z-index:10001;background:rgba(0,0,0,0.2);}.p-Menu-itemIcon:before{content:attr(content);font-family:"ui-monospace","SFMono-Regular","SF Mono","Menlo","Consolas","Liberation Mono",monospace;}[data-type="submenu"] .lm-Menu-itemSubmenuIcon:before{content:">";font-family:"ui-monospace","SFMono-Regular","SF Mono","Menlo","Consolas","Liberation Mono",monospace;height:18px;}.p-mod-drag-image.p-TabBar-tab{display:none;}';var Li=class extends HTMLElement{set side(t){this.setAttribute("side",t),this.workspace&&(this.workspace.side=t)}get side(){return this.getAttribute("side")}save(){return this.workspace.save()}async restore(t){await this.workspace.restore(t)}async flush(){await Promise.all(Array.from(this.querySelectorAll("perspective-viewer")).map(t=>t.flush()))}addViewer(t){this.workspace.addViewer(t)}addTable(t,n){this.workspace.addTable(t,n)}getTable(t){return this.workspace.getTable(t)}removeTable(t){return this.workspace.removeTable(t)}get tables(){return this.workspace.tables}notifyResize(){this.workspace.update()}_light_dom_changed(){let t=Array.from(this.childNodes);for(let n of t)n.tagName==="PERSPECTIVE-VIEWER"&&this.workspace.update_widget_for_viewer(n);this.workspace.remove_unslotted_widgets(t),this.workspace.update_details_panel(t)}_register_light_dom_listener(){let t=new MutationObserver(this._light_dom_changed.bind(this)),n={attributes:!1,childList:!0,subtree:!1};t.observe(this,n),this._light_dom_changed()}connectedCallback(){if(!this.side){this.side=this.side||yt.LEFT;let t=this.shadowRoot.querySelector("#container");this.workspace=new qt(this,{side:this.side}),this._register_light_dom_listener(),gn.sendMessage(this.workspace,B.Msg.BeforeAttach),t.insertBefore(this.workspace.node,null),gn.sendMessage(this.workspace,B.Msg.AfterAttach),window.onresize=this.workspace.update.bind(this.workspace)}}},Ci=document.createElement("style");Ci.toggleAttribute("injected",!0);Ci.innerHTML=al;document.head.appendChild(Ci);ol(Di,Ai)(Li);export{Ct as PerspectiveViewerWidget,qt as PerspectiveWorkspace};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
//# sourceMappingURL=perspective-workspace.js.map
