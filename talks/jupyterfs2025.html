<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>jupyter-fs</title>
  <link rel="stylesheet" href="assets/dist/reveal.css">
  <link rel="stylesheet" href="assets/dist/theme/white.css" id="theme">
  <link rel="stylesheet" href="assets/plugin/highlight/monokai.css">
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PJBFEVM4RY"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-PJBFEVM4RY');
  </script>
  <style>
    .reveal .smallfont {
      font-size: 18px;
    }
  </style>
</head>
<body>
  <div class="reveal">
    <div class="slides">
      <section data-markdown>
          <script type="text/template">
              <!-- .slide: data-background-image="assets/img/cubist/lightbg.png" -->
              <!-- .slide: style="color: white" -->
              <h3 style="color: white;">Data Studio in your Notebook</h3>
              <h3 style="color: white;">With jupyter-fs</h3>
              <br />
              <span style="color:white;">Tim Paine
              <br />
              <a style="color: white; text-decoration: underline;" href="https://github.com/timkpaine">@timkpaine</a></span>
              <br />
              <br />
              <a href="https://point72.com/cubist/"><img src="assets/img/cubist/logo-horizontal-white.png" width=250></img></a>
          </script>
      </section>
      <section data-markdown>
        <script type="text/template">
          <img src="assets/img/jupyterfs2025/qr.png" width=500  />
        </script>
      </section>
      <section>
        <section data-markdown data-separator="---">
          <script type="text/template">
            ## About Me

            Quantitative Developer at Cubist Systematic Strategies
            <!-- .element: class="fragment" data-fragment-index="1" -->

            <a href="https://point72.com/cubist/"><img src="assets/img/cubist/logo-horizontal-white.png" width=250></img></a>
            <!-- .element: class="fragment" data-fragment-index="2" -->

            Build tools for research and trading, from long term to high frequency
            <!-- .element: class="fragment" data-fragment-index="3" -->

            [@timkpaine](https://github.com/timkpaine)
            <!-- .element: class="fragment" data-fragment-index="4" -->

            [@Point72](https://github.com/Point72)
            <!-- .element: class="fragment" data-fragment-index="5" -->


          </script>
        </section>
      </section>

      <section>
        <section data-markdown data-separator="---">
          <script type="text/template">
            ## Talk Overview

            Background and Motivation
            <!-- .element: class="fragment" data-fragment-index="1" -->

            `jupyter-fs`, Overview and Setup
            <!-- .element: class="fragment" data-fragment-index="2" -->

            Key Features and Usage
            <!-- .element: class="fragment" data-fragment-index="3" -->

            Next Steps and Future Work
            <!-- .element: class="fragment" data-fragment-index="4" -->
          </script>
        </section>
      </section>
      <section>
        <section data-markdown data-separator="---">
          <script type="text/template">
            ## Background and Motivation

            This talk has three motivations:

            1. Explain some of the key architectural elements of Jupyter / JupyterLab (ContentsManager, Server Extensions, Frontend Extensions)
            <!-- .element: class="fragment" data-fragment-index="1" -->

            2. Introduce `jupyter-fs`, its architecture and key features
            <!-- .element: class="fragment" data-fragment-index="2" -->

            3. Show how you can use `jupyter-fs` to reduce friction in your data science workflows
            <!-- .element: class="fragment" data-fragment-index="3" -->

            ---

            ## Background

            Jupyter is the tool of choice for researchers and data scientists
            <!-- .element: class="fragment" data-fragment-index="1" -->

            ---

            <img src="assets/img/jupyterfs2025/1.png" width=200  />

            ---

            In a typical setup, we'll have access to some compute and storage

            ---

            <img src="assets/img/jupyterfs2025/2.png" width=500  />

            ---

            When exploring some new data or conducting an experiment for the first time, a typical workflow might look like this:

            ---

            <img src="assets/img/jupyterfs2025/3.png" width=700  />

            ---

            This workflow is very common, but has friction points and requires navigating across tools
            <!-- .element: class="fragment" data-fragment-index="1" -->

            Users often prefer to have an all-in-one environment where they can access their data, code, and compute in one place
            <!-- .element: class="fragment" data-fragment-index="2" -->

            Jupyter is perfect for code, dispatching to compute, and accessing data, but suffers a bit when it comes to browsing and exploring data backends
            <!-- .element: class="fragment" data-fragment-index="3" -->

            ---

            This is where `jupyter-fs` comes in!

            Leverage Jupyter's extension ecosystem across generic backends
            <!-- .element: class="fragment" data-fragment-index="1" -->

            ---

            <img src="assets/img/jupyterfs2025/4.png" width=700  />


          </script>
        </section>
      </section>
      <section>
        <section data-markdown data-separator="---">
          <script type="text/template">
            ## Talk Overview

            ~~Background and Motivation~~

            `jupyter-fs`, Overview and Setup

            Key Features and Usage

            Next Steps and Future Work

          </script>
        </section>
      </section>
      <section>
        <section data-markdown data-separator="---">
          <script type="text/template">
            <img src="assets/img/jupyterfs2025/logo.png" width=400  />

            ---

            What is `jupyter-fs`, what does it do, and how do I use it?

            ---

            `jupyter-fs` is a:

            <ul>
              <li>Jupyter <code>ContentsManager</code></li>
              <!-- .element: class="fragment" data-fragment-index="1" -->
              <li>Jupyter Server Extension</li>
              <!-- .element: class="fragment" data-fragment-index="2" -->
              <li>JupyterLab Frontend Extension</li>
              <!-- .element: class="fragment" data-fragment-index="3" -->
            </ul>

            ---

            Let's look at each of these aspects in turn


            ---

            ## `ContentsManager`

            A `ContentsManager` is a filesystem abstraction interface for Jupyter

            [Docs](https://jupyter-server.readthedocs.io/en/latest/developers/contents.html)
            <!-- .element: class="fragment" data-fragment-index="1" -->



            ---

            There are some simple methods to implement:

            <ul>
            <li><code>get(path)</code>: Get a file or directory model.</li>
              <!-- .element: class="fragment" data-fragment-index="1" -->
            <li><code>save(model, path)</code>: Save a file or directory model to path.</li>
              <!-- .element: class="fragment" data-fragment-index="2" -->
            <li><code>delete_file(path)</code>: Delete the file or directory at path.</li>
              <!-- .element: class="fragment" data-fragment-index="3" -->
            <li><code>rename_file(old_path, new_path)</code>: Rename a file or directory.</li>
              <!-- .element: class="fragment" data-fragment-index="4" -->
            </ul>

            etc
              <!-- .element: class="fragment" data-fragment-index="5" -->

            ---

            There are three simple data structures to return:

            <ul>
            <li>Notebook: <code>.ipynb</code> file</li>
            <!-- .element: class="fragment" data-fragment-index="1" -->
            <li>File: text or binary file</li>
            <!-- .element: class="fragment" data-fragment-index="2" -->
            <li>Directory: folder of files</li>
            <!-- .element: class="fragment" data-fragment-index="3" -->
            </ul>

            ---

            The default `ContentsManager` is the `FileContentsManager` which interacts with the local filesystem

            We can override via Jupyter Configuration
            <!-- .element: class="fragment" data-fragment-index="1" -->

            ```python
            c.NotebookApp.contents_manager_class = "jupyterfs.MetaManager"
            ```
            <!-- .element: class="fragment" data-fragment-index="2" -->

            **jupyter_server_config.json**
            <!-- .element: class="fragment" data-fragment-index="3" -->

            ```json
            {
              "ServerApp": {
                "contents_manager_class":
                  "jupyterfs.metamanager.MetaManager"
              }
            }
            ```
            <!-- .element: class="fragment" data-fragment-index="3" -->


            ---

            Note: `jupyter-fs` should do this itself on install, but other plugins and frameworks like `jupytext` do as well and might conflict.

            ---

            `jupyter-fs` provides two `ContentsManager` implementations:

            `MetaManager` and `SyncMetaManager`

            ---

            More accurately, `MetaManager` is a bridge between Jupyter `ContentsManager` and a backend filesystem implemented in one of the two major Python filesystem libraries:

            `fsspec`
            <!-- .element: class="fragment" data-fragment-index="1" -->

            `pyfilesystem2`
            <!-- .element: class="fragment" data-fragment-index="2" -->

            ---

            ## pyfilesystem2

            [Link](https://github.com/PyFilesystem/pyfilesystem2)

            - [Local filesystem](https://pyfilesystem2.readthedocs.io/en/latest/reference/osfs.html)
            - [FTP/SFTP](https://pyfilesystem2.readthedocs.io/en/latest/reference/ftpfs.html)
            - [SSHFS](https://github.com/althonos/fs.sshfs)
            - [S3](https://fs-s3fs.readthedocs.io/en/latest/)
            - [Samba](https://github.com/althonos/fs.smbfs)
            - [WebDAV](https://github.com/PyFilesystem/webdavfs)
            - Google, Dropbox, Zip, Git, etc

            ---

            ## fsspec

            [Link](https://filesystem-spec.readthedocs.io/en/latest/)

            - [Local filesystem](https://filesystem-spec.readthedocs.io/en/latest/api.html#fsspec.implementations.local.LocalFileSystem)
            - [FTP/SFTP](https://filesystem-spec.readthedocs.io/en/latest/api.html#fsspec.implementations.ftp.FTPFileSystem)
            - [SSHFS](https://github.com/fsspec/sshfs)
            - [S3](https://s3fs.readthedocs.io/en/latest/)
            - [Samba](https://filesystem-spec.readthedocs.io/en/latest/api.html#fsspec.implementations.smb.SMBFileSystem)
            - [WebDAV](https://github.com/skshetry/webdav4)
            - Google, Dropbox, Zip, Git, etc

            ---

            <img src="assets/img/jupyterfs2025/5.png" width=800  />

            ---

            ## Configuring backends

            Both pyfilesystem2 and fsspec backends can be configured via the settings menu in the JupyterLab UI,  or via server-side config fles

            ---

            ```json
            c.JupyterFs.resources = [{
              "name": "local_test",
              "url": "osfs:///Users/timkpaine/Developer"
            }]
            ```

            ---

            <img src="assets/img/jupyterfs2025/example1.png" width=600  />

            ---

            ## Server Extension

            Jupyter has a modular server architecture that allows for extensions.

            [Docs](https://jupyter-server.readthedocs.io/en/latest/developers/extensions.html)
            <!-- .element: class="fragment" data-fragment-index="1" -->

            When we replace the default `ContentsManager`, we also need to add a server extension to serve up the configuration API and static frontend assets.
            <!-- .element: class="fragment" data-fragment-index="2" -->

            ---

            **jupyter_server_config.d/jupyterfs.json**

            ```json
            {
              "ServerApp": {
                "jpserver_extensions": {
                  "jupyterfs.extension": true
                }
              }
            }
            ```

            Note: as before, `jupyter-fs` should do this itself on install, but other plugins and frameworks may conflict.

            ---

            ## Frontend Extension

            JupyterLab also has a modular frontend architecture that allows for extensions.

            [Docs](https://jupyter-notebook.readthedocs.io/en/stable/extending/frontend_extensions.html)
            <!-- .element: class="fragment" data-fragment-index="1" -->

            ---

            `jupyter-fs` provides a separate filesystem browser interface in the JupyterLab sidebar

            This is for a few reasons:
            <!-- .element: class="fragment" data-fragment-index="1" -->


            - The default file browser uses a "paning" view which is sometimes inconvenient for browsing data
            <!-- .element: class="fragment" data-fragment-index="2" -->
            - The default file browser scales poorly when you have more than several hundred files or folders
            <!-- .element: class="fragment" data-fragment-index="3" -->
            - We wanted the ability to create multiple independent file browsers unique to each separate backend
            <!-- .element: class="fragment" data-fragment-index="4" -->

            ---

            <img src="assets/img/jupyterfs2025/treefinder.svg" width=200  />

            [tree-finder](https://github.com/tree-finder/tree-finder)

            Standalone JavaScript library for file browsers, built on [regular-table](https://github.com/finos/regular-table) for scalability (1000s of files/folders)

            ---

            <img src="assets/img/jupyterfs2025/filebrowser.png" width=250  />


          </script>
        </section>
      </section>
      <section>
        <section data-markdown data-separator="---">
          <script type="text/template">
            ## Talk Overview

            ~~Background and Motivation~~

            ~~`jupyter-fs`, Overview and Setup~~

            Key Features and Usage

            Next Steps and Future Work
          </script>
        </section>
      </section>
      <section>
        <section data-markdown data-separator="---">
          <script type="text/template">
            ## Key Features and Usage

            At the most basic level, `jupyter-fs` could be considered a "drop in" UI replacement for the default Jupyter file browser
            <!-- .element: class="fragment" data-fragment-index="1" -->

            ---

            <img src="assets/img/jupyterfs2025/button1.png" height=100  />
            <!-- .element: class="fragment" data-fragment-index="1" -->

            <img src="assets/img/jupyterfs2025/button2.png" height=100  />
            <!-- .element: class="fragment" data-fragment-index="1" -->

            <img src="assets/img/jupyterfs2025/button3.png" height=100  />
            <!-- .element: class="fragment" data-fragment-index="1" -->

            <br>

            <img src="assets/img/jupyterfs2025/context.png" width=300  />
            <!-- .element: class="fragment" data-fragment-index="2" -->

            ---

            <img src="assets/img/jupyterfs2025/openwith.png" width=700  />

            ---

            Double click, drag and drop, right click context menus, multi-select, keyboard shortcuts, etc

            ---

            However, when working with remote filesystems, there are some additional features that can be very useful, as well as one substantial downside

            ---

            ## Elephant in the room

            Your notebook and the data you're viewing might not be colocated!
            <!-- .element: class="fragment" data-fragment-index="1" -->

            Opening a notebook from a remote filesystem will run the notebook **locally**, while saving the file **remotely**
            <!-- .element: class="fragment" data-fragment-index="2" -->

            Thus, this is very much oriented towards workflows where the data is remote but the code/notebook is local
            <!-- .element: class="fragment" data-fragment-index="3" -->

            ---

            ## Overcoming

            Because of this nuance, we have a system for easily connecting the data you see on the left hand side with the code you write in the notebook
            <!-- .element: class="fragment" data-fragment-index="1" -->

            These are called *snippets*, and we ship many out of the box
            <!-- .element: class="fragment" data-fragment-index="2" -->

            ---

            <img src="assets/img/jupyterfs2025/snippets.png" width=600  />

            ---

            Snippets are registered, templated code blocks that can be copy-pasted into your notebook

            When done, they will be templated with the required parameters to access the data via the filesystem interface
            <!-- .element: class="fragment" data-fragment-index="1" -->

            ---

            <img src="assets/img/jupyterfs2025/snippets2.png" width=800  />

            ---

            We can even access the pyfilesystem2 or fsspec filesystem object directly if we want to do something more custom

            <img src="assets/img/jupyterfs2025/snippets3.png" width=1000  />


            ---

            ## Flexible Configuration

            Extensions can be configured server side or client side, allowing them to be stored across users or specific to an individual

            ---

            ## Authentication

            Similarly, authentication can be configured to pick up environment variables, or prompt the user to input fields

            ---

            ## Extensible ecosystem

            Thanks to the underlying filesystem libraries, we can support a wide variety of backends

            Users can even provide their own custom filesystem implementations, and there's no reason the underlying system needs to be filesystem-like

          </script>
        </section>
      </section>
      <section>
        <section data-markdown data-separator="---">
          <script type="text/template">
            ## Talk Overview

            ~~Background and Motivation~~

            ~~`jupyter-fs`, Overview and Setup~~

            ~~Key Features and Usage~~

            Next Steps and Future Work
          </script>
        </section>
      </section>
      <section>
        <section data-markdown data-separator="---">
          <script type="text/template">
            ## Next Steps and Future Work

            Single file browser to make it easier to navigate across multiple backends with familiar UX (e.g. drag/drop)

            More backend-driven features and snippets, like SQL databases, etc

            Enhanced integration with ecosystem projects: `jupytext`, `jupyter-fsspec`, JupyterLab Filebrowser / `tree-finder`, etc

          </script>
        </section>
      </section>
      <section>
        <section data-markdown data-separator="---">
          <script type="text/template">
            ## Q/A

            <span>Tim Paine / <a style="text-decoration: underline;" href="https://github.com/timkpaine">@timkpaine</a></span>

            [github.com/jpmorganchase/jupyter-fs](https://github.com/jpmorganchase/jupyter-fs)

          </script>
        </section>
      </section>
    </div>
  </div>
  <script src="assets/dist/reveal.js"></script>
  <script src="assets/plugin/markdown/markdown.js"></script>
  <script src="assets/plugin/highlight/highlight.js"></script>
  <script src="assets/plugin/notes/notes.js"></script>
  <script src="assets/plugin/math/math.js"></script>
  <script>
    Reveal.initialize({
      center: true,
      controls: true,
      history: true,
      plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealMath ],
      progress: true,
      slideNumber: true
    });
  </script>
</body>
</html>
